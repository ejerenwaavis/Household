var Nh=Object.defineProperty;var Sh=(e,t,n)=>t in e?Nh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var hd=(e,t,n)=>Sh(e,typeof t!="symbol"?t+"":t,n);function Ch(e,t){for(var n=0;n<t.length;n++){const a=t[n];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(a,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var Eh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var hu={exports:{}},Ys={},gu={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ca=Symbol.for("react.element"),Ph=Symbol.for("react.portal"),Ih=Symbol.for("react.fragment"),Lh=Symbol.for("react.strict_mode"),Rh=Symbol.for("react.profiler"),_h=Symbol.for("react.provider"),Th=Symbol.for("react.context"),Ah=Symbol.for("react.forward_ref"),Mh=Symbol.for("react.suspense"),Dh=Symbol.for("react.memo"),Fh=Symbol.for("react.lazy"),gd=Symbol.iterator;function Oh(e){return e===null||typeof e!="object"?null:(e=gd&&e[gd]||e["@@iterator"],typeof e=="function"?e:null)}var xu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pu=Object.assign,fu={};function Rn(e,t,n){this.props=e,this.context=t,this.refs=fu,this.updater=n||xu}Rn.prototype.isReactComponent={};Rn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Rn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function yu(){}yu.prototype=Rn.prototype;function sl(e,t,n){this.props=e,this.context=t,this.refs=fu,this.updater=n||xu}var ol=sl.prototype=new yu;ol.constructor=sl;pu(ol,Rn.prototype);ol.isPureReactComponent=!0;var xd=Array.isArray,bu=Object.prototype.hasOwnProperty,il={current:null},vu={key:!0,ref:!0,__self:!0,__source:!0};function ju(e,t,n){var a,s={},o=null,i=null;if(t!=null)for(a in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)bu.call(t,a)&&!vu.hasOwnProperty(a)&&(s[a]=t[a]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var d=Array(l),c=0;c<l;c++)d[c]=arguments[c+2];s.children=d}if(e&&e.defaultProps)for(a in l=e.defaultProps,l)s[a]===void 0&&(s[a]=l[a]);return{$$typeof:Ca,type:e,key:o,ref:i,props:s,_owner:il.current}}function $h(e,t){return{$$typeof:Ca,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ll(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ca}function Bh(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var pd=/\/+/g;function vo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Bh(""+e.key):t.toString(36)}function as(e,t,n,a,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Ca:case Ph:i=!0}}if(i)return i=e,s=s(i),e=a===""?"."+vo(i,0):a,xd(s)?(n="",e!=null&&(n=e.replace(pd,"$&/")+"/"),as(s,t,n,"",function(c){return c})):s!=null&&(ll(s)&&(s=$h(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(pd,"$&/")+"/")+e)),t.push(s)),1;if(i=0,a=a===""?".":a+":",xd(e))for(var l=0;l<e.length;l++){o=e[l];var d=a+vo(o,l);i+=as(o,t,n,d,s)}else if(d=Oh(e),typeof d=="function")for(e=d.call(e),l=0;!(o=e.next()).done;)o=o.value,d=a+vo(o,l++),i+=as(o,t,n,d,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Da(e,t,n){if(e==null)return e;var a=[],s=0;return as(e,a,"","",function(o){return t.call(n,o,s++)}),a}function zh(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var mt={current:null},ss={transition:null},Uh={ReactCurrentDispatcher:mt,ReactCurrentBatchConfig:ss,ReactCurrentOwner:il};function ku(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:Da,forEach:function(e,t,n){Da(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Da(e,function(){t++}),t},toArray:function(e){return Da(e,function(t){return t})||[]},only:function(e){if(!ll(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ye.Component=Rn;ye.Fragment=Ih;ye.Profiler=Rh;ye.PureComponent=sl;ye.StrictMode=Lh;ye.Suspense=Mh;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uh;ye.act=ku;ye.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=pu({},e.props),s=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=il.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(d in t)bu.call(t,d)&&!vu.hasOwnProperty(d)&&(a[d]=t[d]===void 0&&l!==void 0?l[d]:t[d])}var d=arguments.length-2;if(d===1)a.children=n;else if(1<d){l=Array(d);for(var c=0;c<d;c++)l[c]=arguments[c+2];a.children=l}return{$$typeof:Ca,type:e.type,key:s,ref:o,props:a,_owner:i}};ye.createContext=function(e){return e={$$typeof:Th,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:_h,_context:e},e.Consumer=e};ye.createElement=ju;ye.createFactory=function(e){var t=ju.bind(null,e);return t.type=e,t};ye.createRef=function(){return{current:null}};ye.forwardRef=function(e){return{$$typeof:Ah,render:e}};ye.isValidElement=ll;ye.lazy=function(e){return{$$typeof:Fh,_payload:{_status:-1,_result:e},_init:zh}};ye.memo=function(e,t){return{$$typeof:Dh,type:e,compare:t===void 0?null:t}};ye.startTransition=function(e){var t=ss.transition;ss.transition={};try{e()}finally{ss.transition=t}};ye.unstable_act=ku;ye.useCallback=function(e,t){return mt.current.useCallback(e,t)};ye.useContext=function(e){return mt.current.useContext(e)};ye.useDebugValue=function(){};ye.useDeferredValue=function(e){return mt.current.useDeferredValue(e)};ye.useEffect=function(e,t){return mt.current.useEffect(e,t)};ye.useId=function(){return mt.current.useId()};ye.useImperativeHandle=function(e,t,n){return mt.current.useImperativeHandle(e,t,n)};ye.useInsertionEffect=function(e,t){return mt.current.useInsertionEffect(e,t)};ye.useLayoutEffect=function(e,t){return mt.current.useLayoutEffect(e,t)};ye.useMemo=function(e,t){return mt.current.useMemo(e,t)};ye.useReducer=function(e,t,n){return mt.current.useReducer(e,t,n)};ye.useRef=function(e){return mt.current.useRef(e)};ye.useState=function(e){return mt.current.useState(e)};ye.useSyncExternalStore=function(e,t,n){return mt.current.useSyncExternalStore(e,t,n)};ye.useTransition=function(){return mt.current.useTransition()};ye.version="18.3.1";gu.exports=ye;var g=gu.exports;const dl=mu(g),Hh=Ch({__proto__:null,default:dl},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wh=g,Vh=Symbol.for("react.element"),qh=Symbol.for("react.fragment"),Gh=Object.prototype.hasOwnProperty,Yh=Wh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Kh={key:!0,ref:!0,__self:!0,__source:!0};function wu(e,t,n){var a,s={},o=null,i=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(a in t)Gh.call(t,a)&&!Kh.hasOwnProperty(a)&&(s[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)s[a]===void 0&&(s[a]=t[a]);return{$$typeof:Vh,type:e,key:o,ref:i,props:s,_owner:Yh.current}}Ys.Fragment=qh;Ys.jsx=wu;Ys.jsxs=wu;hu.exports=Ys;var r=hu.exports,ti={},Nu={exports:{}},Et={},Su={exports:{}},Cu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,F){var B=T.length;T.push(F);e:for(;0<B;){var U=B-1>>>1,q=T[U];if(0<s(q,F))T[U]=F,T[B]=q,B=U;else break e}}function n(T){return T.length===0?null:T[0]}function a(T){if(T.length===0)return null;var F=T[0],B=T.pop();if(B!==F){T[0]=B;e:for(var U=0,q=T.length,R=q>>>1;U<R;){var H=2*(U+1)-1,W=T[H],ee=H+1,ge=T[ee];if(0>s(W,B))ee<q&&0>s(ge,W)?(T[U]=ge,T[ee]=B,U=ee):(T[U]=W,T[H]=B,U=H);else if(ee<q&&0>s(ge,B))T[U]=ge,T[ee]=B,U=ee;else break e}}return F}function s(T,F){var B=T.sortIndex-F.sortIndex;return B!==0?B:T.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var d=[],c=[],m=1,h=null,u=3,w=!1,p=!1,f=!1,k=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(T){for(var F=n(c);F!==null;){if(F.callback===null)a(c);else if(F.startTime<=T)a(c),F.sortIndex=F.expirationTime,t(d,F);else break;F=n(c)}}function v(T){if(f=!1,y(T),!p)if(n(d)!==null)p=!0,Z(S);else{var F=n(c);F!==null&&_(v,F.startTime-T)}}function S(T,F){p=!1,f&&(f=!1,x(j),j=-1),w=!0;var B=u;try{for(y(F),h=n(d);h!==null&&(!(h.expirationTime>F)||T&&!L());){var U=h.callback;if(typeof U=="function"){h.callback=null,u=h.priorityLevel;var q=U(h.expirationTime<=F);F=e.unstable_now(),typeof q=="function"?h.callback=q:h===n(d)&&a(d),y(F)}else a(d);h=n(d)}if(h!==null)var R=!0;else{var H=n(c);H!==null&&_(v,H.startTime-F),R=!1}return R}finally{h=null,u=B,w=!1}}var C=!1,P=null,j=-1,N=5,E=-1;function L(){return!(e.unstable_now()-E<N)}function D(){if(P!==null){var T=e.unstable_now();E=T;var F=!0;try{F=P(!0,T)}finally{F?M():(C=!1,P=null)}}else C=!1}var M;if(typeof b=="function")M=function(){b(D)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,ae=K.port2;K.port1.onmessage=D,M=function(){ae.postMessage(null)}}else M=function(){k(D,0)};function Z(T){P=T,C||(C=!0,M())}function _(T,F){j=k(function(){T(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){p||w||(p=!0,Z(S))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return u},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(T){switch(u){case 1:case 2:case 3:var F=3;break;default:F=u}var B=u;u=F;try{return T()}finally{u=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,F){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var B=u;u=T;try{return F()}finally{u=B}},e.unstable_scheduleCallback=function(T,F,B){var U=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?U+B:U):B=U,T){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=B+q,T={id:m++,callback:F,priorityLevel:T,startTime:B,expirationTime:q,sortIndex:-1},B>U?(T.sortIndex=B,t(c,T),n(d)===null&&T===n(c)&&(f?(x(j),j=-1):f=!0,_(v,B-U))):(T.sortIndex=q,t(d,T),p||w||(p=!0,Z(S))),T},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(T){var F=u;return function(){var B=u;u=F;try{return T.apply(this,arguments)}finally{u=B}}}})(Cu);Su.exports=Cu;var Qh=Su.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jh=g,Ct=Qh;function z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Eu=new Set,ia={};function Xr(e,t){wn(e,t),wn(e+"Capture",t)}function wn(e,t){for(ia[e]=t,e=0;e<t.length;e++)Eu.add(t[e])}var sr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ri=Object.prototype.hasOwnProperty,Xh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fd={},yd={};function Zh(e){return ri.call(yd,e)?!0:ri.call(fd,e)?!1:Xh.test(e)?yd[e]=!0:(fd[e]=!0,!1)}function eg(e,t,n,a){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function tg(e,t,n,a){if(t===null||typeof t>"u"||eg(e,t,n,a))return!0;if(a)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ht(e,t,n,a,s,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){rt[e]=new ht(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];rt[t]=new ht(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){rt[e]=new ht(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){rt[e]=new ht(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){rt[e]=new ht(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){rt[e]=new ht(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){rt[e]=new ht(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){rt[e]=new ht(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){rt[e]=new ht(e,5,!1,e.toLowerCase(),null,!1,!1)});var cl=/[\-:]([a-z])/g;function ul(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(cl,ul);rt[t]=new ht(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(cl,ul);rt[t]=new ht(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(cl,ul);rt[t]=new ht(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){rt[e]=new ht(e,1,!1,e.toLowerCase(),null,!1,!1)});rt.xlinkHref=new ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){rt[e]=new ht(e,1,!1,e.toLowerCase(),null,!0,!0)});function ml(e,t,n,a){var s=rt.hasOwnProperty(t)?rt[t]:null;(s!==null?s.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(tg(t,n,s,a)&&(n=null),a||s===null?Zh(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,a=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,a?e.setAttributeNS(a,t,n):e.setAttribute(t,n))))}var dr=Jh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fa=Symbol.for("react.element"),nn=Symbol.for("react.portal"),an=Symbol.for("react.fragment"),hl=Symbol.for("react.strict_mode"),ni=Symbol.for("react.profiler"),Pu=Symbol.for("react.provider"),Iu=Symbol.for("react.context"),gl=Symbol.for("react.forward_ref"),ai=Symbol.for("react.suspense"),si=Symbol.for("react.suspense_list"),xl=Symbol.for("react.memo"),gr=Symbol.for("react.lazy"),Lu=Symbol.for("react.offscreen"),bd=Symbol.iterator;function Fn(e){return e===null||typeof e!="object"?null:(e=bd&&e[bd]||e["@@iterator"],typeof e=="function"?e:null)}var Ue=Object.assign,jo;function Gn(e){if(jo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);jo=t&&t[1]||""}return`
`+jo+e}var ko=!1;function wo(e,t){if(!e||ko)return"";ko=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var a=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){a=c}e.call(t.prototype)}else{try{throw Error()}catch(c){a=c}e()}}catch(c){if(c&&a&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),o=a.stack.split(`
`),i=s.length-1,l=o.length-1;1<=i&&0<=l&&s[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==o[l]){if(i!==1||l!==1)do if(i--,l--,0>l||s[i]!==o[l]){var d=`
`+s[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=l);break}}}finally{ko=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Gn(e):""}function rg(e){switch(e.tag){case 5:return Gn(e.type);case 16:return Gn("Lazy");case 13:return Gn("Suspense");case 19:return Gn("SuspenseList");case 0:case 2:case 15:return e=wo(e.type,!1),e;case 11:return e=wo(e.type.render,!1),e;case 1:return e=wo(e.type,!0),e;default:return""}}function oi(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case an:return"Fragment";case nn:return"Portal";case ni:return"Profiler";case hl:return"StrictMode";case ai:return"Suspense";case si:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Iu:return(e.displayName||"Context")+".Consumer";case Pu:return(e._context.displayName||"Context")+".Provider";case gl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case xl:return t=e.displayName||null,t!==null?t:oi(e.type)||"Memo";case gr:t=e._payload,e=e._init;try{return oi(e(t))}catch{}}return null}function ng(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oi(t);case 8:return t===hl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Lr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ru(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ag(e){var t=Ru(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){a=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(i){a=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Oa(e){e._valueTracker||(e._valueTracker=ag(e))}function _u(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=Ru(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function bs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ii(e,t){var n=t.checked;return Ue({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function vd(e,t){var n=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;n=Lr(t.value!=null?t.value:n),e._wrapperState={initialChecked:a,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Tu(e,t){t=t.checked,t!=null&&ml(e,"checked",t,!1)}function li(e,t){Tu(e,t);var n=Lr(t.value),a=t.type;if(n!=null)a==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?di(e,t.type,n):t.hasOwnProperty("defaultValue")&&di(e,t.type,Lr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function jd(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function di(e,t,n){(t!=="number"||bs(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Yn=Array.isArray;function pn(e,t,n,a){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&a&&(e[n].defaultSelected=!0)}else{for(n=""+Lr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,a&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ci(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ue({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function kd(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(z(92));if(Yn(n)){if(1<n.length)throw Error(z(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Lr(n)}}function Au(e,t){var n=Lr(t.value),a=Lr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),a!=null&&(e.defaultValue=""+a)}function wd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Mu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ui(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Mu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $a,Du=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,a,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,a,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for($a=$a||document.createElement("div"),$a.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$a.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function la(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Xn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sg=["Webkit","ms","Moz","O"];Object.keys(Xn).forEach(function(e){sg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Xn[t]=Xn[e]})});function Fu(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Xn.hasOwnProperty(e)&&Xn[e]?(""+t).trim():t+"px"}function Ou(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var a=n.indexOf("--")===0,s=Fu(n,t[n],a);n==="float"&&(n="cssFloat"),a?e.setProperty(n,s):e[n]=s}}var og=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mi(e,t){if(t){if(og[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(z(62))}}function hi(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gi=null;function pl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xi=null,fn=null,yn=null;function Nd(e){if(e=Ia(e)){if(typeof xi!="function")throw Error(z(280));var t=e.stateNode;t&&(t=Zs(t),xi(e.stateNode,e.type,t))}}function $u(e){fn?yn?yn.push(e):yn=[e]:fn=e}function Bu(){if(fn){var e=fn,t=yn;if(yn=fn=null,Nd(e),t)for(e=0;e<t.length;e++)Nd(t[e])}}function zu(e,t){return e(t)}function Uu(){}var No=!1;function Hu(e,t,n){if(No)return e(t,n);No=!0;try{return zu(e,t,n)}finally{No=!1,(fn!==null||yn!==null)&&(Uu(),Bu())}}function da(e,t){var n=e.stateNode;if(n===null)return null;var a=Zs(n);if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(z(231,t,typeof n));return n}var pi=!1;if(sr)try{var On={};Object.defineProperty(On,"passive",{get:function(){pi=!0}}),window.addEventListener("test",On,On),window.removeEventListener("test",On,On)}catch{pi=!1}function ig(e,t,n,a,s,o,i,l,d){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(m){this.onError(m)}}var Zn=!1,vs=null,js=!1,fi=null,lg={onError:function(e){Zn=!0,vs=e}};function dg(e,t,n,a,s,o,i,l,d){Zn=!1,vs=null,ig.apply(lg,arguments)}function cg(e,t,n,a,s,o,i,l,d){if(dg.apply(this,arguments),Zn){if(Zn){var c=vs;Zn=!1,vs=null}else throw Error(z(198));js||(js=!0,fi=c)}}function Zr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Wu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Sd(e){if(Zr(e)!==e)throw Error(z(188))}function ug(e){var t=e.alternate;if(!t){if(t=Zr(e),t===null)throw Error(z(188));return t!==e?null:e}for(var n=e,a=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(a=s.return,a!==null){n=a;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Sd(s),e;if(o===a)return Sd(s),t;o=o.sibling}throw Error(z(188))}if(n.return!==a.return)n=s,a=o;else{for(var i=!1,l=s.child;l;){if(l===n){i=!0,n=s,a=o;break}if(l===a){i=!0,a=s,n=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===n){i=!0,n=o,a=s;break}if(l===a){i=!0,a=o,n=s;break}l=l.sibling}if(!i)throw Error(z(189))}}if(n.alternate!==a)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?e:t}function Vu(e){return e=ug(e),e!==null?qu(e):null}function qu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=qu(e);if(t!==null)return t;e=e.sibling}return null}var Gu=Ct.unstable_scheduleCallback,Cd=Ct.unstable_cancelCallback,mg=Ct.unstable_shouldYield,hg=Ct.unstable_requestPaint,Ve=Ct.unstable_now,gg=Ct.unstable_getCurrentPriorityLevel,fl=Ct.unstable_ImmediatePriority,Yu=Ct.unstable_UserBlockingPriority,ks=Ct.unstable_NormalPriority,xg=Ct.unstable_LowPriority,Ku=Ct.unstable_IdlePriority,Ks=null,Jt=null;function pg(e){if(Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(Ks,e,void 0,(e.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:bg,fg=Math.log,yg=Math.LN2;function bg(e){return e>>>=0,e===0?32:31-(fg(e)/yg|0)|0}var Ba=64,za=4194304;function Kn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ws(e,t){var n=e.pendingLanes;if(n===0)return 0;var a=0,s=e.suspendedLanes,o=e.pingedLanes,i=n&268435455;if(i!==0){var l=i&~s;l!==0?a=Kn(l):(o&=i,o!==0&&(a=Kn(o)))}else i=n&~s,i!==0?a=Kn(i):o!==0&&(a=Kn(o));if(a===0)return 0;if(t!==0&&t!==a&&!(t&s)&&(s=a&-a,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(a&4&&(a|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)n=31-zt(t),s=1<<n,a|=e[n],t&=~s;return a}function vg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jg(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-zt(o),l=1<<i,d=s[i];d===-1?(!(l&n)||l&a)&&(s[i]=vg(l,t)):d<=t&&(e.expiredLanes|=l),o&=~l}}function yi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Qu(){var e=Ba;return Ba<<=1,!(Ba&4194240)&&(Ba=64),e}function So(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ea(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-zt(t),e[t]=n}function kg(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-zt(n),o=1<<s;t[s]=0,a[s]=-1,e[s]=-1,n&=~o}}function yl(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-zt(n),s=1<<a;s&t|e[a]&t&&(e[a]|=t),n&=~s}}var Re=0;function Ju(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Xu,bl,Zu,e0,t0,bi=!1,Ua=[],jr=null,kr=null,wr=null,ca=new Map,ua=new Map,pr=[],wg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ed(e,t){switch(e){case"focusin":case"focusout":jr=null;break;case"dragenter":case"dragleave":kr=null;break;case"mouseover":case"mouseout":wr=null;break;case"pointerover":case"pointerout":ca.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ua.delete(t.pointerId)}}function $n(e,t,n,a,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:o,targetContainers:[s]},t!==null&&(t=Ia(t),t!==null&&bl(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Ng(e,t,n,a,s){switch(t){case"focusin":return jr=$n(jr,e,t,n,a,s),!0;case"dragenter":return kr=$n(kr,e,t,n,a,s),!0;case"mouseover":return wr=$n(wr,e,t,n,a,s),!0;case"pointerover":var o=s.pointerId;return ca.set(o,$n(ca.get(o)||null,e,t,n,a,s)),!0;case"gotpointercapture":return o=s.pointerId,ua.set(o,$n(ua.get(o)||null,e,t,n,a,s)),!0}return!1}function r0(e){var t=$r(e.target);if(t!==null){var n=Zr(t);if(n!==null){if(t=n.tag,t===13){if(t=Wu(n),t!==null){e.blockedOn=t,t0(e.priority,function(){Zu(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function os(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=vi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);gi=a,n.target.dispatchEvent(a),gi=null}else return t=Ia(n),t!==null&&bl(t),e.blockedOn=n,!1;t.shift()}return!0}function Pd(e,t,n){os(e)&&n.delete(t)}function Sg(){bi=!1,jr!==null&&os(jr)&&(jr=null),kr!==null&&os(kr)&&(kr=null),wr!==null&&os(wr)&&(wr=null),ca.forEach(Pd),ua.forEach(Pd)}function Bn(e,t){e.blockedOn===t&&(e.blockedOn=null,bi||(bi=!0,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,Sg)))}function ma(e){function t(s){return Bn(s,e)}if(0<Ua.length){Bn(Ua[0],e);for(var n=1;n<Ua.length;n++){var a=Ua[n];a.blockedOn===e&&(a.blockedOn=null)}}for(jr!==null&&Bn(jr,e),kr!==null&&Bn(kr,e),wr!==null&&Bn(wr,e),ca.forEach(t),ua.forEach(t),n=0;n<pr.length;n++)a=pr[n],a.blockedOn===e&&(a.blockedOn=null);for(;0<pr.length&&(n=pr[0],n.blockedOn===null);)r0(n),n.blockedOn===null&&pr.shift()}var bn=dr.ReactCurrentBatchConfig,Ns=!0;function Cg(e,t,n,a){var s=Re,o=bn.transition;bn.transition=null;try{Re=1,vl(e,t,n,a)}finally{Re=s,bn.transition=o}}function Eg(e,t,n,a){var s=Re,o=bn.transition;bn.transition=null;try{Re=4,vl(e,t,n,a)}finally{Re=s,bn.transition=o}}function vl(e,t,n,a){if(Ns){var s=vi(e,t,n,a);if(s===null)Mo(e,t,a,Ss,n),Ed(e,a);else if(Ng(s,e,t,n,a))a.stopPropagation();else if(Ed(e,a),t&4&&-1<wg.indexOf(e)){for(;s!==null;){var o=Ia(s);if(o!==null&&Xu(o),o=vi(e,t,n,a),o===null&&Mo(e,t,a,Ss,n),o===s)break;s=o}s!==null&&a.stopPropagation()}else Mo(e,t,a,null,n)}}var Ss=null;function vi(e,t,n,a){if(Ss=null,e=pl(a),e=$r(e),e!==null)if(t=Zr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Wu(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ss=e,null}function n0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gg()){case fl:return 1;case Yu:return 4;case ks:case xg:return 16;case Ku:return 536870912;default:return 16}default:return 16}}var yr=null,jl=null,is=null;function a0(){if(is)return is;var e,t=jl,n=t.length,a,s="value"in yr?yr.value:yr.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var i=n-e;for(a=1;a<=i&&t[n-a]===s[o-a];a++);return is=s.slice(e,1<a?1-a:void 0)}function ls(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ha(){return!0}function Id(){return!1}function Pt(e){function t(n,a,s,o,i){this._reactName=n,this._targetInst=s,this.type=a,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ha:Id,this.isPropagationStopped=Id,this}return Ue(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ha)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ha)},persist:function(){},isPersistent:Ha}),t}var _n={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kl=Pt(_n),Pa=Ue({},_n,{view:0,detail:0}),Pg=Pt(Pa),Co,Eo,zn,Qs=Ue({},Pa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==zn&&(zn&&e.type==="mousemove"?(Co=e.screenX-zn.screenX,Eo=e.screenY-zn.screenY):Eo=Co=0,zn=e),Co)},movementY:function(e){return"movementY"in e?e.movementY:Eo}}),Ld=Pt(Qs),Ig=Ue({},Qs,{dataTransfer:0}),Lg=Pt(Ig),Rg=Ue({},Pa,{relatedTarget:0}),Po=Pt(Rg),_g=Ue({},_n,{animationName:0,elapsedTime:0,pseudoElement:0}),Tg=Pt(_g),Ag=Ue({},_n,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Mg=Pt(Ag),Dg=Ue({},_n,{data:0}),Rd=Pt(Dg),Fg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Og={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$g={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=$g[e])?!!t[e]:!1}function wl(){return Bg}var zg=Ue({},Pa,{key:function(e){if(e.key){var t=Fg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ls(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Og[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wl,charCode:function(e){return e.type==="keypress"?ls(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ls(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ug=Pt(zg),Hg=Ue({},Qs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_d=Pt(Hg),Wg=Ue({},Pa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wl}),Vg=Pt(Wg),qg=Ue({},_n,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gg=Pt(qg),Yg=Ue({},Qs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Kg=Pt(Yg),Qg=[9,13,27,32],Nl=sr&&"CompositionEvent"in window,ea=null;sr&&"documentMode"in document&&(ea=document.documentMode);var Jg=sr&&"TextEvent"in window&&!ea,s0=sr&&(!Nl||ea&&8<ea&&11>=ea),Td=" ",Ad=!1;function o0(e,t){switch(e){case"keyup":return Qg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function i0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var sn=!1;function Xg(e,t){switch(e){case"compositionend":return i0(t);case"keypress":return t.which!==32?null:(Ad=!0,Td);case"textInput":return e=t.data,e===Td&&Ad?null:e;default:return null}}function Zg(e,t){if(sn)return e==="compositionend"||!Nl&&o0(e,t)?(e=a0(),is=jl=yr=null,sn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return s0&&t.locale!=="ko"?null:t.data;default:return null}}var ex={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Md(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ex[e.type]:t==="textarea"}function l0(e,t,n,a){$u(a),t=Cs(t,"onChange"),0<t.length&&(n=new kl("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var ta=null,ha=null;function tx(e){b0(e,0)}function Js(e){var t=dn(e);if(_u(t))return e}function rx(e,t){if(e==="change")return t}var d0=!1;if(sr){var Io;if(sr){var Lo="oninput"in document;if(!Lo){var Dd=document.createElement("div");Dd.setAttribute("oninput","return;"),Lo=typeof Dd.oninput=="function"}Io=Lo}else Io=!1;d0=Io&&(!document.documentMode||9<document.documentMode)}function Fd(){ta&&(ta.detachEvent("onpropertychange",c0),ha=ta=null)}function c0(e){if(e.propertyName==="value"&&Js(ha)){var t=[];l0(t,ha,e,pl(e)),Hu(tx,t)}}function nx(e,t,n){e==="focusin"?(Fd(),ta=t,ha=n,ta.attachEvent("onpropertychange",c0)):e==="focusout"&&Fd()}function ax(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Js(ha)}function sx(e,t){if(e==="click")return Js(t)}function ox(e,t){if(e==="input"||e==="change")return Js(t)}function ix(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ht=typeof Object.is=="function"?Object.is:ix;function ga(e,t){if(Ht(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var s=n[a];if(!ri.call(t,s)||!Ht(e[s],t[s]))return!1}return!0}function Od(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $d(e,t){var n=Od(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Od(n)}}function u0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?u0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function m0(){for(var e=window,t=bs();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=bs(e.document)}return t}function Sl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function lx(e){var t=m0(),n=e.focusedElem,a=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&u0(n.ownerDocument.documentElement,n)){if(a!==null&&Sl(n)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(a.start,s);a=a.end===void 0?o:Math.min(a.end,s),!e.extend&&o>a&&(s=a,a=o,o=s),s=$d(n,o);var i=$d(n,a);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>a?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dx=sr&&"documentMode"in document&&11>=document.documentMode,on=null,ji=null,ra=null,ki=!1;function Bd(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ki||on==null||on!==bs(a)||(a=on,"selectionStart"in a&&Sl(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),ra&&ga(ra,a)||(ra=a,a=Cs(ji,"onSelect"),0<a.length&&(t=new kl("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=on)))}function Wa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ln={animationend:Wa("Animation","AnimationEnd"),animationiteration:Wa("Animation","AnimationIteration"),animationstart:Wa("Animation","AnimationStart"),transitionend:Wa("Transition","TransitionEnd")},Ro={},h0={};sr&&(h0=document.createElement("div").style,"AnimationEvent"in window||(delete ln.animationend.animation,delete ln.animationiteration.animation,delete ln.animationstart.animation),"TransitionEvent"in window||delete ln.transitionend.transition);function Xs(e){if(Ro[e])return Ro[e];if(!ln[e])return e;var t=ln[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in h0)return Ro[e]=t[n];return e}var g0=Xs("animationend"),x0=Xs("animationiteration"),p0=Xs("animationstart"),f0=Xs("transitionend"),y0=new Map,zd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(e,t){y0.set(e,t),Xr(t,[e])}for(var _o=0;_o<zd.length;_o++){var To=zd[_o],cx=To.toLowerCase(),ux=To[0].toUpperCase()+To.slice(1);_r(cx,"on"+ux)}_r(g0,"onAnimationEnd");_r(x0,"onAnimationIteration");_r(p0,"onAnimationStart");_r("dblclick","onDoubleClick");_r("focusin","onFocus");_r("focusout","onBlur");_r(f0,"onTransitionEnd");wn("onMouseEnter",["mouseout","mouseover"]);wn("onMouseLeave",["mouseout","mouseover"]);wn("onPointerEnter",["pointerout","pointerover"]);wn("onPointerLeave",["pointerout","pointerover"]);Xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qn));function Ud(e,t,n){var a=e.type||"unknown-event";e.currentTarget=n,cg(a,t,void 0,e),e.currentTarget=null}function b0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],s=a.event;a=a.listeners;e:{var o=void 0;if(t)for(var i=a.length-1;0<=i;i--){var l=a[i],d=l.instance,c=l.currentTarget;if(l=l.listener,d!==o&&s.isPropagationStopped())break e;Ud(s,l,c),o=d}else for(i=0;i<a.length;i++){if(l=a[i],d=l.instance,c=l.currentTarget,l=l.listener,d!==o&&s.isPropagationStopped())break e;Ud(s,l,c),o=d}}}if(js)throw e=fi,js=!1,fi=null,e}function De(e,t){var n=t[Ei];n===void 0&&(n=t[Ei]=new Set);var a=e+"__bubble";n.has(a)||(v0(t,e,2,!1),n.add(a))}function Ao(e,t,n){var a=0;t&&(a|=4),v0(n,e,a,t)}var Va="_reactListening"+Math.random().toString(36).slice(2);function xa(e){if(!e[Va]){e[Va]=!0,Eu.forEach(function(n){n!=="selectionchange"&&(mx.has(n)||Ao(n,!1,e),Ao(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Va]||(t[Va]=!0,Ao("selectionchange",!1,t))}}function v0(e,t,n,a){switch(n0(t)){case 1:var s=Cg;break;case 4:s=Eg;break;default:s=vl}n=s.bind(null,t,n,e),s=void 0,!pi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),a?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Mo(e,t,n,a,s){var o=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var i=a.tag;if(i===3||i===4){var l=a.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(i===4)for(i=a.return;i!==null;){var d=i.tag;if((d===3||d===4)&&(d=i.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;i=i.return}for(;l!==null;){if(i=$r(l),i===null)return;if(d=i.tag,d===5||d===6){a=o=i;continue e}l=l.parentNode}}a=a.return}Hu(function(){var c=o,m=pl(n),h=[];e:{var u=y0.get(e);if(u!==void 0){var w=kl,p=e;switch(e){case"keypress":if(ls(n)===0)break e;case"keydown":case"keyup":w=Ug;break;case"focusin":p="focus",w=Po;break;case"focusout":p="blur",w=Po;break;case"beforeblur":case"afterblur":w=Po;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Ld;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Lg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=Vg;break;case g0:case x0:case p0:w=Tg;break;case f0:w=Gg;break;case"scroll":w=Pg;break;case"wheel":w=Kg;break;case"copy":case"cut":case"paste":w=Mg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=_d}var f=(t&4)!==0,k=!f&&e==="scroll",x=f?u!==null?u+"Capture":null:u;f=[];for(var b=c,y;b!==null;){y=b;var v=y.stateNode;if(y.tag===5&&v!==null&&(y=v,x!==null&&(v=da(b,x),v!=null&&f.push(pa(b,v,y)))),k)break;b=b.return}0<f.length&&(u=new w(u,p,null,n,m),h.push({event:u,listeners:f}))}}if(!(t&7)){e:{if(u=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",u&&n!==gi&&(p=n.relatedTarget||n.fromElement)&&($r(p)||p[or]))break e;if((w||u)&&(u=m.window===m?m:(u=m.ownerDocument)?u.defaultView||u.parentWindow:window,w?(p=n.relatedTarget||n.toElement,w=c,p=p?$r(p):null,p!==null&&(k=Zr(p),p!==k||p.tag!==5&&p.tag!==6)&&(p=null)):(w=null,p=c),w!==p)){if(f=Ld,v="onMouseLeave",x="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(f=_d,v="onPointerLeave",x="onPointerEnter",b="pointer"),k=w==null?u:dn(w),y=p==null?u:dn(p),u=new f(v,b+"leave",w,n,m),u.target=k,u.relatedTarget=y,v=null,$r(m)===c&&(f=new f(x,b+"enter",p,n,m),f.target=y,f.relatedTarget=k,v=f),k=v,w&&p)t:{for(f=w,x=p,b=0,y=f;y;y=en(y))b++;for(y=0,v=x;v;v=en(v))y++;for(;0<b-y;)f=en(f),b--;for(;0<y-b;)x=en(x),y--;for(;b--;){if(f===x||x!==null&&f===x.alternate)break t;f=en(f),x=en(x)}f=null}else f=null;w!==null&&Hd(h,u,w,f,!1),p!==null&&k!==null&&Hd(h,k,p,f,!0)}}e:{if(u=c?dn(c):window,w=u.nodeName&&u.nodeName.toLowerCase(),w==="select"||w==="input"&&u.type==="file")var S=rx;else if(Md(u))if(d0)S=ox;else{S=ax;var C=nx}else(w=u.nodeName)&&w.toLowerCase()==="input"&&(u.type==="checkbox"||u.type==="radio")&&(S=sx);if(S&&(S=S(e,c))){l0(h,S,n,m);break e}C&&C(e,u,c),e==="focusout"&&(C=u._wrapperState)&&C.controlled&&u.type==="number"&&di(u,"number",u.value)}switch(C=c?dn(c):window,e){case"focusin":(Md(C)||C.contentEditable==="true")&&(on=C,ji=c,ra=null);break;case"focusout":ra=ji=on=null;break;case"mousedown":ki=!0;break;case"contextmenu":case"mouseup":case"dragend":ki=!1,Bd(h,n,m);break;case"selectionchange":if(dx)break;case"keydown":case"keyup":Bd(h,n,m)}var P;if(Nl)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else sn?o0(e,n)&&(j="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(s0&&n.locale!=="ko"&&(sn||j!=="onCompositionStart"?j==="onCompositionEnd"&&sn&&(P=a0()):(yr=m,jl="value"in yr?yr.value:yr.textContent,sn=!0)),C=Cs(c,j),0<C.length&&(j=new Rd(j,e,null,n,m),h.push({event:j,listeners:C}),P?j.data=P:(P=i0(n),P!==null&&(j.data=P)))),(P=Jg?Xg(e,n):Zg(e,n))&&(c=Cs(c,"onBeforeInput"),0<c.length&&(m=new Rd("onBeforeInput","beforeinput",null,n,m),h.push({event:m,listeners:c}),m.data=P))}b0(h,t)})}function pa(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Cs(e,t){for(var n=t+"Capture",a=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=da(e,n),o!=null&&a.unshift(pa(e,o,s)),o=da(e,t),o!=null&&a.push(pa(e,o,s))),e=e.return}return a}function en(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Hd(e,t,n,a,s){for(var o=t._reactName,i=[];n!==null&&n!==a;){var l=n,d=l.alternate,c=l.stateNode;if(d!==null&&d===a)break;l.tag===5&&c!==null&&(l=c,s?(d=da(n,o),d!=null&&i.unshift(pa(n,d,l))):s||(d=da(n,o),d!=null&&i.push(pa(n,d,l)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var hx=/\r\n?/g,gx=/\u0000|\uFFFD/g;function Wd(e){return(typeof e=="string"?e:""+e).replace(hx,`
`).replace(gx,"")}function qa(e,t,n){if(t=Wd(t),Wd(e)!==t&&n)throw Error(z(425))}function Es(){}var wi=null,Ni=null;function Si(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ci=typeof setTimeout=="function"?setTimeout:void 0,xx=typeof clearTimeout=="function"?clearTimeout:void 0,Vd=typeof Promise=="function"?Promise:void 0,px=typeof queueMicrotask=="function"?queueMicrotask:typeof Vd<"u"?function(e){return Vd.resolve(null).then(e).catch(fx)}:Ci;function fx(e){setTimeout(function(){throw e})}function Do(e,t){var n=t,a=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(a===0){e.removeChild(s),ma(t);return}a--}else n!=="$"&&n!=="$?"&&n!=="$!"||a++;n=s}while(n);ma(t)}function Nr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function qd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Tn=Math.random().toString(36).slice(2),Kt="__reactFiber$"+Tn,fa="__reactProps$"+Tn,or="__reactContainer$"+Tn,Ei="__reactEvents$"+Tn,yx="__reactListeners$"+Tn,bx="__reactHandles$"+Tn;function $r(e){var t=e[Kt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[or]||n[Kt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=qd(e);e!==null;){if(n=e[Kt])return n;e=qd(e)}return t}e=n,n=e.parentNode}return null}function Ia(e){return e=e[Kt]||e[or],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function dn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(z(33))}function Zs(e){return e[fa]||null}var Pi=[],cn=-1;function Tr(e){return{current:e}}function Fe(e){0>cn||(e.current=Pi[cn],Pi[cn]=null,cn--)}function Me(e,t){cn++,Pi[cn]=e.current,e.current=t}var Rr={},it=Tr(Rr),yt=Tr(!1),qr=Rr;function Nn(e,t){var n=e.type.contextTypes;if(!n)return Rr;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function bt(e){return e=e.childContextTypes,e!=null}function Ps(){Fe(yt),Fe(it)}function Gd(e,t,n){if(it.current!==Rr)throw Error(z(168));Me(it,t),Me(yt,n)}function j0(e,t,n){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return n;a=a.getChildContext();for(var s in a)if(!(s in t))throw Error(z(108,ng(e)||"Unknown",s));return Ue({},n,a)}function Is(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Rr,qr=it.current,Me(it,e),Me(yt,yt.current),!0}function Yd(e,t,n){var a=e.stateNode;if(!a)throw Error(z(169));n?(e=j0(e,t,qr),a.__reactInternalMemoizedMergedChildContext=e,Fe(yt),Fe(it),Me(it,e)):Fe(yt),Me(yt,n)}var tr=null,eo=!1,Fo=!1;function k0(e){tr===null?tr=[e]:tr.push(e)}function vx(e){eo=!0,k0(e)}function Ar(){if(!Fo&&tr!==null){Fo=!0;var e=0,t=Re;try{var n=tr;for(Re=1;e<n.length;e++){var a=n[e];do a=a(!0);while(a!==null)}tr=null,eo=!1}catch(s){throw tr!==null&&(tr=tr.slice(e+1)),Gu(fl,Ar),s}finally{Re=t,Fo=!1}}return null}var un=[],mn=0,Ls=null,Rs=0,Rt=[],_t=0,Gr=null,rr=1,nr="";function Fr(e,t){un[mn++]=Rs,un[mn++]=Ls,Ls=e,Rs=t}function w0(e,t,n){Rt[_t++]=rr,Rt[_t++]=nr,Rt[_t++]=Gr,Gr=e;var a=rr;e=nr;var s=32-zt(a)-1;a&=~(1<<s),n+=1;var o=32-zt(t)+s;if(30<o){var i=s-s%5;o=(a&(1<<i)-1).toString(32),a>>=i,s-=i,rr=1<<32-zt(t)+s|n<<s|a,nr=o+e}else rr=1<<o|n<<s|a,nr=e}function Cl(e){e.return!==null&&(Fr(e,1),w0(e,1,0))}function El(e){for(;e===Ls;)Ls=un[--mn],un[mn]=null,Rs=un[--mn],un[mn]=null;for(;e===Gr;)Gr=Rt[--_t],Rt[_t]=null,nr=Rt[--_t],Rt[_t]=null,rr=Rt[--_t],Rt[_t]=null}var St=null,Nt=null,$e=!1,Bt=null;function N0(e,t){var n=Tt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Kd(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,St=e,Nt=Nr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,St=e,Nt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Gr!==null?{id:rr,overflow:nr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Tt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,St=e,Nt=null,!0):!1;default:return!1}}function Ii(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Li(e){if($e){var t=Nt;if(t){var n=t;if(!Kd(e,t)){if(Ii(e))throw Error(z(418));t=Nr(n.nextSibling);var a=St;t&&Kd(e,t)?N0(a,n):(e.flags=e.flags&-4097|2,$e=!1,St=e)}}else{if(Ii(e))throw Error(z(418));e.flags=e.flags&-4097|2,$e=!1,St=e}}}function Qd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;St=e}function Ga(e){if(e!==St)return!1;if(!$e)return Qd(e),$e=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Si(e.type,e.memoizedProps)),t&&(t=Nt)){if(Ii(e))throw S0(),Error(z(418));for(;t;)N0(e,t),t=Nr(t.nextSibling)}if(Qd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Nt=Nr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Nt=null}}else Nt=St?Nr(e.stateNode.nextSibling):null;return!0}function S0(){for(var e=Nt;e;)e=Nr(e.nextSibling)}function Sn(){Nt=St=null,$e=!1}function Pl(e){Bt===null?Bt=[e]:Bt.push(e)}var jx=dr.ReactCurrentBatchConfig;function Un(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var a=n.stateNode}if(!a)throw Error(z(147,e));var s=a,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var l=s.refs;i===null?delete l[o]:l[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,e))}return e}function Ya(e,t){throw e=Object.prototype.toString.call(t),Error(z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Jd(e){var t=e._init;return t(e._payload)}function C0(e){function t(x,b){if(e){var y=x.deletions;y===null?(x.deletions=[b],x.flags|=16):y.push(b)}}function n(x,b){if(!e)return null;for(;b!==null;)t(x,b),b=b.sibling;return null}function a(x,b){for(x=new Map;b!==null;)b.key!==null?x.set(b.key,b):x.set(b.index,b),b=b.sibling;return x}function s(x,b){return x=Pr(x,b),x.index=0,x.sibling=null,x}function o(x,b,y){return x.index=y,e?(y=x.alternate,y!==null?(y=y.index,y<b?(x.flags|=2,b):y):(x.flags|=2,b)):(x.flags|=1048576,b)}function i(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,b,y,v){return b===null||b.tag!==6?(b=Wo(y,x.mode,v),b.return=x,b):(b=s(b,y),b.return=x,b)}function d(x,b,y,v){var S=y.type;return S===an?m(x,b,y.props.children,v,y.key):b!==null&&(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===gr&&Jd(S)===b.type)?(v=s(b,y.props),v.ref=Un(x,b,y),v.return=x,v):(v=xs(y.type,y.key,y.props,null,x.mode,v),v.ref=Un(x,b,y),v.return=x,v)}function c(x,b,y,v){return b===null||b.tag!==4||b.stateNode.containerInfo!==y.containerInfo||b.stateNode.implementation!==y.implementation?(b=Vo(y,x.mode,v),b.return=x,b):(b=s(b,y.children||[]),b.return=x,b)}function m(x,b,y,v,S){return b===null||b.tag!==7?(b=Wr(y,x.mode,v,S),b.return=x,b):(b=s(b,y),b.return=x,b)}function h(x,b,y){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Wo(""+b,x.mode,y),b.return=x,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Fa:return y=xs(b.type,b.key,b.props,null,x.mode,y),y.ref=Un(x,null,b),y.return=x,y;case nn:return b=Vo(b,x.mode,y),b.return=x,b;case gr:var v=b._init;return h(x,v(b._payload),y)}if(Yn(b)||Fn(b))return b=Wr(b,x.mode,y,null),b.return=x,b;Ya(x,b)}return null}function u(x,b,y,v){var S=b!==null?b.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return S!==null?null:l(x,b,""+y,v);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Fa:return y.key===S?d(x,b,y,v):null;case nn:return y.key===S?c(x,b,y,v):null;case gr:return S=y._init,u(x,b,S(y._payload),v)}if(Yn(y)||Fn(y))return S!==null?null:m(x,b,y,v,null);Ya(x,y)}return null}function w(x,b,y,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return x=x.get(y)||null,l(b,x,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Fa:return x=x.get(v.key===null?y:v.key)||null,d(b,x,v,S);case nn:return x=x.get(v.key===null?y:v.key)||null,c(b,x,v,S);case gr:var C=v._init;return w(x,b,y,C(v._payload),S)}if(Yn(v)||Fn(v))return x=x.get(y)||null,m(b,x,v,S,null);Ya(b,v)}return null}function p(x,b,y,v){for(var S=null,C=null,P=b,j=b=0,N=null;P!==null&&j<y.length;j++){P.index>j?(N=P,P=null):N=P.sibling;var E=u(x,P,y[j],v);if(E===null){P===null&&(P=N);break}e&&P&&E.alternate===null&&t(x,P),b=o(E,b,j),C===null?S=E:C.sibling=E,C=E,P=N}if(j===y.length)return n(x,P),$e&&Fr(x,j),S;if(P===null){for(;j<y.length;j++)P=h(x,y[j],v),P!==null&&(b=o(P,b,j),C===null?S=P:C.sibling=P,C=P);return $e&&Fr(x,j),S}for(P=a(x,P);j<y.length;j++)N=w(P,x,j,y[j],v),N!==null&&(e&&N.alternate!==null&&P.delete(N.key===null?j:N.key),b=o(N,b,j),C===null?S=N:C.sibling=N,C=N);return e&&P.forEach(function(L){return t(x,L)}),$e&&Fr(x,j),S}function f(x,b,y,v){var S=Fn(y);if(typeof S!="function")throw Error(z(150));if(y=S.call(y),y==null)throw Error(z(151));for(var C=S=null,P=b,j=b=0,N=null,E=y.next();P!==null&&!E.done;j++,E=y.next()){P.index>j?(N=P,P=null):N=P.sibling;var L=u(x,P,E.value,v);if(L===null){P===null&&(P=N);break}e&&P&&L.alternate===null&&t(x,P),b=o(L,b,j),C===null?S=L:C.sibling=L,C=L,P=N}if(E.done)return n(x,P),$e&&Fr(x,j),S;if(P===null){for(;!E.done;j++,E=y.next())E=h(x,E.value,v),E!==null&&(b=o(E,b,j),C===null?S=E:C.sibling=E,C=E);return $e&&Fr(x,j),S}for(P=a(x,P);!E.done;j++,E=y.next())E=w(P,x,j,E.value,v),E!==null&&(e&&E.alternate!==null&&P.delete(E.key===null?j:E.key),b=o(E,b,j),C===null?S=E:C.sibling=E,C=E);return e&&P.forEach(function(D){return t(x,D)}),$e&&Fr(x,j),S}function k(x,b,y,v){if(typeof y=="object"&&y!==null&&y.type===an&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Fa:e:{for(var S=y.key,C=b;C!==null;){if(C.key===S){if(S=y.type,S===an){if(C.tag===7){n(x,C.sibling),b=s(C,y.props.children),b.return=x,x=b;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===gr&&Jd(S)===C.type){n(x,C.sibling),b=s(C,y.props),b.ref=Un(x,C,y),b.return=x,x=b;break e}n(x,C);break}else t(x,C);C=C.sibling}y.type===an?(b=Wr(y.props.children,x.mode,v,y.key),b.return=x,x=b):(v=xs(y.type,y.key,y.props,null,x.mode,v),v.ref=Un(x,b,y),v.return=x,x=v)}return i(x);case nn:e:{for(C=y.key;b!==null;){if(b.key===C)if(b.tag===4&&b.stateNode.containerInfo===y.containerInfo&&b.stateNode.implementation===y.implementation){n(x,b.sibling),b=s(b,y.children||[]),b.return=x,x=b;break e}else{n(x,b);break}else t(x,b);b=b.sibling}b=Vo(y,x.mode,v),b.return=x,x=b}return i(x);case gr:return C=y._init,k(x,b,C(y._payload),v)}if(Yn(y))return p(x,b,y,v);if(Fn(y))return f(x,b,y,v);Ya(x,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,b!==null&&b.tag===6?(n(x,b.sibling),b=s(b,y),b.return=x,x=b):(n(x,b),b=Wo(y,x.mode,v),b.return=x,x=b),i(x)):n(x,b)}return k}var Cn=C0(!0),E0=C0(!1),_s=Tr(null),Ts=null,hn=null,Il=null;function Ll(){Il=hn=Ts=null}function Rl(e){var t=_s.current;Fe(_s),e._currentValue=t}function Ri(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function vn(e,t){Ts=e,Il=hn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ft=!0),e.firstContext=null)}function Mt(e){var t=e._currentValue;if(Il!==e)if(e={context:e,memoizedValue:t,next:null},hn===null){if(Ts===null)throw Error(z(308));hn=e,Ts.dependencies={lanes:0,firstContext:e}}else hn=hn.next=e;return t}var Br=null;function _l(e){Br===null?Br=[e]:Br.push(e)}function P0(e,t,n,a){var s=t.interleaved;return s===null?(n.next=n,_l(t)):(n.next=s.next,s.next=n),t.interleaved=n,ir(e,a)}function ir(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var xr=!1;function Tl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function I0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ar(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Sr(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,je&2){var s=a.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),a.pending=t,ir(e,n)}return s=a.interleaved,s===null?(t.next=t,_l(a)):(t.next=s.next,s.next=t),a.interleaved=t,ir(e,n)}function ds(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,yl(e,n)}}function Xd(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:a.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:a.shared,effects:a.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function As(e,t,n,a){var s=e.updateQueue;xr=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var d=l,c=d.next;d.next=null,i===null?o=c:i.next=c,i=d;var m=e.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==i&&(l===null?m.firstBaseUpdate=c:l.next=c,m.lastBaseUpdate=d))}if(o!==null){var h=s.baseState;i=0,m=c=d=null,l=o;do{var u=l.lane,w=l.eventTime;if((a&u)===u){m!==null&&(m=m.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,f=l;switch(u=t,w=n,f.tag){case 1:if(p=f.payload,typeof p=="function"){h=p.call(w,h,u);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=f.payload,u=typeof p=="function"?p.call(w,h,u):p,u==null)break e;h=Ue({},h,u);break e;case 2:xr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,u=s.effects,u===null?s.effects=[l]:u.push(l))}else w={eventTime:w,lane:u,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(c=m=w,d=h):m=m.next=w,i|=u;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;u=l,l=u.next,u.next=null,s.lastBaseUpdate=u,s.shared.pending=null}}while(!0);if(m===null&&(d=h),s.baseState=d,s.firstBaseUpdate=c,s.lastBaseUpdate=m,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);Kr|=i,e.lanes=i,e.memoizedState=h}}function Zd(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],s=a.callback;if(s!==null){if(a.callback=null,a=n,typeof s!="function")throw Error(z(191,s));s.call(a)}}}var La={},Xt=Tr(La),ya=Tr(La),ba=Tr(La);function zr(e){if(e===La)throw Error(z(174));return e}function Al(e,t){switch(Me(ba,t),Me(ya,e),Me(Xt,La),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ui(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ui(t,e)}Fe(Xt),Me(Xt,t)}function En(){Fe(Xt),Fe(ya),Fe(ba)}function L0(e){zr(ba.current);var t=zr(Xt.current),n=ui(t,e.type);t!==n&&(Me(ya,e),Me(Xt,n))}function Ml(e){ya.current===e&&(Fe(Xt),Fe(ya))}var Be=Tr(0);function Ms(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Oo=[];function Dl(){for(var e=0;e<Oo.length;e++)Oo[e]._workInProgressVersionPrimary=null;Oo.length=0}var cs=dr.ReactCurrentDispatcher,$o=dr.ReactCurrentBatchConfig,Yr=0,ze=null,Ke=null,Je=null,Ds=!1,na=!1,va=0,kx=0;function nt(){throw Error(z(321))}function Fl(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ht(e[n],t[n]))return!1;return!0}function Ol(e,t,n,a,s,o){if(Yr=o,ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,cs.current=e===null||e.memoizedState===null?Cx:Ex,e=n(a,s),na){o=0;do{if(na=!1,va=0,25<=o)throw Error(z(301));o+=1,Je=Ke=null,t.updateQueue=null,cs.current=Px,e=n(a,s)}while(na)}if(cs.current=Fs,t=Ke!==null&&Ke.next!==null,Yr=0,Je=Ke=ze=null,Ds=!1,t)throw Error(z(300));return e}function $l(){var e=va!==0;return va=0,e}function Yt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?ze.memoizedState=Je=e:Je=Je.next=e,Je}function Dt(){if(Ke===null){var e=ze.alternate;e=e!==null?e.memoizedState:null}else e=Ke.next;var t=Je===null?ze.memoizedState:Je.next;if(t!==null)Je=t,Ke=e;else{if(e===null)throw Error(z(310));Ke=e,e={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Je===null?ze.memoizedState=Je=e:Je=Je.next=e}return Je}function ja(e,t){return typeof t=="function"?t(e):t}function Bo(e){var t=Dt(),n=t.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=e;var a=Ke,s=a.baseQueue,o=n.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}a.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,a=a.baseState;var l=i=null,d=null,c=o;do{var m=c.lane;if((Yr&m)===m)d!==null&&(d=d.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),a=c.hasEagerState?c.eagerState:e(a,c.action);else{var h={lane:m,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};d===null?(l=d=h,i=a):d=d.next=h,ze.lanes|=m,Kr|=m}c=c.next}while(c!==null&&c!==o);d===null?i=a:d.next=l,Ht(a,t.memoizedState)||(ft=!0),t.memoizedState=a,t.baseState=i,t.baseQueue=d,n.lastRenderedState=a}if(e=n.interleaved,e!==null){s=e;do o=s.lane,ze.lanes|=o,Kr|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function zo(e){var t=Dt(),n=t.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=e;var a=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do o=e(o,i.action),i=i.next;while(i!==s);Ht(o,t.memoizedState)||(ft=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,a]}function R0(){}function _0(e,t){var n=ze,a=Dt(),s=t(),o=!Ht(a.memoizedState,s);if(o&&(a.memoizedState=s,ft=!0),a=a.queue,Bl(M0.bind(null,n,a,e),[e]),a.getSnapshot!==t||o||Je!==null&&Je.memoizedState.tag&1){if(n.flags|=2048,ka(9,A0.bind(null,n,a,s,t),void 0,null),Xe===null)throw Error(z(349));Yr&30||T0(n,t,s)}return s}function T0(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function A0(e,t,n,a){t.value=n,t.getSnapshot=a,D0(t)&&F0(e)}function M0(e,t,n){return n(function(){D0(t)&&F0(e)})}function D0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ht(e,n)}catch{return!0}}function F0(e){var t=ir(e,1);t!==null&&Ut(t,e,1,-1)}function ec(e){var t=Yt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:e},t.queue=e,e=e.dispatch=Sx.bind(null,ze,e),[t.memoizedState,e]}function ka(e,t,n,a){return e={tag:e,create:t,destroy:n,deps:a,next:null},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e)),e}function O0(){return Dt().memoizedState}function us(e,t,n,a){var s=Yt();ze.flags|=e,s.memoizedState=ka(1|t,n,void 0,a===void 0?null:a)}function to(e,t,n,a){var s=Dt();a=a===void 0?null:a;var o=void 0;if(Ke!==null){var i=Ke.memoizedState;if(o=i.destroy,a!==null&&Fl(a,i.deps)){s.memoizedState=ka(t,n,o,a);return}}ze.flags|=e,s.memoizedState=ka(1|t,n,o,a)}function tc(e,t){return us(8390656,8,e,t)}function Bl(e,t){return to(2048,8,e,t)}function $0(e,t){return to(4,2,e,t)}function B0(e,t){return to(4,4,e,t)}function z0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function U0(e,t,n){return n=n!=null?n.concat([e]):null,to(4,4,z0.bind(null,t,e),n)}function zl(){}function H0(e,t){var n=Dt();t=t===void 0?null:t;var a=n.memoizedState;return a!==null&&t!==null&&Fl(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function W0(e,t){var n=Dt();t=t===void 0?null:t;var a=n.memoizedState;return a!==null&&t!==null&&Fl(t,a[1])?a[0]:(e=e(),n.memoizedState=[e,t],e)}function V0(e,t,n){return Yr&21?(Ht(n,t)||(n=Qu(),ze.lanes|=n,Kr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ft=!0),e.memoizedState=n)}function wx(e,t){var n=Re;Re=n!==0&&4>n?n:4,e(!0);var a=$o.transition;$o.transition={};try{e(!1),t()}finally{Re=n,$o.transition=a}}function q0(){return Dt().memoizedState}function Nx(e,t,n){var a=Er(e);if(n={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null},G0(e))Y0(t,n);else if(n=P0(e,t,n,a),n!==null){var s=ut();Ut(n,e,a,s),K0(n,t,a)}}function Sx(e,t,n){var a=Er(e),s={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null};if(G0(e))Y0(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,l=o(i,n);if(s.hasEagerState=!0,s.eagerState=l,Ht(l,i)){var d=t.interleaved;d===null?(s.next=s,_l(t)):(s.next=d.next,d.next=s),t.interleaved=s;return}}catch{}finally{}n=P0(e,t,s,a),n!==null&&(s=ut(),Ut(n,e,a,s),K0(n,t,a))}}function G0(e){var t=e.alternate;return e===ze||t!==null&&t===ze}function Y0(e,t){na=Ds=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function K0(e,t,n){if(n&4194240){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,yl(e,n)}}var Fs={readContext:Mt,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},Cx={readContext:Mt,useCallback:function(e,t){return Yt().memoizedState=[e,t===void 0?null:t],e},useContext:Mt,useEffect:tc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,us(4194308,4,z0.bind(null,t,e),n)},useLayoutEffect:function(e,t){return us(4194308,4,e,t)},useInsertionEffect:function(e,t){return us(4,2,e,t)},useMemo:function(e,t){var n=Yt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var a=Yt();return t=n!==void 0?n(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Nx.bind(null,ze,e),[a.memoizedState,e]},useRef:function(e){var t=Yt();return e={current:e},t.memoizedState=e},useState:ec,useDebugValue:zl,useDeferredValue:function(e){return Yt().memoizedState=e},useTransition:function(){var e=ec(!1),t=e[0];return e=wx.bind(null,e[1]),Yt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var a=ze,s=Yt();if($e){if(n===void 0)throw Error(z(407));n=n()}else{if(n=t(),Xe===null)throw Error(z(349));Yr&30||T0(a,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,tc(M0.bind(null,a,o,e),[e]),a.flags|=2048,ka(9,A0.bind(null,a,o,n,t),void 0,null),n},useId:function(){var e=Yt(),t=Xe.identifierPrefix;if($e){var n=nr,a=rr;n=(a&~(1<<32-zt(a)-1)).toString(32)+n,t=":"+t+"R"+n,n=va++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=kx++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ex={readContext:Mt,useCallback:H0,useContext:Mt,useEffect:Bl,useImperativeHandle:U0,useInsertionEffect:$0,useLayoutEffect:B0,useMemo:W0,useReducer:Bo,useRef:O0,useState:function(){return Bo(ja)},useDebugValue:zl,useDeferredValue:function(e){var t=Dt();return V0(t,Ke.memoizedState,e)},useTransition:function(){var e=Bo(ja)[0],t=Dt().memoizedState;return[e,t]},useMutableSource:R0,useSyncExternalStore:_0,useId:q0,unstable_isNewReconciler:!1},Px={readContext:Mt,useCallback:H0,useContext:Mt,useEffect:Bl,useImperativeHandle:U0,useInsertionEffect:$0,useLayoutEffect:B0,useMemo:W0,useReducer:zo,useRef:O0,useState:function(){return zo(ja)},useDebugValue:zl,useDeferredValue:function(e){var t=Dt();return Ke===null?t.memoizedState=e:V0(t,Ke.memoizedState,e)},useTransition:function(){var e=zo(ja)[0],t=Dt().memoizedState;return[e,t]},useMutableSource:R0,useSyncExternalStore:_0,useId:q0,unstable_isNewReconciler:!1};function Ot(e,t){if(e&&e.defaultProps){t=Ue({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function _i(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:Ue({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return(e=e._reactInternals)?Zr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var a=ut(),s=Er(e),o=ar(a,s);o.payload=t,n!=null&&(o.callback=n),t=Sr(e,o,s),t!==null&&(Ut(t,e,s,a),ds(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=ut(),s=Er(e),o=ar(a,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Sr(e,o,s),t!==null&&(Ut(t,e,s,a),ds(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ut(),a=Er(e),s=ar(n,a);s.tag=2,t!=null&&(s.callback=t),t=Sr(e,s,a),t!==null&&(Ut(t,e,a,n),ds(t,e,a))}};function rc(e,t,n,a,s,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,o,i):t.prototype&&t.prototype.isPureReactComponent?!ga(n,a)||!ga(s,o):!0}function Q0(e,t,n){var a=!1,s=Rr,o=t.contextType;return typeof o=="object"&&o!==null?o=Mt(o):(s=bt(t)?qr:it.current,a=t.contextTypes,o=(a=a!=null)?Nn(e,s):Rr),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function nc(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function Ti(e,t,n,a){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Tl(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Mt(o):(o=bt(t)?qr:it.current,s.context=Nn(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(_i(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&ro.enqueueReplaceState(s,s.state,null),As(e,n,s,a),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Pn(e,t){try{var n="",a=t;do n+=rg(a),a=a.return;while(a);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function Uo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ai(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Ix=typeof WeakMap=="function"?WeakMap:Map;function J0(e,t,n){n=ar(-1,n),n.tag=3,n.payload={element:null};var a=t.value;return n.callback=function(){$s||($s=!0,Wi=a),Ai(e,t)},n}function X0(e,t,n){n=ar(-1,n),n.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var s=t.value;n.payload=function(){return a(s)},n.callback=function(){Ai(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Ai(e,t),typeof a!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function ac(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new Ix;var s=new Set;a.set(t,s)}else s=a.get(t),s===void 0&&(s=new Set,a.set(t,s));s.has(n)||(s.add(n),e=Hx.bind(null,e,t,n),t.then(e,e))}function sc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function oc(e,t,n,a,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ar(-1,1),t.tag=2,Sr(n,t,1))),n.lanes|=1),e)}var Lx=dr.ReactCurrentOwner,ft=!1;function ct(e,t,n,a){t.child=e===null?E0(t,null,n,a):Cn(t,e.child,n,a)}function ic(e,t,n,a,s){n=n.render;var o=t.ref;return vn(t,s),a=Ol(e,t,n,a,o,s),n=$l(),e!==null&&!ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,lr(e,t,s)):($e&&n&&Cl(t),t.flags|=1,ct(e,t,a,s),t.child)}function lc(e,t,n,a,s){if(e===null){var o=n.type;return typeof o=="function"&&!Kl(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,Z0(e,t,o,a,s)):(e=xs(n.type,null,a,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:ga,n(i,a)&&e.ref===t.ref)return lr(e,t,s)}return t.flags|=1,e=Pr(o,a),e.ref=t.ref,e.return=t,t.child=e}function Z0(e,t,n,a,s){if(e!==null){var o=e.memoizedProps;if(ga(o,a)&&e.ref===t.ref)if(ft=!1,t.pendingProps=a=o,(e.lanes&s)!==0)e.flags&131072&&(ft=!0);else return t.lanes=e.lanes,lr(e,t,s)}return Mi(e,t,n,a,s)}function em(e,t,n){var a=t.pendingProps,s=a.children,o=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(xn,wt),wt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Me(xn,wt),wt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=o!==null?o.baseLanes:n,Me(xn,wt),wt|=a}else o!==null?(a=o.baseLanes|n,t.memoizedState=null):a=n,Me(xn,wt),wt|=a;return ct(e,t,s,n),t.child}function tm(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Mi(e,t,n,a,s){var o=bt(n)?qr:it.current;return o=Nn(t,o),vn(t,s),n=Ol(e,t,n,a,o,s),a=$l(),e!==null&&!ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,lr(e,t,s)):($e&&a&&Cl(t),t.flags|=1,ct(e,t,n,s),t.child)}function dc(e,t,n,a,s){if(bt(n)){var o=!0;Is(t)}else o=!1;if(vn(t,s),t.stateNode===null)ms(e,t),Q0(t,n,a),Ti(t,n,a,s),a=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var d=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=Mt(c):(c=bt(n)?qr:it.current,c=Nn(t,c));var m=n.getDerivedStateFromProps,h=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==a||d!==c)&&nc(t,i,a,c),xr=!1;var u=t.memoizedState;i.state=u,As(t,a,i,s),d=t.memoizedState,l!==a||u!==d||yt.current||xr?(typeof m=="function"&&(_i(t,n,m,a),d=t.memoizedState),(l=xr||rc(t,n,l,a,u,d,c))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=d),i.props=a,i.state=d,i.context=c,a=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{i=t.stateNode,I0(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:Ot(t.type,l),i.props=c,h=t.pendingProps,u=i.context,d=n.contextType,typeof d=="object"&&d!==null?d=Mt(d):(d=bt(n)?qr:it.current,d=Nn(t,d));var w=n.getDerivedStateFromProps;(m=typeof w=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==h||u!==d)&&nc(t,i,a,d),xr=!1,u=t.memoizedState,i.state=u,As(t,a,i,s);var p=t.memoizedState;l!==h||u!==p||yt.current||xr?(typeof w=="function"&&(_i(t,n,w,a),p=t.memoizedState),(c=xr||rc(t,n,c,a,u,p,d)||!1)?(m||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(a,p,d),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(a,p,d)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=p),i.props=a,i.state=p,i.context=d,a=c):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),a=!1)}return Di(e,t,n,a,o,s)}function Di(e,t,n,a,s,o){tm(e,t);var i=(t.flags&128)!==0;if(!a&&!i)return s&&Yd(t,n,!1),lr(e,t,o);a=t.stateNode,Lx.current=t;var l=i&&typeof n.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&i?(t.child=Cn(t,e.child,null,o),t.child=Cn(t,null,l,o)):ct(e,t,l,o),t.memoizedState=a.state,s&&Yd(t,n,!0),t.child}function rm(e){var t=e.stateNode;t.pendingContext?Gd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Gd(e,t.context,!1),Al(e,t.containerInfo)}function cc(e,t,n,a,s){return Sn(),Pl(s),t.flags|=256,ct(e,t,n,a),t.child}var Fi={dehydrated:null,treeContext:null,retryLane:0};function Oi(e){return{baseLanes:e,cachePool:null,transitions:null}}function nm(e,t,n){var a=t.pendingProps,s=Be.current,o=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Me(Be,s&1),e===null)return Li(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=a.children,e=a.fallback,o?(a=t.mode,o=t.child,i={mode:"hidden",children:i},!(a&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=so(i,a,0,null),e=Wr(e,a,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Oi(n),t.memoizedState=Fi,e):Ul(t,i));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Rx(e,t,i,a,l,s,n);if(o){o=a.fallback,i=t.mode,s=e.child,l=s.sibling;var d={mode:"hidden",children:a.children};return!(i&1)&&t.child!==s?(a=t.child,a.childLanes=0,a.pendingProps=d,t.deletions=null):(a=Pr(s,d),a.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=Pr(l,o):(o=Wr(o,i,n,null),o.flags|=2),o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,i=e.child.memoizedState,i=i===null?Oi(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~n,t.memoizedState=Fi,a}return o=e.child,e=o.sibling,a=Pr(o,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=n),a.return=t,a.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Ul(e,t){return t=so({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ka(e,t,n,a){return a!==null&&Pl(a),Cn(t,e.child,null,n),e=Ul(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Rx(e,t,n,a,s,o,i){if(n)return t.flags&256?(t.flags&=-257,a=Uo(Error(z(422))),Ka(e,t,i,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=a.fallback,s=t.mode,a=so({mode:"visible",children:a.children},s,0,null),o=Wr(o,s,i,null),o.flags|=2,a.return=t,o.return=t,a.sibling=o,t.child=a,t.mode&1&&Cn(t,e.child,null,i),t.child.memoizedState=Oi(i),t.memoizedState=Fi,o);if(!(t.mode&1))return Ka(e,t,i,null);if(s.data==="$!"){if(a=s.nextSibling&&s.nextSibling.dataset,a)var l=a.dgst;return a=l,o=Error(z(419)),a=Uo(o,a,void 0),Ka(e,t,i,a)}if(l=(i&e.childLanes)!==0,ft||l){if(a=Xe,a!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(a.suspendedLanes|i)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,ir(e,s),Ut(a,e,s,-1))}return Yl(),a=Uo(Error(z(421))),Ka(e,t,i,a)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Wx.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,Nt=Nr(s.nextSibling),St=t,$e=!0,Bt=null,e!==null&&(Rt[_t++]=rr,Rt[_t++]=nr,Rt[_t++]=Gr,rr=e.id,nr=e.overflow,Gr=t),t=Ul(t,a.children),t.flags|=4096,t)}function uc(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Ri(e.return,t,n)}function Ho(e,t,n,a,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=a,o.tail=n,o.tailMode=s)}function am(e,t,n){var a=t.pendingProps,s=a.revealOrder,o=a.tail;if(ct(e,t,a.children,n),a=Be.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&uc(e,n,t);else if(e.tag===19)uc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Me(Be,a),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Ms(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ho(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ms(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ho(t,!0,n,null,o);break;case"together":Ho(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ms(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function lr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Kr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(z(153));if(t.child!==null){for(e=t.child,n=Pr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Pr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function _x(e,t,n){switch(t.tag){case 3:rm(t),Sn();break;case 5:L0(t);break;case 1:bt(t.type)&&Is(t);break;case 4:Al(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,s=t.memoizedProps.value;Me(_s,a._currentValue),a._currentValue=s;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Me(Be,Be.current&1),t.flags|=128,null):n&t.child.childLanes?nm(e,t,n):(Me(Be,Be.current&1),e=lr(e,t,n),e!==null?e.sibling:null);Me(Be,Be.current&1);break;case 19:if(a=(n&t.childLanes)!==0,e.flags&128){if(a)return am(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Me(Be,Be.current),a)break;return null;case 22:case 23:return t.lanes=0,em(e,t,n)}return lr(e,t,n)}var sm,$i,om,im;sm=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$i=function(){};om=function(e,t,n,a){var s=e.memoizedProps;if(s!==a){e=t.stateNode,zr(Xt.current);var o=null;switch(n){case"input":s=ii(e,s),a=ii(e,a),o=[];break;case"select":s=Ue({},s,{value:void 0}),a=Ue({},a,{value:void 0}),o=[];break;case"textarea":s=ci(e,s),a=ci(e,a),o=[];break;default:typeof s.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Es)}mi(n,a);var i;n=null;for(c in s)if(!a.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ia.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in a){var d=a[c];if(l=s!=null?s[c]:void 0,a.hasOwnProperty(c)&&d!==l&&(d!=null||l!=null))if(c==="style")if(l){for(i in l)!l.hasOwnProperty(i)||d&&d.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in d)d.hasOwnProperty(i)&&l[i]!==d[i]&&(n||(n={}),n[i]=d[i])}else n||(o||(o=[]),o.push(c,n)),n=d;else c==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,l=l?l.__html:void 0,d!=null&&l!==d&&(o=o||[]).push(c,d)):c==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(c,""+d):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ia.hasOwnProperty(c)?(d!=null&&c==="onScroll"&&De("scroll",e),o||l===d||(o=[])):(o=o||[]).push(c,d))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}};im=function(e,t,n,a){n!==a&&(t.flags|=4)};function Hn(e,t){if(!$e)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function at(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,a|=s.subtreeFlags&14680064,a|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,a|=s.subtreeFlags,a|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function Tx(e,t,n){var a=t.pendingProps;switch(El(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(t),null;case 1:return bt(t.type)&&Ps(),at(t),null;case 3:return a=t.stateNode,En(),Fe(yt),Fe(it),Dl(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ga(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Bt!==null&&(Gi(Bt),Bt=null))),$i(e,t),at(t),null;case 5:Ml(t);var s=zr(ba.current);if(n=t.type,e!==null&&t.stateNode!=null)om(e,t,n,a,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(z(166));return at(t),null}if(e=zr(Xt.current),Ga(t)){a=t.stateNode,n=t.type;var o=t.memoizedProps;switch(a[Kt]=t,a[fa]=o,e=(t.mode&1)!==0,n){case"dialog":De("cancel",a),De("close",a);break;case"iframe":case"object":case"embed":De("load",a);break;case"video":case"audio":for(s=0;s<Qn.length;s++)De(Qn[s],a);break;case"source":De("error",a);break;case"img":case"image":case"link":De("error",a),De("load",a);break;case"details":De("toggle",a);break;case"input":vd(a,o),De("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!o.multiple},De("invalid",a);break;case"textarea":kd(a,o),De("invalid",a)}mi(n,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="children"?typeof l=="string"?a.textContent!==l&&(o.suppressHydrationWarning!==!0&&qa(a.textContent,l,e),s=["children",l]):typeof l=="number"&&a.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&qa(a.textContent,l,e),s=["children",""+l]):ia.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&De("scroll",a)}switch(n){case"input":Oa(a),jd(a,o,!0);break;case"textarea":Oa(a),wd(a);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(a.onclick=Es)}a=s,t.updateQueue=a,a!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Mu(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=i.createElement(n,{is:a.is}):(e=i.createElement(n),n==="select"&&(i=e,a.multiple?i.multiple=!0:a.size&&(i.size=a.size))):e=i.createElementNS(e,n),e[Kt]=t,e[fa]=a,sm(e,t,!1,!1),t.stateNode=e;e:{switch(i=hi(n,a),n){case"dialog":De("cancel",e),De("close",e),s=a;break;case"iframe":case"object":case"embed":De("load",e),s=a;break;case"video":case"audio":for(s=0;s<Qn.length;s++)De(Qn[s],e);s=a;break;case"source":De("error",e),s=a;break;case"img":case"image":case"link":De("error",e),De("load",e),s=a;break;case"details":De("toggle",e),s=a;break;case"input":vd(e,a),s=ii(e,a),De("invalid",e);break;case"option":s=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},s=Ue({},a,{value:void 0}),De("invalid",e);break;case"textarea":kd(e,a),s=ci(e,a),De("invalid",e);break;default:s=a}mi(n,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var d=l[o];o==="style"?Ou(e,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Du(e,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&la(e,d):typeof d=="number"&&la(e,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ia.hasOwnProperty(o)?d!=null&&o==="onScroll"&&De("scroll",e):d!=null&&ml(e,o,d,i))}switch(n){case"input":Oa(e),jd(e,a,!1);break;case"textarea":Oa(e),wd(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Lr(a.value));break;case"select":e.multiple=!!a.multiple,o=a.value,o!=null?pn(e,!!a.multiple,o,!1):a.defaultValue!=null&&pn(e,!!a.multiple,a.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Es)}switch(n){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return at(t),null;case 6:if(e&&t.stateNode!=null)im(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(z(166));if(n=zr(ba.current),zr(Xt.current),Ga(t)){if(a=t.stateNode,n=t.memoizedProps,a[Kt]=t,(o=a.nodeValue!==n)&&(e=St,e!==null))switch(e.tag){case 3:qa(a.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&qa(a.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else a=(n.nodeType===9?n:n.ownerDocument).createTextNode(a),a[Kt]=t,t.stateNode=a}return at(t),null;case 13:if(Fe(Be),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($e&&Nt!==null&&t.mode&1&&!(t.flags&128))S0(),Sn(),t.flags|=98560,o=!1;else if(o=Ga(t),a!==null&&a.dehydrated!==null){if(e===null){if(!o)throw Error(z(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(z(317));o[Kt]=t}else Sn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;at(t),o=!1}else Bt!==null&&(Gi(Bt),Bt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Be.current&1?Qe===0&&(Qe=3):Yl())),t.updateQueue!==null&&(t.flags|=4),at(t),null);case 4:return En(),$i(e,t),e===null&&xa(t.stateNode.containerInfo),at(t),null;case 10:return Rl(t.type._context),at(t),null;case 17:return bt(t.type)&&Ps(),at(t),null;case 19:if(Fe(Be),o=t.memoizedState,o===null)return at(t),null;if(a=(t.flags&128)!==0,i=o.rendering,i===null)if(a)Hn(o,!1);else{if(Qe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Ms(e),i!==null){for(t.flags|=128,Hn(o,!1),a=i.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=n,n=t.child;n!==null;)o=n,e=a,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Me(Be,Be.current&1|2),t.child}e=e.sibling}o.tail!==null&&Ve()>In&&(t.flags|=128,a=!0,Hn(o,!1),t.lanes=4194304)}else{if(!a)if(e=Ms(i),e!==null){if(t.flags|=128,a=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Hn(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!$e)return at(t),null}else 2*Ve()-o.renderingStartTime>In&&n!==1073741824&&(t.flags|=128,a=!0,Hn(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(n=o.last,n!==null?n.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ve(),t.sibling=null,n=Be.current,Me(Be,a?n&1|2:n&1),t):(at(t),null);case 22:case 23:return Gl(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?wt&1073741824&&(at(t),t.subtreeFlags&6&&(t.flags|=8192)):at(t),null;case 24:return null;case 25:return null}throw Error(z(156,t.tag))}function Ax(e,t){switch(El(t),t.tag){case 1:return bt(t.type)&&Ps(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return En(),Fe(yt),Fe(it),Dl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ml(t),null;case 13:if(Fe(Be),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(z(340));Sn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Fe(Be),null;case 4:return En(),null;case 10:return Rl(t.type._context),null;case 22:case 23:return Gl(),null;case 24:return null;default:return null}}var Qa=!1,st=!1,Mx=typeof WeakSet=="function"?WeakSet:Set,X=null;function gn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(a){We(e,t,a)}else n.current=null}function Bi(e,t,n){try{n()}catch(a){We(e,t,a)}}var mc=!1;function Dx(e,t){if(wi=Ns,e=m0(),Sl(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var s=a.anchorOffset,o=a.focusNode;a=a.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,l=-1,d=-1,c=0,m=0,h=e,u=null;t:for(;;){for(var w;h!==n||s!==0&&h.nodeType!==3||(l=i+s),h!==o||a!==0&&h.nodeType!==3||(d=i+a),h.nodeType===3&&(i+=h.nodeValue.length),(w=h.firstChild)!==null;)u=h,h=w;for(;;){if(h===e)break t;if(u===n&&++c===s&&(l=i),u===o&&++m===a&&(d=i),(w=h.nextSibling)!==null)break;h=u,u=h.parentNode}h=w}n=l===-1||d===-1?null:{start:l,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ni={focusedElem:e,selectionRange:n},Ns=!1,X=t;X!==null;)if(t=X,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,X=e;else for(;X!==null;){t=X;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var f=p.memoizedProps,k=p.memoizedState,x=t.stateNode,b=x.getSnapshotBeforeUpdate(t.elementType===t.type?f:Ot(t.type,f),k);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(v){We(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,X=e;break}X=t.return}return p=mc,mc=!1,p}function aa(e,t,n){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var s=a=a.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Bi(t,n,o)}s=s.next}while(s!==a)}}function no(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var a=n.create;n.destroy=a()}n=n.next}while(n!==t)}}function zi(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function lm(e){var t=e.alternate;t!==null&&(e.alternate=null,lm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Kt],delete t[fa],delete t[Ei],delete t[yx],delete t[bx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function dm(e){return e.tag===5||e.tag===3||e.tag===4}function hc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||dm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ui(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Es));else if(a!==4&&(e=e.child,e!==null))for(Ui(e,t,n),e=e.sibling;e!==null;)Ui(e,t,n),e=e.sibling}function Hi(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Hi(e,t,n),e=e.sibling;e!==null;)Hi(e,t,n),e=e.sibling}var Ze=null,$t=!1;function mr(e,t,n){for(n=n.child;n!==null;)cm(e,t,n),n=n.sibling}function cm(e,t,n){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(Ks,n)}catch{}switch(n.tag){case 5:st||gn(n,t);case 6:var a=Ze,s=$t;Ze=null,mr(e,t,n),Ze=a,$t=s,Ze!==null&&($t?(e=Ze,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ze.removeChild(n.stateNode));break;case 18:Ze!==null&&($t?(e=Ze,n=n.stateNode,e.nodeType===8?Do(e.parentNode,n):e.nodeType===1&&Do(e,n),ma(e)):Do(Ze,n.stateNode));break;case 4:a=Ze,s=$t,Ze=n.stateNode.containerInfo,$t=!0,mr(e,t,n),Ze=a,$t=s;break;case 0:case 11:case 14:case 15:if(!st&&(a=n.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){s=a=a.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&Bi(n,t,i),s=s.next}while(s!==a)}mr(e,t,n);break;case 1:if(!st&&(gn(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=n.memoizedProps,a.state=n.memoizedState,a.componentWillUnmount()}catch(l){We(n,t,l)}mr(e,t,n);break;case 21:mr(e,t,n);break;case 22:n.mode&1?(st=(a=st)||n.memoizedState!==null,mr(e,t,n),st=a):mr(e,t,n);break;default:mr(e,t,n)}}function gc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Mx),t.forEach(function(a){var s=Vx.bind(null,e,a);n.has(a)||(n.add(a),a.then(s,s))})}}function Ft(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var s=n[a];try{var o=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:Ze=l.stateNode,$t=!1;break e;case 3:Ze=l.stateNode.containerInfo,$t=!0;break e;case 4:Ze=l.stateNode.containerInfo,$t=!0;break e}l=l.return}if(Ze===null)throw Error(z(160));cm(o,i,s),Ze=null,$t=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(c){We(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)um(t,e),t=t.sibling}function um(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ft(t,e),Gt(e),a&4){try{aa(3,e,e.return),no(3,e)}catch(f){We(e,e.return,f)}try{aa(5,e,e.return)}catch(f){We(e,e.return,f)}}break;case 1:Ft(t,e),Gt(e),a&512&&n!==null&&gn(n,n.return);break;case 5:if(Ft(t,e),Gt(e),a&512&&n!==null&&gn(n,n.return),e.flags&32){var s=e.stateNode;try{la(s,"")}catch(f){We(e,e.return,f)}}if(a&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,i=n!==null?n.memoizedProps:o,l=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&Tu(s,o),hi(l,i);var c=hi(l,o);for(i=0;i<d.length;i+=2){var m=d[i],h=d[i+1];m==="style"?Ou(s,h):m==="dangerouslySetInnerHTML"?Du(s,h):m==="children"?la(s,h):ml(s,m,h,c)}switch(l){case"input":li(s,o);break;case"textarea":Au(s,o);break;case"select":var u=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var w=o.value;w!=null?pn(s,!!o.multiple,w,!1):u!==!!o.multiple&&(o.defaultValue!=null?pn(s,!!o.multiple,o.defaultValue,!0):pn(s,!!o.multiple,o.multiple?[]:"",!1))}s[fa]=o}catch(f){We(e,e.return,f)}}break;case 6:if(Ft(t,e),Gt(e),a&4){if(e.stateNode===null)throw Error(z(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(f){We(e,e.return,f)}}break;case 3:if(Ft(t,e),Gt(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{ma(t.containerInfo)}catch(f){We(e,e.return,f)}break;case 4:Ft(t,e),Gt(e);break;case 13:Ft(t,e),Gt(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Vl=Ve())),a&4&&gc(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(st=(c=st)||m,Ft(t,e),st=c):Ft(t,e),Gt(e),a&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!m&&e.mode&1)for(X=e,m=e.child;m!==null;){for(h=X=m;X!==null;){switch(u=X,w=u.child,u.tag){case 0:case 11:case 14:case 15:aa(4,u,u.return);break;case 1:gn(u,u.return);var p=u.stateNode;if(typeof p.componentWillUnmount=="function"){a=u,n=u.return;try{t=a,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(f){We(a,n,f)}}break;case 5:gn(u,u.return);break;case 22:if(u.memoizedState!==null){pc(h);continue}}w!==null?(w.return=u,X=w):pc(h)}m=m.sibling}e:for(m=null,h=e;;){if(h.tag===5){if(m===null){m=h;try{s=h.stateNode,c?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=h.stateNode,d=h.memoizedProps.style,i=d!=null&&d.hasOwnProperty("display")?d.display:null,l.style.display=Fu("display",i))}catch(f){We(e,e.return,f)}}}else if(h.tag===6){if(m===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(f){We(e,e.return,f)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ft(t,e),Gt(e),a&4&&gc(e);break;case 21:break;default:Ft(t,e),Gt(e)}}function Gt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(dm(n)){var a=n;break e}n=n.return}throw Error(z(160))}switch(a.tag){case 5:var s=a.stateNode;a.flags&32&&(la(s,""),a.flags&=-33);var o=hc(e);Hi(e,o,s);break;case 3:case 4:var i=a.stateNode.containerInfo,l=hc(e);Ui(e,l,i);break;default:throw Error(z(161))}}catch(d){We(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Fx(e,t,n){X=e,mm(e)}function mm(e,t,n){for(var a=(e.mode&1)!==0;X!==null;){var s=X,o=s.child;if(s.tag===22&&a){var i=s.memoizedState!==null||Qa;if(!i){var l=s.alternate,d=l!==null&&l.memoizedState!==null||st;l=Qa;var c=st;if(Qa=i,(st=d)&&!c)for(X=s;X!==null;)i=X,d=i.child,i.tag===22&&i.memoizedState!==null?fc(s):d!==null?(d.return=i,X=d):fc(s);for(;o!==null;)X=o,mm(o),o=o.sibling;X=s,Qa=l,st=c}xc(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,X=o):xc(e)}}function xc(e){for(;X!==null;){var t=X;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:st||no(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!st)if(n===null)a.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Ot(t.type,n.memoizedProps);a.componentDidUpdate(s,n.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Zd(t,o,a);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Zd(t,i,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var m=c.memoizedState;if(m!==null){var h=m.dehydrated;h!==null&&ma(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}st||t.flags&512&&zi(t)}catch(u){We(t,t.return,u)}}if(t===e){X=null;break}if(n=t.sibling,n!==null){n.return=t.return,X=n;break}X=t.return}}function pc(e){for(;X!==null;){var t=X;if(t===e){X=null;break}var n=t.sibling;if(n!==null){n.return=t.return,X=n;break}X=t.return}}function fc(e){for(;X!==null;){var t=X;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{no(4,t)}catch(d){We(t,n,d)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var s=t.return;try{a.componentDidMount()}catch(d){We(t,s,d)}}var o=t.return;try{zi(t)}catch(d){We(t,o,d)}break;case 5:var i=t.return;try{zi(t)}catch(d){We(t,i,d)}}}catch(d){We(t,t.return,d)}if(t===e){X=null;break}var l=t.sibling;if(l!==null){l.return=t.return,X=l;break}X=t.return}}var Ox=Math.ceil,Os=dr.ReactCurrentDispatcher,Hl=dr.ReactCurrentOwner,At=dr.ReactCurrentBatchConfig,je=0,Xe=null,Ye=null,tt=0,wt=0,xn=Tr(0),Qe=0,wa=null,Kr=0,ao=0,Wl=0,sa=null,pt=null,Vl=0,In=1/0,er=null,$s=!1,Wi=null,Cr=null,Ja=!1,br=null,Bs=0,oa=0,Vi=null,hs=-1,gs=0;function ut(){return je&6?Ve():hs!==-1?hs:hs=Ve()}function Er(e){return e.mode&1?je&2&&tt!==0?tt&-tt:jx.transition!==null?(gs===0&&(gs=Qu()),gs):(e=Re,e!==0||(e=window.event,e=e===void 0?16:n0(e.type)),e):1}function Ut(e,t,n,a){if(50<oa)throw oa=0,Vi=null,Error(z(185));Ea(e,n,a),(!(je&2)||e!==Xe)&&(e===Xe&&(!(je&2)&&(ao|=n),Qe===4&&fr(e,tt)),vt(e,a),n===1&&je===0&&!(t.mode&1)&&(In=Ve()+500,eo&&Ar()))}function vt(e,t){var n=e.callbackNode;jg(e,t);var a=ws(e,e===Xe?tt:0);if(a===0)n!==null&&Cd(n),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(n!=null&&Cd(n),t===1)e.tag===0?vx(yc.bind(null,e)):k0(yc.bind(null,e)),px(function(){!(je&6)&&Ar()}),n=null;else{switch(Ju(a)){case 1:n=fl;break;case 4:n=Yu;break;case 16:n=ks;break;case 536870912:n=Ku;break;default:n=ks}n=vm(n,hm.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function hm(e,t){if(hs=-1,gs=0,je&6)throw Error(z(327));var n=e.callbackNode;if(jn()&&e.callbackNode!==n)return null;var a=ws(e,e===Xe?tt:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=zs(e,a);else{t=a;var s=je;je|=2;var o=xm();(Xe!==e||tt!==t)&&(er=null,In=Ve()+500,Hr(e,t));do try{zx();break}catch(l){gm(e,l)}while(!0);Ll(),Os.current=o,je=s,Ye!==null?t=0:(Xe=null,tt=0,t=Qe)}if(t!==0){if(t===2&&(s=yi(e),s!==0&&(a=s,t=qi(e,s))),t===1)throw n=wa,Hr(e,0),fr(e,a),vt(e,Ve()),n;if(t===6)fr(e,a);else{if(s=e.current.alternate,!(a&30)&&!$x(s)&&(t=zs(e,a),t===2&&(o=yi(e),o!==0&&(a=o,t=qi(e,o))),t===1))throw n=wa,Hr(e,0),fr(e,a),vt(e,Ve()),n;switch(e.finishedWork=s,e.finishedLanes=a,t){case 0:case 1:throw Error(z(345));case 2:Or(e,pt,er);break;case 3:if(fr(e,a),(a&130023424)===a&&(t=Vl+500-Ve(),10<t)){if(ws(e,0)!==0)break;if(s=e.suspendedLanes,(s&a)!==a){ut(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Ci(Or.bind(null,e,pt,er),t);break}Or(e,pt,er);break;case 4:if(fr(e,a),(a&4194240)===a)break;for(t=e.eventTimes,s=-1;0<a;){var i=31-zt(a);o=1<<i,i=t[i],i>s&&(s=i),a&=~o}if(a=s,a=Ve()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Ox(a/1960))-a,10<a){e.timeoutHandle=Ci(Or.bind(null,e,pt,er),a);break}Or(e,pt,er);break;case 5:Or(e,pt,er);break;default:throw Error(z(329))}}}return vt(e,Ve()),e.callbackNode===n?hm.bind(null,e):null}function qi(e,t){var n=sa;return e.current.memoizedState.isDehydrated&&(Hr(e,t).flags|=256),e=zs(e,t),e!==2&&(t=pt,pt=n,t!==null&&Gi(t)),e}function Gi(e){pt===null?pt=e:pt.push.apply(pt,e)}function $x(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var a=0;a<n.length;a++){var s=n[a],o=s.getSnapshot;s=s.value;try{if(!Ht(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function fr(e,t){for(t&=~Wl,t&=~ao,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-zt(t),a=1<<n;e[n]=-1,t&=~a}}function yc(e){if(je&6)throw Error(z(327));jn();var t=ws(e,0);if(!(t&1))return vt(e,Ve()),null;var n=zs(e,t);if(e.tag!==0&&n===2){var a=yi(e);a!==0&&(t=a,n=qi(e,a))}if(n===1)throw n=wa,Hr(e,0),fr(e,t),vt(e,Ve()),n;if(n===6)throw Error(z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Or(e,pt,er),vt(e,Ve()),null}function ql(e,t){var n=je;je|=1;try{return e(t)}finally{je=n,je===0&&(In=Ve()+500,eo&&Ar())}}function Qr(e){br!==null&&br.tag===0&&!(je&6)&&jn();var t=je;je|=1;var n=At.transition,a=Re;try{if(At.transition=null,Re=1,e)return e()}finally{Re=a,At.transition=n,je=t,!(je&6)&&Ar()}}function Gl(){wt=xn.current,Fe(xn)}function Hr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,xx(n)),Ye!==null)for(n=Ye.return;n!==null;){var a=n;switch(El(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Ps();break;case 3:En(),Fe(yt),Fe(it),Dl();break;case 5:Ml(a);break;case 4:En();break;case 13:Fe(Be);break;case 19:Fe(Be);break;case 10:Rl(a.type._context);break;case 22:case 23:Gl()}n=n.return}if(Xe=e,Ye=e=Pr(e.current,null),tt=wt=t,Qe=0,wa=null,Wl=ao=Kr=0,pt=sa=null,Br!==null){for(t=0;t<Br.length;t++)if(n=Br[t],a=n.interleaved,a!==null){n.interleaved=null;var s=a.next,o=n.pending;if(o!==null){var i=o.next;o.next=s,a.next=i}n.pending=a}Br=null}return e}function gm(e,t){do{var n=Ye;try{if(Ll(),cs.current=Fs,Ds){for(var a=ze.memoizedState;a!==null;){var s=a.queue;s!==null&&(s.pending=null),a=a.next}Ds=!1}if(Yr=0,Je=Ke=ze=null,na=!1,va=0,Hl.current=null,n===null||n.return===null){Qe=1,wa=t,Ye=null;break}e:{var o=e,i=n.return,l=n,d=t;if(t=tt,l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var c=d,m=l,h=m.tag;if(!(m.mode&1)&&(h===0||h===11||h===15)){var u=m.alternate;u?(m.updateQueue=u.updateQueue,m.memoizedState=u.memoizedState,m.lanes=u.lanes):(m.updateQueue=null,m.memoizedState=null)}var w=sc(i);if(w!==null){w.flags&=-257,oc(w,i,l,o,t),w.mode&1&&ac(o,c,t),t=w,d=c;var p=t.updateQueue;if(p===null){var f=new Set;f.add(d),t.updateQueue=f}else p.add(d);break e}else{if(!(t&1)){ac(o,c,t),Yl();break e}d=Error(z(426))}}else if($e&&l.mode&1){var k=sc(i);if(k!==null){!(k.flags&65536)&&(k.flags|=256),oc(k,i,l,o,t),Pl(Pn(d,l));break e}}o=d=Pn(d,l),Qe!==4&&(Qe=2),sa===null?sa=[o]:sa.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var x=J0(o,d,t);Xd(o,x);break e;case 1:l=d;var b=o.type,y=o.stateNode;if(!(o.flags&128)&&(typeof b.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Cr===null||!Cr.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t;var v=X0(o,l,t);Xd(o,v);break e}}o=o.return}while(o!==null)}fm(n)}catch(S){t=S,Ye===n&&n!==null&&(Ye=n=n.return);continue}break}while(!0)}function xm(){var e=Os.current;return Os.current=Fs,e===null?Fs:e}function Yl(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),Xe===null||!(Kr&268435455)&&!(ao&268435455)||fr(Xe,tt)}function zs(e,t){var n=je;je|=2;var a=xm();(Xe!==e||tt!==t)&&(er=null,Hr(e,t));do try{Bx();break}catch(s){gm(e,s)}while(!0);if(Ll(),je=n,Os.current=a,Ye!==null)throw Error(z(261));return Xe=null,tt=0,Qe}function Bx(){for(;Ye!==null;)pm(Ye)}function zx(){for(;Ye!==null&&!mg();)pm(Ye)}function pm(e){var t=bm(e.alternate,e,wt);e.memoizedProps=e.pendingProps,t===null?fm(e):Ye=t,Hl.current=null}function fm(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Ax(n,t),n!==null){n.flags&=32767,Ye=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Qe=6,Ye=null;return}}else if(n=Tx(n,t,wt),n!==null){Ye=n;return}if(t=t.sibling,t!==null){Ye=t;return}Ye=t=e}while(t!==null);Qe===0&&(Qe=5)}function Or(e,t,n){var a=Re,s=At.transition;try{At.transition=null,Re=1,Ux(e,t,n,a)}finally{At.transition=s,Re=a}return null}function Ux(e,t,n,a){do jn();while(br!==null);if(je&6)throw Error(z(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(z(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(kg(e,o),e===Xe&&(Ye=Xe=null,tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ja||(Ja=!0,vm(ks,function(){return jn(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=At.transition,At.transition=null;var i=Re;Re=1;var l=je;je|=4,Hl.current=null,Dx(e,n),um(n,e),lx(Ni),Ns=!!wi,Ni=wi=null,e.current=n,Fx(n),hg(),je=l,Re=i,At.transition=o}else e.current=n;if(Ja&&(Ja=!1,br=e,Bs=s),o=e.pendingLanes,o===0&&(Cr=null),pg(n.stateNode),vt(e,Ve()),t!==null)for(a=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],a(s.value,{componentStack:s.stack,digest:s.digest});if($s)throw $s=!1,e=Wi,Wi=null,e;return Bs&1&&e.tag!==0&&jn(),o=e.pendingLanes,o&1?e===Vi?oa++:(oa=0,Vi=e):oa=0,Ar(),null}function jn(){if(br!==null){var e=Ju(Bs),t=At.transition,n=Re;try{if(At.transition=null,Re=16>e?16:e,br===null)var a=!1;else{if(e=br,br=null,Bs=0,je&6)throw Error(z(331));var s=je;for(je|=4,X=e.current;X!==null;){var o=X,i=o.child;if(X.flags&16){var l=o.deletions;if(l!==null){for(var d=0;d<l.length;d++){var c=l[d];for(X=c;X!==null;){var m=X;switch(m.tag){case 0:case 11:case 15:aa(8,m,o)}var h=m.child;if(h!==null)h.return=m,X=h;else for(;X!==null;){m=X;var u=m.sibling,w=m.return;if(lm(m),m===c){X=null;break}if(u!==null){u.return=w,X=u;break}X=w}}}var p=o.alternate;if(p!==null){var f=p.child;if(f!==null){p.child=null;do{var k=f.sibling;f.sibling=null,f=k}while(f!==null)}}X=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,X=i;else e:for(;X!==null;){if(o=X,o.flags&2048)switch(o.tag){case 0:case 11:case 15:aa(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,X=x;break e}X=o.return}}var b=e.current;for(X=b;X!==null;){i=X;var y=i.child;if(i.subtreeFlags&2064&&y!==null)y.return=i,X=y;else e:for(i=b;X!==null;){if(l=X,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:no(9,l)}}catch(S){We(l,l.return,S)}if(l===i){X=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,X=v;break e}X=l.return}}if(je=s,Ar(),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(Ks,e)}catch{}a=!0}return a}finally{Re=n,At.transition=t}}return!1}function bc(e,t,n){t=Pn(n,t),t=J0(e,t,1),e=Sr(e,t,1),t=ut(),e!==null&&(Ea(e,1,t),vt(e,t))}function We(e,t,n){if(e.tag===3)bc(e,e,n);else for(;t!==null;){if(t.tag===3){bc(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Cr===null||!Cr.has(a))){e=Pn(n,e),e=X0(t,e,1),t=Sr(t,e,1),e=ut(),t!==null&&(Ea(t,1,e),vt(t,e));break}}t=t.return}}function Hx(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),t=ut(),e.pingedLanes|=e.suspendedLanes&n,Xe===e&&(tt&n)===n&&(Qe===4||Qe===3&&(tt&130023424)===tt&&500>Ve()-Vl?Hr(e,0):Wl|=n),vt(e,t)}function ym(e,t){t===0&&(e.mode&1?(t=za,za<<=1,!(za&130023424)&&(za=4194304)):t=1);var n=ut();e=ir(e,t),e!==null&&(Ea(e,t,n),vt(e,n))}function Wx(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ym(e,n)}function Vx(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(z(314))}a!==null&&a.delete(t),ym(e,n)}var bm;bm=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||yt.current)ft=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ft=!1,_x(e,t,n);ft=!!(e.flags&131072)}else ft=!1,$e&&t.flags&1048576&&w0(t,Rs,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;ms(e,t),e=t.pendingProps;var s=Nn(t,it.current);vn(t,n),s=Ol(null,t,a,e,s,n);var o=$l();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,bt(a)?(o=!0,Is(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Tl(t),s.updater=ro,t.stateNode=s,s._reactInternals=t,Ti(t,a,e,n),t=Di(null,t,a,!0,o,n)):(t.tag=0,$e&&o&&Cl(t),ct(null,t,s,n),t=t.child),t;case 16:a=t.elementType;e:{switch(ms(e,t),e=t.pendingProps,s=a._init,a=s(a._payload),t.type=a,s=t.tag=Gx(a),e=Ot(a,e),s){case 0:t=Mi(null,t,a,e,n);break e;case 1:t=dc(null,t,a,e,n);break e;case 11:t=ic(null,t,a,e,n);break e;case 14:t=lc(null,t,a,Ot(a.type,e),n);break e}throw Error(z(306,a,""))}return t;case 0:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:Ot(a,s),Mi(e,t,a,s,n);case 1:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:Ot(a,s),dc(e,t,a,s,n);case 3:e:{if(rm(t),e===null)throw Error(z(387));a=t.pendingProps,o=t.memoizedState,s=o.element,I0(e,t),As(t,a,null,n);var i=t.memoizedState;if(a=i.element,o.isDehydrated)if(o={element:a,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=Pn(Error(z(423)),t),t=cc(e,t,a,n,s);break e}else if(a!==s){s=Pn(Error(z(424)),t),t=cc(e,t,a,n,s);break e}else for(Nt=Nr(t.stateNode.containerInfo.firstChild),St=t,$e=!0,Bt=null,n=E0(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Sn(),a===s){t=lr(e,t,n);break e}ct(e,t,a,n)}t=t.child}return t;case 5:return L0(t),e===null&&Li(t),a=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,i=s.children,Si(a,s)?i=null:o!==null&&Si(a,o)&&(t.flags|=32),tm(e,t),ct(e,t,i,n),t.child;case 6:return e===null&&Li(t),null;case 13:return nm(e,t,n);case 4:return Al(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Cn(t,null,a,n):ct(e,t,a,n),t.child;case 11:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:Ot(a,s),ic(e,t,a,s,n);case 7:return ct(e,t,t.pendingProps,n),t.child;case 8:return ct(e,t,t.pendingProps.children,n),t.child;case 12:return ct(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(a=t.type._context,s=t.pendingProps,o=t.memoizedProps,i=s.value,Me(_s,a._currentValue),a._currentValue=i,o!==null)if(Ht(o.value,i)){if(o.children===s.children&&!yt.current){t=lr(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){i=o.child;for(var d=l.firstContext;d!==null;){if(d.context===a){if(o.tag===1){d=ar(-1,n&-n),d.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var m=c.pending;m===null?d.next=d:(d.next=m.next,m.next=d),c.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),Ri(o.return,n,t),l.lanes|=n;break}d=d.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(z(341));i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Ri(i,n,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}ct(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,a=t.pendingProps.children,vn(t,n),s=Mt(s),a=a(s),t.flags|=1,ct(e,t,a,n),t.child;case 14:return a=t.type,s=Ot(a,t.pendingProps),s=Ot(a.type,s),lc(e,t,a,s,n);case 15:return Z0(e,t,t.type,t.pendingProps,n);case 17:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:Ot(a,s),ms(e,t),t.tag=1,bt(a)?(e=!0,Is(t)):e=!1,vn(t,n),Q0(t,a,s),Ti(t,a,s,n),Di(null,t,a,!0,e,n);case 19:return am(e,t,n);case 22:return em(e,t,n)}throw Error(z(156,t.tag))};function vm(e,t){return Gu(e,t)}function qx(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tt(e,t,n,a){return new qx(e,t,n,a)}function Kl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Gx(e){if(typeof e=="function")return Kl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===gl)return 11;if(e===xl)return 14}return 2}function Pr(e,t){var n=e.alternate;return n===null?(n=Tt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function xs(e,t,n,a,s,o){var i=2;if(a=e,typeof e=="function")Kl(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case an:return Wr(n.children,s,o,t);case hl:i=8,s|=8;break;case ni:return e=Tt(12,n,t,s|2),e.elementType=ni,e.lanes=o,e;case ai:return e=Tt(13,n,t,s),e.elementType=ai,e.lanes=o,e;case si:return e=Tt(19,n,t,s),e.elementType=si,e.lanes=o,e;case Lu:return so(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Pu:i=10;break e;case Iu:i=9;break e;case gl:i=11;break e;case xl:i=14;break e;case gr:i=16,a=null;break e}throw Error(z(130,e==null?e:typeof e,""))}return t=Tt(i,n,t,s),t.elementType=e,t.type=a,t.lanes=o,t}function Wr(e,t,n,a){return e=Tt(7,e,a,t),e.lanes=n,e}function so(e,t,n,a){return e=Tt(22,e,a,t),e.elementType=Lu,e.lanes=n,e.stateNode={isHidden:!1},e}function Wo(e,t,n){return e=Tt(6,e,null,t),e.lanes=n,e}function Vo(e,t,n){return t=Tt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Yx(e,t,n,a,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=So(0),this.expirationTimes=So(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=So(0),this.identifierPrefix=a,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ql(e,t,n,a,s,o,i,l,d){return e=new Yx(e,t,n,l,d),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Tt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:a,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tl(o),e}function Kx(e,t,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:nn,key:a==null?null:""+a,children:e,containerInfo:t,implementation:n}}function jm(e){if(!e)return Rr;e=e._reactInternals;e:{if(Zr(e)!==e||e.tag!==1)throw Error(z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(bt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(z(171))}if(e.tag===1){var n=e.type;if(bt(n))return j0(e,n,t)}return t}function km(e,t,n,a,s,o,i,l,d){return e=Ql(n,a,!0,e,s,o,i,l,d),e.context=jm(null),n=e.current,a=ut(),s=Er(n),o=ar(a,s),o.callback=t??null,Sr(n,o,s),e.current.lanes=s,Ea(e,s,a),vt(e,a),e}function oo(e,t,n,a){var s=t.current,o=ut(),i=Er(s);return n=jm(n),t.context===null?t.context=n:t.pendingContext=n,t=ar(o,i),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Sr(s,t,i),e!==null&&(Ut(e,s,i,o),ds(e,s,i)),i}function Us(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function vc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Jl(e,t){vc(e,t),(e=e.alternate)&&vc(e,t)}function Qx(){return null}var wm=typeof reportError=="function"?reportError:function(e){console.error(e)};function Xl(e){this._internalRoot=e}io.prototype.render=Xl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(z(409));oo(e,t,null,null)};io.prototype.unmount=Xl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Qr(function(){oo(null,e,null,null)}),t[or]=null}};function io(e){this._internalRoot=e}io.prototype.unstable_scheduleHydration=function(e){if(e){var t=e0();e={blockedOn:null,target:e,priority:t};for(var n=0;n<pr.length&&t!==0&&t<pr[n].priority;n++);pr.splice(n,0,e),n===0&&r0(e)}};function Zl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function lo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function jc(){}function Jx(e,t,n,a,s){if(s){if(typeof a=="function"){var o=a;a=function(){var c=Us(i);o.call(c)}}var i=km(t,a,e,0,null,!1,!1,"",jc);return e._reactRootContainer=i,e[or]=i.current,xa(e.nodeType===8?e.parentNode:e),Qr(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof a=="function"){var l=a;a=function(){var c=Us(d);l.call(c)}}var d=Ql(e,0,!1,null,null,!1,!1,"",jc);return e._reactRootContainer=d,e[or]=d.current,xa(e.nodeType===8?e.parentNode:e),Qr(function(){oo(t,d,n,a)}),d}function co(e,t,n,a,s){var o=n._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var l=s;s=function(){var d=Us(i);l.call(d)}}oo(t,i,e,s)}else i=Jx(n,t,e,s,a);return Us(i)}Xu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Kn(t.pendingLanes);n!==0&&(yl(t,n|1),vt(t,Ve()),!(je&6)&&(In=Ve()+500,Ar()))}break;case 13:Qr(function(){var a=ir(e,1);if(a!==null){var s=ut();Ut(a,e,1,s)}}),Jl(e,1)}};bl=function(e){if(e.tag===13){var t=ir(e,134217728);if(t!==null){var n=ut();Ut(t,e,134217728,n)}Jl(e,134217728)}};Zu=function(e){if(e.tag===13){var t=Er(e),n=ir(e,t);if(n!==null){var a=ut();Ut(n,e,t,a)}Jl(e,t)}};e0=function(){return Re};t0=function(e,t){var n=Re;try{return Re=e,t()}finally{Re=n}};xi=function(e,t,n){switch(t){case"input":if(li(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var s=Zs(a);if(!s)throw Error(z(90));_u(a),li(a,s)}}}break;case"textarea":Au(e,n);break;case"select":t=n.value,t!=null&&pn(e,!!n.multiple,t,!1)}};zu=ql;Uu=Qr;var Xx={usingClientEntryPoint:!1,Events:[Ia,dn,Zs,$u,Bu,ql]},Wn={findFiberByHostInstance:$r,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Zx={bundleType:Wn.bundleType,version:Wn.version,rendererPackageName:Wn.rendererPackageName,rendererConfig:Wn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Vu(e),e===null?null:e.stateNode},findFiberByHostInstance:Wn.findFiberByHostInstance||Qx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xa.isDisabled&&Xa.supportsFiber)try{Ks=Xa.inject(Zx),Jt=Xa}catch{}}Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xx;Et.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zl(t))throw Error(z(200));return Kx(e,t,null,n)};Et.createRoot=function(e,t){if(!Zl(e))throw Error(z(299));var n=!1,a="",s=wm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Ql(e,1,!1,null,null,n,!1,a,s),e[or]=t.current,xa(e.nodeType===8?e.parentNode:e),new Xl(t)};Et.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(z(188)):(e=Object.keys(e).join(","),Error(z(268,e)));return e=Vu(t),e=e===null?null:e.stateNode,e};Et.flushSync=function(e){return Qr(e)};Et.hydrate=function(e,t,n){if(!lo(t))throw Error(z(200));return co(null,e,t,!0,n)};Et.hydrateRoot=function(e,t,n){if(!Zl(e))throw Error(z(405));var a=n!=null&&n.hydratedSources||null,s=!1,o="",i=wm;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=km(t,null,e,1,n??null,s,!1,o,i),e[or]=t.current,xa(e),a)for(e=0;e<a.length;e++)n=a[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new io(t)};Et.render=function(e,t,n){if(!lo(t))throw Error(z(200));return co(null,e,t,!1,n)};Et.unmountComponentAtNode=function(e){if(!lo(e))throw Error(z(40));return e._reactRootContainer?(Qr(function(){co(null,null,e,!1,function(){e._reactRootContainer=null,e[or]=null})}),!0):!1};Et.unstable_batchedUpdates=ql;Et.unstable_renderSubtreeIntoContainer=function(e,t,n,a){if(!lo(n))throw Error(z(200));if(e==null||e._reactInternals===void 0)throw Error(z(38));return co(e,t,n,!1,a)};Et.version="18.3.1-next-f1338f8080-20240426";function Nm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Nm)}catch(e){console.error(e)}}Nm(),Nu.exports=Et;var Sm=Nu.exports,kc=Sm;ti.createRoot=kc.createRoot,ti.hydrateRoot=kc.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Na(){return Na=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Na.apply(this,arguments)}var vr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(vr||(vr={}));const wc="popstate";function ep(e){e===void 0&&(e={});function t(a,s){let{pathname:o,search:i,hash:l}=a.location;return Yi("",{pathname:o,search:i,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(a,s){return typeof s=="string"?s:Hs(s)}return rp(t,n,null,e)}function qe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ed(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function tp(){return Math.random().toString(36).substr(2,8)}function Nc(e,t){return{usr:e.state,key:e.key,idx:t}}function Yi(e,t,n,a){return n===void 0&&(n=null),Na({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?An(t):t,{state:n,key:t&&t.key||a||tp()})}function Hs(e){let{pathname:t="/",search:n="",hash:a=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function An(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function rp(e,t,n,a){a===void 0&&(a={});let{window:s=document.defaultView,v5Compat:o=!1}=a,i=s.history,l=vr.Pop,d=null,c=m();c==null&&(c=0,i.replaceState(Na({},i.state,{idx:c}),""));function m(){return(i.state||{idx:null}).idx}function h(){l=vr.Pop;let k=m(),x=k==null?null:k-c;c=k,d&&d({action:l,location:f.location,delta:x})}function u(k,x){l=vr.Push;let b=Yi(f.location,k,x);c=m()+1;let y=Nc(b,c),v=f.createHref(b);try{i.pushState(y,"",v)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(v)}o&&d&&d({action:l,location:f.location,delta:1})}function w(k,x){l=vr.Replace;let b=Yi(f.location,k,x);c=m();let y=Nc(b,c),v=f.createHref(b);i.replaceState(y,"",v),o&&d&&d({action:l,location:f.location,delta:0})}function p(k){let x=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof k=="string"?k:Hs(k);return b=b.replace(/ $/,"%20"),qe(x,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,x)}let f={get action(){return l},get location(){return e(s,i)},listen(k){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(wc,h),d=k,()=>{s.removeEventListener(wc,h),d=null}},createHref(k){return t(s,k)},createURL:p,encodeLocation(k){let x=p(k);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:u,replace:w,go(k){return i.go(k)}};return f}var Sc;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Sc||(Sc={}));function np(e,t,n){return n===void 0&&(n="/"),ap(e,t,n)}function ap(e,t,n,a){let s=typeof t=="string"?An(t):t,o=td(s.pathname||"/",n);if(o==null)return null;let i=Cm(e);sp(i);let l=null;for(let d=0;l==null&&d<i.length;++d){let c=fp(o);l=gp(i[d],c)}return l}function Cm(e,t,n,a){t===void 0&&(t=[]),n===void 0&&(n=[]),a===void 0&&(a="");let s=(o,i,l)=>{let d={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};d.relativePath.startsWith("/")&&(qe(d.relativePath.startsWith(a),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(a.length));let c=Ir([a,d.relativePath]),m=n.concat(d);o.children&&o.children.length>0&&(qe(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Cm(o.children,t,m,c)),!(o.path==null&&!o.index)&&t.push({path:c,score:mp(c,o.index),routesMeta:m})};return e.forEach((o,i)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,i);else for(let d of Em(o.path))s(o,i,d)}),t}function Em(e){let t=e.split("/");if(t.length===0)return[];let[n,...a]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(a.length===0)return s?[o,""]:[o];let i=Em(a.join("/")),l=[];return l.push(...i.map(d=>d===""?o:[o,d].join("/"))),s&&l.push(...i),l.map(d=>e.startsWith("/")&&d===""?"/":d)}function sp(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:hp(t.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}const op=/^:[\w-]+$/,ip=3,lp=2,dp=1,cp=10,up=-2,Cc=e=>e==="*";function mp(e,t){let n=e.split("/"),a=n.length;return n.some(Cc)&&(a+=up),t&&(a+=lp),n.filter(s=>!Cc(s)).reduce((s,o)=>s+(op.test(o)?ip:o===""?dp:cp),a)}function hp(e,t){return e.length===t.length&&e.slice(0,-1).every((a,s)=>a===t[s])?e[e.length-1]-t[t.length-1]:0}function gp(e,t,n){let{routesMeta:a}=e,s={},o="/",i=[];for(let l=0;l<a.length;++l){let d=a[l],c=l===a.length-1,m=o==="/"?t:t.slice(o.length)||"/",h=xp({path:d.relativePath,caseSensitive:d.caseSensitive,end:c},m),u=d.route;if(!h)return null;Object.assign(s,h.params),i.push({params:s,pathname:Ir([o,h.pathname]),pathnameBase:kp(Ir([o,h.pathnameBase])),route:u}),h.pathnameBase!=="/"&&(o=Ir([o,h.pathnameBase]))}return i}function xp(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,a]=pp(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],i=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:a.reduce((c,m,h)=>{let{paramName:u,isOptional:w}=m;if(u==="*"){let f=l[h]||"";i=o.slice(0,o.length-f.length).replace(/(.)\/+$/,"$1")}const p=l[h];return w&&!p?c[u]=void 0:c[u]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:i,pattern:e}}function pp(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),ed(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,d)=>(a.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),a]}function fp(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ed(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function td(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,a=e.charAt(n);return a&&a!=="/"?null:e.slice(n)||"/"}const yp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bp=e=>yp.test(e);function vp(e,t){t===void 0&&(t="/");let{pathname:n,search:a="",hash:s=""}=typeof e=="string"?An(e):e,o;if(n)if(bp(n))o=n;else{if(n.includes("//")){let i=n;n=n.replace(/\/\/+/g,"/"),ed(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+n))}n.startsWith("/")?o=Ec(n.substring(1),"/"):o=Ec(n,t)}else o=t;return{pathname:o,search:wp(a),hash:Np(s)}}function Ec(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function qo(e,t,n,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jp(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function rd(e,t){let n=jp(e);return t?n.map((a,s)=>s===n.length-1?a.pathname:a.pathnameBase):n.map(a=>a.pathnameBase)}function nd(e,t,n,a){a===void 0&&(a=!1);let s;typeof e=="string"?s=An(e):(s=Na({},e),qe(!s.pathname||!s.pathname.includes("?"),qo("?","pathname","search",s)),qe(!s.pathname||!s.pathname.includes("#"),qo("#","pathname","hash",s)),qe(!s.search||!s.search.includes("#"),qo("#","search","hash",s)));let o=e===""||s.pathname==="",i=o?"/":s.pathname,l;if(i==null)l=n;else{let h=t.length-1;if(!a&&i.startsWith("..")){let u=i.split("/");for(;u[0]==="..";)u.shift(),h-=1;s.pathname=u.join("/")}l=h>=0?t[h]:"/"}let d=vp(s,l),c=i&&i!=="/"&&i.endsWith("/"),m=(o||i===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(c||m)&&(d.pathname+="/"),d}const Ir=e=>e.join("/").replace(/\/\/+/g,"/"),kp=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),wp=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Np=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Sp(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Pm=["post","put","patch","delete"];new Set(Pm);const Cp=["get",...Pm];new Set(Cp);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sa(){return Sa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Sa.apply(this,arguments)}const ad=g.createContext(null),Ep=g.createContext(null),Mr=g.createContext(null),uo=g.createContext(null),Zt=g.createContext({outlet:null,matches:[],isDataRoute:!1}),Im=g.createContext(null);function Pp(e,t){let{relative:n}=t===void 0?{}:t;Mn()||qe(!1);let{basename:a,navigator:s}=g.useContext(Mr),{hash:o,pathname:i,search:l}=_m(e,{relative:n}),d=i;return a!=="/"&&(d=i==="/"?a:Ir([a,i])),s.createHref({pathname:d,search:l,hash:o})}function Mn(){return g.useContext(uo)!=null}function cr(){return Mn()||qe(!1),g.useContext(uo).location}function Lm(e){g.useContext(Mr).static||g.useLayoutEffect(e)}function lt(){let{isDataRoute:e}=g.useContext(Zt);return e?Hp():Ip()}function Ip(){Mn()||qe(!1);let e=g.useContext(ad),{basename:t,future:n,navigator:a}=g.useContext(Mr),{matches:s}=g.useContext(Zt),{pathname:o}=cr(),i=JSON.stringify(rd(s,n.v7_relativeSplatPath)),l=g.useRef(!1);return Lm(()=>{l.current=!0}),g.useCallback(function(c,m){if(m===void 0&&(m={}),!l.current)return;if(typeof c=="number"){a.go(c);return}let h=nd(c,JSON.parse(i),o,m.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Ir([t,h.pathname])),(m.replace?a.replace:a.push)(h,m.state,m)},[t,a,i,o,e])}const Lp=g.createContext(null);function Rp(e){let t=g.useContext(Zt).outlet;return t&&g.createElement(Lp.Provider,{value:e},t)}function Rm(){let{matches:e}=g.useContext(Zt),t=e[e.length-1];return t?t.params:{}}function _m(e,t){let{relative:n}=t===void 0?{}:t,{future:a}=g.useContext(Mr),{matches:s}=g.useContext(Zt),{pathname:o}=cr(),i=JSON.stringify(rd(s,a.v7_relativeSplatPath));return g.useMemo(()=>nd(e,JSON.parse(i),o,n==="path"),[e,i,o,n])}function _p(e,t){return Tp(e,t)}function Tp(e,t,n,a){Mn()||qe(!1);let{navigator:s}=g.useContext(Mr),{matches:o}=g.useContext(Zt),i=o[o.length-1],l=i?i.params:{};i&&i.pathname;let d=i?i.pathnameBase:"/";i&&i.route;let c=cr(),m;if(t){var h;let k=typeof t=="string"?An(t):t;d==="/"||(h=k.pathname)!=null&&h.startsWith(d)||qe(!1),m=k}else m=c;let u=m.pathname||"/",w=u;if(d!=="/"){let k=d.replace(/^\//,"").split("/");w="/"+u.replace(/^\//,"").split("/").slice(k.length).join("/")}let p=np(e,{pathname:w}),f=Op(p&&p.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:Ir([d,s.encodeLocation?s.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?d:Ir([d,s.encodeLocation?s.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),o,n,a);return t&&f?g.createElement(uo.Provider,{value:{location:Sa({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:vr.Pop}},f):f}function Ap(){let e=Up(),t=Sp(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:s},n):null,null)}const Mp=g.createElement(Ap,null);class Dp extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?g.createElement(Zt.Provider,{value:this.props.routeContext},g.createElement(Im.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Fp(e){let{routeContext:t,match:n,children:a}=e,s=g.useContext(ad);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(Zt.Provider,{value:t},a)}function Op(e,t,n,a){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),a===void 0&&(a=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=a)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let m=i.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);m>=0||qe(!1),i=i.slice(0,Math.min(i.length,m+1))}let d=!1,c=-1;if(n&&a&&a.v7_partialHydration)for(let m=0;m<i.length;m++){let h=i[m];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=m),h.route.id){let{loaderData:u,errors:w}=n,p=h.route.loader&&u[h.route.id]===void 0&&(!w||w[h.route.id]===void 0);if(h.route.lazy||p){d=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((m,h,u)=>{let w,p=!1,f=null,k=null;n&&(w=l&&h.route.id?l[h.route.id]:void 0,f=h.route.errorElement||Mp,d&&(c<0&&u===0?(Wp("route-fallback"),p=!0,k=null):c===u&&(p=!0,k=h.route.hydrateFallbackElement||null)));let x=t.concat(i.slice(0,u+1)),b=()=>{let y;return w?y=f:p?y=k:h.route.Component?y=g.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=m,g.createElement(Fp,{match:h,routeContext:{outlet:m,matches:x,isDataRoute:n!=null},children:y})};return n&&(h.route.ErrorBoundary||h.route.errorElement||u===0)?g.createElement(Dp,{location:n.location,revalidation:n.revalidation,component:f,error:w,children:b(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):b()},null)}var Tm=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Tm||{}),Am=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Am||{});function $p(e){let t=g.useContext(ad);return t||qe(!1),t}function Bp(e){let t=g.useContext(Ep);return t||qe(!1),t}function zp(e){let t=g.useContext(Zt);return t||qe(!1),t}function Mm(e){let t=zp(),n=t.matches[t.matches.length-1];return n.route.id||qe(!1),n.route.id}function Up(){var e;let t=g.useContext(Im),n=Bp(),a=Mm();return t!==void 0?t:(e=n.errors)==null?void 0:e[a]}function Hp(){let{router:e}=$p(Tm.UseNavigateStable),t=Mm(Am.UseNavigateStable),n=g.useRef(!1);return Lm(()=>{n.current=!0}),g.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Sa({fromRouteId:t},o)))},[e,t])}const Pc={};function Wp(e,t,n){Pc[e]||(Pc[e]=!0)}function Vp(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Ws(e){let{to:t,replace:n,state:a,relative:s}=e;Mn()||qe(!1);let{future:o,static:i}=g.useContext(Mr),{matches:l}=g.useContext(Zt),{pathname:d}=cr(),c=lt(),m=nd(t,rd(l,o.v7_relativeSplatPath),d,s==="path"),h=JSON.stringify(m);return g.useEffect(()=>c(JSON.parse(h),{replace:n,state:a,relative:s}),[c,h,s,n,a]),null}function qp(e){return Rp(e.context)}function Le(e){qe(!1)}function Gp(e){let{basename:t="/",children:n=null,location:a,navigationType:s=vr.Pop,navigator:o,static:i=!1,future:l}=e;Mn()&&qe(!1);let d=t.replace(/^\/*/,"/"),c=g.useMemo(()=>({basename:d,navigator:o,static:i,future:Sa({v7_relativeSplatPath:!1},l)}),[d,l,o,i]);typeof a=="string"&&(a=An(a));let{pathname:m="/",search:h="",hash:u="",state:w=null,key:p="default"}=a,f=g.useMemo(()=>{let k=td(m,d);return k==null?null:{location:{pathname:k,search:h,hash:u,state:w,key:p},navigationType:s}},[d,m,h,u,w,p,s]);return f==null?null:g.createElement(Mr.Provider,{value:c},g.createElement(uo.Provider,{children:n,value:f}))}function Yp(e){let{children:t,location:n}=e;return _p(Ki(t),n)}new Promise(()=>{});function Ki(e,t){t===void 0&&(t=[]);let n=[];return g.Children.forEach(e,(a,s)=>{if(!g.isValidElement(a))return;let o=[...t,s];if(a.type===g.Fragment){n.push.apply(n,Ki(a.props.children,o));return}a.type!==Le&&qe(!1),!a.props.index||!a.props.children||qe(!1);let i={id:a.props.id||o.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(i.children=Ki(a.props.children,o)),n.push(i)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qi(){return Qi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Qi.apply(this,arguments)}function Kp(e,t){if(e==null)return{};var n={},a=Object.keys(e),s,o;for(o=0;o<a.length;o++)s=a[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Qp(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Jp(e,t){return e.button===0&&(!t||t==="_self")&&!Qp(e)}function Ji(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let a=e[n];return t.concat(Array.isArray(a)?a.map(s=>[n,s]):[[n,a]])},[]))}function Xp(e,t){let n=Ji(e);return t&&t.forEach((a,s)=>{n.has(s)||t.getAll(s).forEach(o=>{n.append(s,o)})}),n}const Zp=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ef="6";try{window.__reactRouterVersion=ef}catch{}const tf="startTransition",Ic=Hh[tf];function rf(e){let{basename:t,children:n,future:a,window:s}=e,o=g.useRef();o.current==null&&(o.current=ep({window:s,v5Compat:!0}));let i=o.current,[l,d]=g.useState({action:i.action,location:i.location}),{v7_startTransition:c}=a||{},m=g.useCallback(h=>{c&&Ic?Ic(()=>d(h)):d(h)},[d,c]);return g.useLayoutEffect(()=>i.listen(m),[i,m]),g.useEffect(()=>Vp(a),[a]),g.createElement(Gp,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:i,future:a})}const nf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",af=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fe=g.forwardRef(function(t,n){let{onClick:a,relative:s,reloadDocument:o,replace:i,state:l,target:d,to:c,preventScrollReset:m,viewTransition:h}=t,u=Kp(t,Zp),{basename:w}=g.useContext(Mr),p,f=!1;if(typeof c=="string"&&af.test(c)&&(p=c,nf))try{let y=new URL(window.location.href),v=c.startsWith("//")?new URL(y.protocol+c):new URL(c),S=td(v.pathname,w);v.origin===y.origin&&S!=null?c=S+v.search+v.hash:f=!0}catch{}let k=Pp(c,{relative:s}),x=sf(c,{replace:i,state:l,target:d,preventScrollReset:m,relative:s,viewTransition:h});function b(y){a&&a(y),y.defaultPrevented||x(y)}return g.createElement("a",Qi({},u,{href:p||k,onClick:f||o?a:b,ref:n,target:d}))});var Lc;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Lc||(Lc={}));var Rc;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Rc||(Rc={}));function sf(e,t){let{target:n,replace:a,state:s,preventScrollReset:o,relative:i,viewTransition:l}=t===void 0?{}:t,d=lt(),c=cr(),m=_m(e,{relative:i});return g.useCallback(h=>{if(Jp(h,n)){h.preventDefault();let u=a!==void 0?a:Hs(c)===Hs(m);d(e,{replace:u,state:s,preventScrollReset:o,relative:i,viewTransition:l})}},[c,d,m,a,s,n,e,o,i,l])}function mo(e){let t=g.useRef(Ji(e)),n=g.useRef(!1),a=cr(),s=g.useMemo(()=>Xp(a.search,n.current?null:t.current),[a.search]),o=lt(),i=g.useCallback((l,d)=>{const c=Ji(typeof l=="function"?l(s):l);n.current=!0,o("?"+c,d)},[o,s]);return[s,i]}const Dm=g.createContext();function of({children:e}){const[t,n]=g.useState(null),[a,s]=g.useState(null),[o,i]=g.useState([]),[l,d]=g.useState(!0);g.useEffect(()=>{const w=localStorage.getItem("token"),p=localStorage.getItem("user"),f=localStorage.getItem("pendingInvites");if(console.log("[AuthContext] Loading from localStorage:",{hasUser:!!p,hasToken:!!w}),w&&p){const k=JSON.parse(p);console.log("[AuthContext] Parsed user:",{userId:k.userId,householdId:k.householdId,householdName:k.householdName}),s(w),n(k),f&&i(JSON.parse(f))}else console.log("[AuthContext] No saved token or user, setting loading to false");d(!1)},[]);const c=(w,p,f=[])=>{console.log("[AuthContext] Login called with:",{userData:w,hasToken:!!p}),n(w),s(p),i(f||[]),localStorage.setItem("token",p),localStorage.setItem("user",JSON.stringify(w)),localStorage.setItem("pendingInvites",JSON.stringify(f||[])),console.log("[AuthContext] Login complete, isAuthenticated:",!!p)},m=(w,p)=>{if(t){const f={...t,householdId:w,householdName:p};console.log("[Auth] BEFORE switchHousehold - user:",{currentHouseholdId:t.householdId,currentHouseholdName:t.householdName}),n(f),localStorage.setItem("user",JSON.stringify(f));const k=localStorage.getItem("user");console.log("[Auth] AFTER switchHousehold - localStorage:",{householdId:w,householdName:p,storedUser:JSON.parse(k)})}},h=()=>{n(null),s(null),i([]),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("pendingInvites")},u=w=>{const p={...t,...w};n(p),localStorage.setItem("user",JSON.stringify(p))};return r.jsx(Dm.Provider,{value:{user:t,token:a,pendingInvites:o,loading:l,login:c,logout:h,switchHousehold:m,updateUser:u,isAuthenticated:!!a},children:e})}function _e(){const e=g.useContext(Dm);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}const Fm=g.createContext();function lf(){try{return JSON.parse(localStorage.getItem("hh_notifications")||"[]")}catch{return[]}}function df({children:e}){const{user:t,pendingInvites:n}=_e(),[a,s]=g.useState(lf),[o,i]=g.useState(!0),l=p=>(localStorage.setItem("hh_notifications",JSON.stringify(p)),p);g.useEffect(()=>{t||(s([]),localStorage.removeItem("hh_notifications"))},[t]),g.useEffect(()=>{s(p=>{const f=new Set((n||[]).map(v=>v.inviteToken)),k=p.filter(v=>{var S;return v.type!=="invite"||f.has((S=v.data)==null?void 0:S.inviteToken)}),x=new Set(k.filter(v=>v.type==="invite").map(v=>{var S;return(S=v.data)==null?void 0:S.inviteToken})),b=(n||[]).filter(v=>!x.has(v.inviteToken)).map(v=>({id:`invite-${v.inviteToken}`,type:"invite",title:"Household Invitation",body:`${v.invitedByName||"Someone"} invited you to join ${v.householdName}`,data:v,read:!1,createdAt:new Date().toISOString()})),y=b.length?[...b,...k]:k;return l(y)}),n!=null&&n.length&&i(!0)},[n]);const d=g.useCallback(p=>{s(f=>l(f.map(k=>k.id===p?{...k,read:!0}:k)))},[]),c=g.useCallback(()=>{s(p=>l(p.map(f=>({...f,read:!0}))))},[]),m=g.useCallback(p=>{s(f=>l(f.filter(k=>k.id!==p)))},[]),h=g.useCallback(()=>{s([]),localStorage.removeItem("hh_notifications")},[]),u=g.useCallback(({type:p="info",title:f,body:k,data:x=null})=>{const b={id:`${p}-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,type:p,title:f,body:k,data:x,read:!1,createdAt:new Date().toISOString()};s(y=>l([b,...y]))},[]),w=a.filter(p=>!p.read).length;return r.jsx(Fm.Provider,{value:{notifications:a,unreadCount:w,inviteModalOpen:o,setInviteModalOpen:i,addNotification:u,markRead:d,markAllRead:c,removeNotification:m,clearAll:h},children:e})}const Om=g.createContext();function Xi(e){const t=n=>{const a=document.querySelector(".goog-te-combo");a?(a.value=e,a.dispatchEvent(new Event("change",{bubbles:!0}))):n>0&&setTimeout(()=>t(n-1),250)};t(20)}function cf({children:e}){const[t,n]=g.useState("en"),a=g.useRef(!0);g.useEffect(()=>{if(a.current){a.current=!1;return}Xi(t==="es"?"es":"")},[t]);const s=()=>{n(i=>i==="en"?"es":"en")},o=(i,l)=>t==="es"?l:i;return r.jsx(Om.Provider,{value:{language:t,setLanguage:n,toggleLanguage:s,t:o},children:e})}function ue(){const e=g.useContext(Om);if(!e)throw new Error("useLanguage must be used within LanguageProvider");return e}const $m=g.createContext();function uf({children:e}){const[t,n]=g.useState(()=>{const s=localStorage.getItem("household-theme");return s||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});g.useEffect(()=>{t==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("household-theme",t)},[t]);const a=()=>{n(s=>s==="light"?"dark":"light")};return r.jsx($m.Provider,{value:{theme:t,setTheme:n,toggleTheme:a},children:e})}function Bm(){const e=g.useContext($m);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e}class mf extends dl.Component{constructor(n){super(n);hd(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null,errorCount:0,errorId:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,a){const s=`ERR_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;this.setState(o=>({error:n,errorInfo:a,errorCount:o.errorCount+1,errorId:s})),console.error("[ErrorBoundary] Error caught:",n),console.error("[ErrorBoundary] Error info:",a),console.error("[ErrorBoundary] Error ID:",s),window.Sentry&&window.Sentry.captureException(n,{contexts:{react:a},tags:{errorId:s}})}render(){return this.state.hasError?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:r.jsxs("div",{className:"max-w-lg w-full bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-8 border border-red-200 dark:border-red-900",children:[r.jsx("div",{className:"text-6xl mb-4 text-center",children:""}),r.jsx("h1",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-4",children:"Something Went Wrong"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-center mb-6",children:"We encountered an unexpected error. Our team has been notified and we're working to fix it."}),this.state.errorId&&r.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[r.jsx("span",{className:"font-semibold",children:"Error ID:"})," ",r.jsx("code",{className:"font-mono",children:this.state.errorId})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Please reference this ID if contacting support."})]}),!1,this.state.errorCount>3&&r.jsx("div",{className:"mb-6 p-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg",children:r.jsxs("p",{className:"text-sm text-orange-700 dark:text-orange-300",children:["Multiple errors detected (",this.state.errorCount,"). If this continues, try refreshing the page."]})}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:this.handleReset,className:"flex-1 px-6 py-3 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700 transition-colors",children:"Try Again"}),r.jsx("button",{onClick:()=>window.location.href="/",className:"flex-1 px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Go Home"})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-6",children:"If the problem persists, please contact support or refresh the page."})]})}):this.props.children}}function Qt(e){const t=new Uint8Array(e);let n="";for(const s of t)n+=String.fromCharCode(s);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Vs(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=(4-t.length%4)%4,a=t.padEnd(t.length+n,"="),s=atob(a),o=new ArrayBuffer(s.length),i=new Uint8Array(o);for(let l=0;l<s.length;l++)i[l]=s.charCodeAt(l);return o}function sd(){return hf.stubThis((globalThis==null?void 0:globalThis.PublicKeyCredential)!==void 0&&typeof globalThis.PublicKeyCredential=="function")}const hf={stubThis:e=>e};function zm(e){const{id:t}=e;return{...e,id:Vs(t),transports:e.transports}}function Um(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}class et extends Error{constructor({message:t,code:n,cause:a,name:s}){super(t,{cause:a}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=s??a.name,this.code=n}}function gf({error:e,options:t}){var a,s,o;const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new et({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((a=n.authenticatorSelection)==null?void 0:a.requireResidentKey)===!0)return new et({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((s=n.authenticatorSelection)==null?void 0:s.userVerification)==="required")return new et({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((o=n.authenticatorSelection)==null?void 0:o.userVerification)==="required")return new et({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new et({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new et({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return n.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new et({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new et({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const i=globalThis.location.hostname;if(Um(i)){if(n.rp.id!==i)return new et({message:`The RP ID "${n.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new et({message:`${globalThis.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(n.user.id.byteLength<1||n.user.id.byteLength>64)return new et({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new et({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return e}class xf{constructor(){Object.defineProperty(this,"controller",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Hm=new xf,pf=["cross-platform","platform"];function Wm(e){if(e&&!(pf.indexOf(e)<0))return e}async function Vm(e){var p;!e.optionsJSON&&e.challenge&&(console.warn("startRegistration() was not called correctly. It will try to continue with the provided options, but this call should be refactored to use the expected call structure instead. See https://simplewebauthn.dev/docs/packages/browser#typeerror-cannot-read-properties-of-undefined-reading-challenge for more information."),e={optionsJSON:e});const{optionsJSON:t,useAutoRegister:n=!1}=e;if(!sd())throw new Error("WebAuthn is not supported in this browser");const a={...t,challenge:Vs(t.challenge),user:{...t.user,id:Vs(t.user.id)},excludeCredentials:(p=t.excludeCredentials)==null?void 0:p.map(zm)},s={};n&&(s.mediation="conditional"),s.publicKey=a,s.signal=Hm.createNewAbortSignal();let o;try{o=await navigator.credentials.create(s)}catch(f){throw gf({error:f,options:s})}if(!o)throw new Error("Registration was not completed");const{id:i,rawId:l,response:d,type:c}=o;let m;typeof d.getTransports=="function"&&(m=d.getTransports());let h;if(typeof d.getPublicKeyAlgorithm=="function")try{h=d.getPublicKeyAlgorithm()}catch(f){Go("getPublicKeyAlgorithm()",f)}let u;if(typeof d.getPublicKey=="function")try{const f=d.getPublicKey();f!==null&&(u=Qt(f))}catch(f){Go("getPublicKey()",f)}let w;if(typeof d.getAuthenticatorData=="function")try{w=Qt(d.getAuthenticatorData())}catch(f){Go("getAuthenticatorData()",f)}return{id:i,rawId:Qt(l),response:{attestationObject:Qt(d.attestationObject),clientDataJSON:Qt(d.clientDataJSON),transports:m,publicKeyAlgorithm:h,publicKey:u,authenticatorData:w},type:c,clientExtensionResults:o.getClientExtensionResults(),authenticatorAttachment:Wm(o.authenticatorAttachment)}}function Go(e,t){console.warn(`The browser extension that intercepted this WebAuthn API call incorrectly implemented ${e}. You should report this error to them.
`,t)}function ff(){if(!sd())return Yo.stubThis(new Promise(t=>t(!1)));const e=globalThis.PublicKeyCredential;return(e==null?void 0:e.isConditionalMediationAvailable)===void 0?Yo.stubThis(new Promise(t=>t(!1))):Yo.stubThis(e.isConditionalMediationAvailable())}const Yo={stubThis:e=>e};function yf({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new et({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new et({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const a=globalThis.location.hostname;if(Um(a)){if(n.rpId!==a)return new et({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new et({message:`${globalThis.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new et({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return e}async function bf(e){var w,p;!e.optionsJSON&&e.challenge&&(console.warn("startAuthentication() was not called correctly. It will try to continue with the provided options, but this call should be refactored to use the expected call structure instead. See https://simplewebauthn.dev/docs/packages/browser#typeerror-cannot-read-properties-of-undefined-reading-challenge for more information."),e={optionsJSON:e});const{optionsJSON:t,useBrowserAutofill:n=!1,verifyBrowserAutofillInput:a=!0}=e;if(!sd())throw new Error("WebAuthn is not supported in this browser");let s;((w=t.allowCredentials)==null?void 0:w.length)!==0&&(s=(p=t.allowCredentials)==null?void 0:p.map(zm));const o={...t,challenge:Vs(t.challenge),allowCredentials:s},i={};if(n){if(!await ff())throw Error("Browser does not support WebAuthn autofill");if(document.querySelectorAll("input[autocomplete$='webauthn']").length<1&&a)throw Error('No <input> with "webauthn" as the only or last value in its `autocomplete` attribute was detected');i.mediation="conditional",o.allowCredentials=[]}i.publicKey=o,i.signal=Hm.createNewAbortSignal();let l;try{l=await navigator.credentials.get(i)}catch(f){throw yf({error:f,options:i})}if(!l)throw new Error("Authentication was not completed");const{id:d,rawId:c,response:m,type:h}=l;let u;return m.userHandle&&(u=Qt(m.userHandle)),{id:d,rawId:Qt(c),response:{authenticatorData:Qt(m.authenticatorData),clientDataJSON:Qt(m.clientDataJSON),signature:Qt(m.signature),userHandle:u},type:h,clientExtensionResults:l.getClientExtensionResults(),authenticatorAttachment:Wm(l.authenticatorAttachment)}}function qm(e,t){return function(){return e.apply(t,arguments)}}const{toString:vf}=Object.prototype,{getPrototypeOf:od}=Object,{iterator:ho,toStringTag:Gm}=Symbol,go=(e=>t=>{const n=vf.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Wt=e=>(e=e.toLowerCase(),t=>go(t)===e),xo=e=>t=>typeof t===e,{isArray:Dn}=Array,Ln=xo("undefined");function Ra(e){return e!==null&&!Ln(e)&&e.constructor!==null&&!Ln(e.constructor)&&jt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Ym=Wt("ArrayBuffer");function jf(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Ym(e.buffer),t}const kf=xo("string"),jt=xo("function"),Km=xo("number"),_a=e=>e!==null&&typeof e=="object",wf=e=>e===!0||e===!1,ps=e=>{if(go(e)!=="object")return!1;const t=od(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Gm in e)&&!(ho in e)},Nf=e=>{if(!_a(e)||Ra(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Sf=Wt("Date"),Cf=Wt("File"),Ef=Wt("Blob"),Pf=Wt("FileList"),If=e=>_a(e)&&jt(e.pipe),Lf=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||jt(e.append)&&((t=go(e))==="formdata"||t==="object"&&jt(e.toString)&&e.toString()==="[object FormData]"))},Rf=Wt("URLSearchParams"),[_f,Tf,Af,Mf]=["ReadableStream","Request","Response","Headers"].map(Wt),Df=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ta(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let a,s;if(typeof e!="object"&&(e=[e]),Dn(e))for(a=0,s=e.length;a<s;a++)t.call(null,e[a],a,e);else{if(Ra(e))return;const o=n?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let l;for(a=0;a<i;a++)l=o[a],t.call(null,e[l],l,e)}}function Qm(e,t){if(Ra(e))return null;t=t.toLowerCase();const n=Object.keys(e);let a=n.length,s;for(;a-- >0;)if(s=n[a],t===s.toLowerCase())return s;return null}const Ur=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Jm=e=>!Ln(e)&&e!==Ur;function Zi(){const{caseless:e,skipUndefined:t}=Jm(this)&&this||{},n={},a=(s,o)=>{if(o==="__proto__"||o==="constructor"||o==="prototype")return;const i=e&&Qm(n,o)||o;ps(n[i])&&ps(s)?n[i]=Zi(n[i],s):ps(s)?n[i]=Zi({},s):Dn(s)?n[i]=s.slice():(!t||!Ln(s))&&(n[i]=s)};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&Ta(arguments[s],a);return n}const Ff=(e,t,n,{allOwnKeys:a}={})=>(Ta(t,(s,o)=>{n&&jt(s)?Object.defineProperty(e,o,{value:qm(s,n),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,o,{value:s,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:a}),e),Of=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),$f=(e,t,n,a)=>{e.prototype=Object.create(t.prototype,a),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Bf=(e,t,n,a)=>{let s,o,i;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),o=s.length;o-- >0;)i=s[o],(!a||a(i,e,t))&&!l[i]&&(t[i]=e[i],l[i]=!0);e=n!==!1&&od(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},zf=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const a=e.indexOf(t,n);return a!==-1&&a===n},Uf=e=>{if(!e)return null;if(Dn(e))return e;let t=e.length;if(!Km(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Hf=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&od(Uint8Array)),Wf=(e,t)=>{const a=(e&&e[ho]).call(e);let s;for(;(s=a.next())&&!s.done;){const o=s.value;t.call(e,o[0],o[1])}},Vf=(e,t)=>{let n;const a=[];for(;(n=e.exec(t))!==null;)a.push(n);return a},qf=Wt("HTMLFormElement"),Gf=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,a,s){return a.toUpperCase()+s}),_c=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Yf=Wt("RegExp"),Xm=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),a={};Ta(n,(s,o)=>{let i;(i=t(s,o,e))!==!1&&(a[o]=i||s)}),Object.defineProperties(e,a)},Kf=e=>{Xm(e,(t,n)=>{if(jt(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const a=e[n];if(jt(a)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Qf=(e,t)=>{const n={},a=s=>{s.forEach(o=>{n[o]=!0})};return Dn(e)?a(e):a(String(e).split(t)),n},Jf=()=>{},Xf=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Zf(e){return!!(e&&jt(e.append)&&e[Gm]==="FormData"&&e[ho])}const ey=e=>{const t=new Array(10),n=(a,s)=>{if(_a(a)){if(t.indexOf(a)>=0)return;if(Ra(a))return a;if(!("toJSON"in a)){t[s]=a;const o=Dn(a)?[]:{};return Ta(a,(i,l)=>{const d=n(i,s+1);!Ln(d)&&(o[l]=d)}),t[s]=void 0,o}}return a};return n(e,0)},ty=Wt("AsyncFunction"),ry=e=>e&&(_a(e)||jt(e))&&jt(e.then)&&jt(e.catch),Zm=((e,t)=>e?setImmediate:t?((n,a)=>(Ur.addEventListener("message",({source:s,data:o})=>{s===Ur&&o===n&&a.length&&a.shift()()},!1),s=>{a.push(s),Ur.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",jt(Ur.postMessage)),ny=typeof queueMicrotask<"u"?queueMicrotask.bind(Ur):typeof process<"u"&&process.nextTick||Zm,ay=e=>e!=null&&jt(e[ho]),A={isArray:Dn,isArrayBuffer:Ym,isBuffer:Ra,isFormData:Lf,isArrayBufferView:jf,isString:kf,isNumber:Km,isBoolean:wf,isObject:_a,isPlainObject:ps,isEmptyObject:Nf,isReadableStream:_f,isRequest:Tf,isResponse:Af,isHeaders:Mf,isUndefined:Ln,isDate:Sf,isFile:Cf,isBlob:Ef,isRegExp:Yf,isFunction:jt,isStream:If,isURLSearchParams:Rf,isTypedArray:Hf,isFileList:Pf,forEach:Ta,merge:Zi,extend:Ff,trim:Df,stripBOM:Of,inherits:$f,toFlatObject:Bf,kindOf:go,kindOfTest:Wt,endsWith:zf,toArray:Uf,forEachEntry:Wf,matchAll:Vf,isHTMLForm:qf,hasOwnProperty:_c,hasOwnProp:_c,reduceDescriptors:Xm,freezeMethods:Kf,toObjectSet:Qf,toCamelCase:Gf,noop:Jf,toFiniteNumber:Xf,findKey:Qm,global:Ur,isContextDefined:Jm,isSpecCompliantForm:Zf,toJSONObject:ey,isAsyncFn:ty,isThenable:ry,setImmediate:Zm,asap:ny,isIterable:ay};let ie=class eh extends Error{static from(t,n,a,s,o,i){const l=new eh(t.message,n||t.code,a,s,o);return l.cause=t,l.name=t.name,i&&Object.assign(l,i),l}constructor(t,n,a,s,o){super(t),this.name="AxiosError",this.isAxiosError=!0,n&&(this.code=n),a&&(this.config=a),s&&(this.request=s),o&&(this.response=o,this.status=o.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:A.toJSONObject(this.config),code:this.code,status:this.status}}};ie.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";ie.ERR_BAD_OPTION="ERR_BAD_OPTION";ie.ECONNABORTED="ECONNABORTED";ie.ETIMEDOUT="ETIMEDOUT";ie.ERR_NETWORK="ERR_NETWORK";ie.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";ie.ERR_DEPRECATED="ERR_DEPRECATED";ie.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";ie.ERR_BAD_REQUEST="ERR_BAD_REQUEST";ie.ERR_CANCELED="ERR_CANCELED";ie.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";ie.ERR_INVALID_URL="ERR_INVALID_URL";const sy=null;function el(e){return A.isPlainObject(e)||A.isArray(e)}function th(e){return A.endsWith(e,"[]")?e.slice(0,-2):e}function Tc(e,t,n){return e?e.concat(t).map(function(s,o){return s=th(s),!n&&o?"["+s+"]":s}).join(n?".":""):t}function oy(e){return A.isArray(e)&&!e.some(el)}const iy=A.toFlatObject(A,{},null,function(t){return/^is[A-Z]/.test(t)});function po(e,t,n){if(!A.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=A.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(f,k){return!A.isUndefined(k[f])});const a=n.metaTokens,s=n.visitor||m,o=n.dots,i=n.indexes,d=(n.Blob||typeof Blob<"u"&&Blob)&&A.isSpecCompliantForm(t);if(!A.isFunction(s))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(A.isDate(p))return p.toISOString();if(A.isBoolean(p))return p.toString();if(!d&&A.isBlob(p))throw new ie("Blob is not supported. Use a Buffer instead.");return A.isArrayBuffer(p)||A.isTypedArray(p)?d&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function m(p,f,k){let x=p;if(p&&!k&&typeof p=="object"){if(A.endsWith(f,"{}"))f=a?f:f.slice(0,-2),p=JSON.stringify(p);else if(A.isArray(p)&&oy(p)||(A.isFileList(p)||A.endsWith(f,"[]"))&&(x=A.toArray(p)))return f=th(f),x.forEach(function(y,v){!(A.isUndefined(y)||y===null)&&t.append(i===!0?Tc([f],v,o):i===null?f:f+"[]",c(y))}),!1}return el(p)?!0:(t.append(Tc(k,f,o),c(p)),!1)}const h=[],u=Object.assign(iy,{defaultVisitor:m,convertValue:c,isVisitable:el});function w(p,f){if(!A.isUndefined(p)){if(h.indexOf(p)!==-1)throw Error("Circular reference detected in "+f.join("."));h.push(p),A.forEach(p,function(x,b){(!(A.isUndefined(x)||x===null)&&s.call(t,x,A.isString(b)?b.trim():b,f,u))===!0&&w(x,f?f.concat(b):[b])}),h.pop()}}if(!A.isObject(e))throw new TypeError("data must be an object");return w(e),t}function Ac(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return t[a]})}function id(e,t){this._pairs=[],e&&po(e,this,t)}const rh=id.prototype;rh.append=function(t,n){this._pairs.push([t,n])};rh.toString=function(t){const n=t?function(a){return t.call(this,a,Ac)}:Ac;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function ly(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function nh(e,t,n){if(!t)return e;const a=n&&n.encode||ly,s=A.isFunction(n)?{serialize:n}:n,o=s&&s.serialize;let i;if(o?i=o(t,s):i=A.isURLSearchParams(t)?t.toString():new id(t,s).toString(a),i){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Mc{constructor(){this.handlers=[]}use(t,n,a){return this.handlers.push({fulfilled:t,rejected:n,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){A.forEach(this.handlers,function(a){a!==null&&t(a)})}}const ld={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},dy=typeof URLSearchParams<"u"?URLSearchParams:id,cy=typeof FormData<"u"?FormData:null,uy=typeof Blob<"u"?Blob:null,my={isBrowser:!0,classes:{URLSearchParams:dy,FormData:cy,Blob:uy},protocols:["http","https","file","blob","url","data"]},dd=typeof window<"u"&&typeof document<"u",tl=typeof navigator=="object"&&navigator||void 0,hy=dd&&(!tl||["ReactNative","NativeScript","NS"].indexOf(tl.product)<0),gy=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",xy=dd&&window.location.href||"http://localhost",py=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:dd,hasStandardBrowserEnv:hy,hasStandardBrowserWebWorkerEnv:gy,navigator:tl,origin:xy},Symbol.toStringTag,{value:"Module"})),ot={...py,...my};function fy(e,t){return po(e,new ot.classes.URLSearchParams,{visitor:function(n,a,s,o){return ot.isNode&&A.isBuffer(n)?(this.append(a,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function yy(e){return A.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function by(e){const t={},n=Object.keys(e);let a;const s=n.length;let o;for(a=0;a<s;a++)o=n[a],t[o]=e[o];return t}function ah(e){function t(n,a,s,o){let i=n[o++];if(i==="__proto__")return!0;const l=Number.isFinite(+i),d=o>=n.length;return i=!i&&A.isArray(s)?s.length:i,d?(A.hasOwnProp(s,i)?s[i]=[s[i],a]:s[i]=a,!l):((!s[i]||!A.isObject(s[i]))&&(s[i]=[]),t(n,a,s[i],o)&&A.isArray(s[i])&&(s[i]=by(s[i])),!l)}if(A.isFormData(e)&&A.isFunction(e.entries)){const n={};return A.forEachEntry(e,(a,s)=>{t(yy(a),s,n,0)}),n}return null}function vy(e,t,n){if(A.isString(e))try{return(t||JSON.parse)(e),A.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(n||JSON.stringify)(e)}const Aa={transitional:ld,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const a=n.getContentType()||"",s=a.indexOf("application/json")>-1,o=A.isObject(t);if(o&&A.isHTMLForm(t)&&(t=new FormData(t)),A.isFormData(t))return s?JSON.stringify(ah(t)):t;if(A.isArrayBuffer(t)||A.isBuffer(t)||A.isStream(t)||A.isFile(t)||A.isBlob(t)||A.isReadableStream(t))return t;if(A.isArrayBufferView(t))return t.buffer;if(A.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(o){if(a.indexOf("application/x-www-form-urlencoded")>-1)return fy(t,this.formSerializer).toString();if((l=A.isFileList(t))||a.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return po(l?{"files[]":t}:t,d&&new d,this.formSerializer)}}return o||s?(n.setContentType("application/json",!1),vy(t)):t}],transformResponse:[function(t){const n=this.transitional||Aa.transitional,a=n&&n.forcedJSONParsing,s=this.responseType==="json";if(A.isResponse(t)||A.isReadableStream(t))return t;if(t&&A.isString(t)&&(a&&!this.responseType||s)){const i=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(l){if(i)throw l.name==="SyntaxError"?ie.from(l,ie.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ot.classes.FormData,Blob:ot.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};A.forEach(["delete","get","head","post","put","patch"],e=>{Aa.headers[e]={}});const jy=A.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ky=e=>{const t={};let n,a,s;return e&&e.split(`
`).forEach(function(i){s=i.indexOf(":"),n=i.substring(0,s).trim().toLowerCase(),a=i.substring(s+1).trim(),!(!n||t[n]&&jy[n])&&(n==="set-cookie"?t[n]?t[n].push(a):t[n]=[a]:t[n]=t[n]?t[n]+", "+a:a)}),t},Dc=Symbol("internals");function Vn(e){return e&&String(e).trim().toLowerCase()}function fs(e){return e===!1||e==null?e:A.isArray(e)?e.map(fs):String(e)}function wy(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=n.exec(e);)t[a[1]]=a[2];return t}const Ny=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Ko(e,t,n,a,s){if(A.isFunction(a))return a.call(this,t,n);if(s&&(t=n),!!A.isString(t)){if(A.isString(a))return t.indexOf(a)!==-1;if(A.isRegExp(a))return a.test(t)}}function Sy(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,a)=>n.toUpperCase()+a)}function Cy(e,t){const n=A.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+n,{value:function(s,o,i){return this[a].call(this,t,s,o,i)},configurable:!0})})}let kt=class{constructor(t){t&&this.set(t)}set(t,n,a){const s=this;function o(l,d,c){const m=Vn(d);if(!m)throw new Error("header name must be a non-empty string");const h=A.findKey(s,m);(!h||s[h]===void 0||c===!0||c===void 0&&s[h]!==!1)&&(s[h||d]=fs(l))}const i=(l,d)=>A.forEach(l,(c,m)=>o(c,m,d));if(A.isPlainObject(t)||t instanceof this.constructor)i(t,n);else if(A.isString(t)&&(t=t.trim())&&!Ny(t))i(ky(t),n);else if(A.isObject(t)&&A.isIterable(t)){let l={},d,c;for(const m of t){if(!A.isArray(m))throw TypeError("Object iterator must return a key-value pair");l[c=m[0]]=(d=l[c])?A.isArray(d)?[...d,m[1]]:[d,m[1]]:m[1]}i(l,n)}else t!=null&&o(n,t,a);return this}get(t,n){if(t=Vn(t),t){const a=A.findKey(this,t);if(a){const s=this[a];if(!n)return s;if(n===!0)return wy(s);if(A.isFunction(n))return n.call(this,s,a);if(A.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Vn(t),t){const a=A.findKey(this,t);return!!(a&&this[a]!==void 0&&(!n||Ko(this,this[a],a,n)))}return!1}delete(t,n){const a=this;let s=!1;function o(i){if(i=Vn(i),i){const l=A.findKey(a,i);l&&(!n||Ko(a,a[l],l,n))&&(delete a[l],s=!0)}}return A.isArray(t)?t.forEach(o):o(t),s}clear(t){const n=Object.keys(this);let a=n.length,s=!1;for(;a--;){const o=n[a];(!t||Ko(this,this[o],o,t,!0))&&(delete this[o],s=!0)}return s}normalize(t){const n=this,a={};return A.forEach(this,(s,o)=>{const i=A.findKey(a,o);if(i){n[i]=fs(s),delete n[o];return}const l=t?Sy(o):String(o).trim();l!==o&&delete n[o],n[l]=fs(s),a[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return A.forEach(this,(a,s)=>{a!=null&&a!==!1&&(n[s]=t&&A.isArray(a)?a.join(", "):a)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const a=new this(t);return n.forEach(s=>a.set(s)),a}static accessor(t){const a=(this[Dc]=this[Dc]={accessors:{}}).accessors,s=this.prototype;function o(i){const l=Vn(i);a[l]||(Cy(s,i),a[l]=!0)}return A.isArray(t)?t.forEach(o):o(t),this}};kt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);A.reduceDescriptors(kt.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(a){this[n]=a}}});A.freezeMethods(kt);function Qo(e,t){const n=this||Aa,a=t||n,s=kt.from(a.headers);let o=a.data;return A.forEach(e,function(l){o=l.call(n,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function sh(e){return!!(e&&e.__CANCEL__)}let Ma=class extends ie{constructor(t,n,a){super(t??"canceled",ie.ERR_CANCELED,n,a),this.name="CanceledError",this.__CANCEL__=!0}};function oh(e,t,n){const a=n.config.validateStatus;!n.status||!a||a(n.status)?e(n):t(new ie("Request failed with status code "+n.status,[ie.ERR_BAD_REQUEST,ie.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Ey(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Py(e,t){e=e||10;const n=new Array(e),a=new Array(e);let s=0,o=0,i;return t=t!==void 0?t:1e3,function(d){const c=Date.now(),m=a[o];i||(i=c),n[s]=d,a[s]=c;let h=o,u=0;for(;h!==s;)u+=n[h++],h=h%e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),c-i<t)return;const w=m&&c-m;return w?Math.round(u*1e3/w):void 0}}function Iy(e,t){let n=0,a=1e3/t,s,o;const i=(c,m=Date.now())=>{n=m,s=null,o&&(clearTimeout(o),o=null),e(...c)};return[(...c)=>{const m=Date.now(),h=m-n;h>=a?i(c,m):(s=c,o||(o=setTimeout(()=>{o=null,i(s)},a-h)))},()=>s&&i(s)]}const qs=(e,t,n=3)=>{let a=0;const s=Py(50,250);return Iy(o=>{const i=o.loaded,l=o.lengthComputable?o.total:void 0,d=i-a,c=s(d),m=i<=l;a=i;const h={loaded:i,total:l,progress:l?i/l:void 0,bytes:d,rate:c||void 0,estimated:c&&l&&m?(l-i)/c:void 0,event:o,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(h)},n)},Fc=(e,t)=>{const n=e!=null;return[a=>t[0]({lengthComputable:n,total:e,loaded:a}),t[1]]},Oc=e=>(...t)=>A.asap(()=>e(...t)),Ly=ot.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,ot.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(ot.origin),ot.navigator&&/(msie|trident)/i.test(ot.navigator.userAgent)):()=>!0,Ry=ot.hasStandardBrowserEnv?{write(e,t,n,a,s,o,i){if(typeof document>"u")return;const l=[`${e}=${encodeURIComponent(t)}`];A.isNumber(n)&&l.push(`expires=${new Date(n).toUTCString()}`),A.isString(a)&&l.push(`path=${a}`),A.isString(s)&&l.push(`domain=${s}`),o===!0&&l.push("secure"),A.isString(i)&&l.push(`SameSite=${i}`),document.cookie=l.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function _y(e){return typeof e!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Ty(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function ih(e,t,n){let a=!_y(t);return e&&(a||n==!1)?Ty(e,t):t}const $c=e=>e instanceof kt?{...e}:e;function Jr(e,t){t=t||{};const n={};function a(c,m,h,u){return A.isPlainObject(c)&&A.isPlainObject(m)?A.merge.call({caseless:u},c,m):A.isPlainObject(m)?A.merge({},m):A.isArray(m)?m.slice():m}function s(c,m,h,u){if(A.isUndefined(m)){if(!A.isUndefined(c))return a(void 0,c,h,u)}else return a(c,m,h,u)}function o(c,m){if(!A.isUndefined(m))return a(void 0,m)}function i(c,m){if(A.isUndefined(m)){if(!A.isUndefined(c))return a(void 0,c)}else return a(void 0,m)}function l(c,m,h){if(h in t)return a(c,m);if(h in e)return a(void 0,c)}const d={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(c,m,h)=>s($c(c),$c(m),h,!0)};return A.forEach(Object.keys({...e,...t}),function(m){if(m==="__proto__"||m==="constructor"||m==="prototype")return;const h=A.hasOwnProp(d,m)?d[m]:s,u=h(e[m],t[m],m);A.isUndefined(u)&&h!==l||(n[m]=u)}),n}const lh=e=>{const t=Jr({},e);let{data:n,withXSRFToken:a,xsrfHeaderName:s,xsrfCookieName:o,headers:i,auth:l}=t;if(t.headers=i=kt.from(i),t.url=nh(ih(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),A.isFormData(n)){if(ot.hasStandardBrowserEnv||ot.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(A.isFunction(n.getHeaders)){const d=n.getHeaders(),c=["content-type","content-length"];Object.entries(d).forEach(([m,h])=>{c.includes(m.toLowerCase())&&i.set(m,h)})}}if(ot.hasStandardBrowserEnv&&(a&&A.isFunction(a)&&(a=a(t)),a||a!==!1&&Ly(t.url))){const d=s&&o&&Ry.read(o);d&&i.set(s,d)}return t},Ay=typeof XMLHttpRequest<"u",My=Ay&&function(e){return new Promise(function(n,a){const s=lh(e);let o=s.data;const i=kt.from(s.headers).normalize();let{responseType:l,onUploadProgress:d,onDownloadProgress:c}=s,m,h,u,w,p;function f(){w&&w(),p&&p(),s.cancelToken&&s.cancelToken.unsubscribe(m),s.signal&&s.signal.removeEventListener("abort",m)}let k=new XMLHttpRequest;k.open(s.method.toUpperCase(),s.url,!0),k.timeout=s.timeout;function x(){if(!k)return;const y=kt.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),S={data:!l||l==="text"||l==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:y,config:e,request:k};oh(function(P){n(P),f()},function(P){a(P),f()},S),k=null}"onloadend"in k?k.onloadend=x:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(x)},k.onabort=function(){k&&(a(new ie("Request aborted",ie.ECONNABORTED,e,k)),k=null)},k.onerror=function(v){const S=v&&v.message?v.message:"Network Error",C=new ie(S,ie.ERR_NETWORK,e,k);C.event=v||null,a(C),k=null},k.ontimeout=function(){let v=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const S=s.transitional||ld;s.timeoutErrorMessage&&(v=s.timeoutErrorMessage),a(new ie(v,S.clarifyTimeoutError?ie.ETIMEDOUT:ie.ECONNABORTED,e,k)),k=null},o===void 0&&i.setContentType(null),"setRequestHeader"in k&&A.forEach(i.toJSON(),function(v,S){k.setRequestHeader(S,v)}),A.isUndefined(s.withCredentials)||(k.withCredentials=!!s.withCredentials),l&&l!=="json"&&(k.responseType=s.responseType),c&&([u,p]=qs(c,!0),k.addEventListener("progress",u)),d&&k.upload&&([h,w]=qs(d),k.upload.addEventListener("progress",h),k.upload.addEventListener("loadend",w)),(s.cancelToken||s.signal)&&(m=y=>{k&&(a(!y||y.type?new Ma(null,e,k):y),k.abort(),k=null)},s.cancelToken&&s.cancelToken.subscribe(m),s.signal&&(s.signal.aborted?m():s.signal.addEventListener("abort",m)));const b=Ey(s.url);if(b&&ot.protocols.indexOf(b)===-1){a(new ie("Unsupported protocol "+b+":",ie.ERR_BAD_REQUEST,e));return}k.send(o||null)})},Dy=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let a=new AbortController,s;const o=function(c){if(!s){s=!0,l();const m=c instanceof Error?c:this.reason;a.abort(m instanceof ie?m:new Ma(m instanceof Error?m.message:m))}};let i=t&&setTimeout(()=>{i=null,o(new ie(`timeout of ${t}ms exceeded`,ie.ETIMEDOUT))},t);const l=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(o):c.removeEventListener("abort",o)}),e=null)};e.forEach(c=>c.addEventListener("abort",o));const{signal:d}=a;return d.unsubscribe=()=>A.asap(l),d}},Fy=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let a=0,s;for(;a<n;)s=a+t,yield e.slice(a,s),a=s},Oy=async function*(e,t){for await(const n of $y(e))yield*Fy(n,t)},$y=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:a}=await t.read();if(n)break;yield a}}finally{await t.cancel()}},Bc=(e,t,n,a)=>{const s=Oy(e,t);let o=0,i,l=d=>{i||(i=!0,a&&a(d))};return new ReadableStream({async pull(d){try{const{done:c,value:m}=await s.next();if(c){l(),d.close();return}let h=m.byteLength;if(n){let u=o+=h;n(u)}d.enqueue(new Uint8Array(m))}catch(c){throw l(c),c}},cancel(d){return l(d),s.return()}},{highWaterMark:2})},zc=64*1024,{isFunction:Za}=A,By=(({Request:e,Response:t})=>({Request:e,Response:t}))(A.global),{ReadableStream:Uc,TextEncoder:Hc}=A.global,Wc=(e,...t)=>{try{return!!e(...t)}catch{return!1}},zy=e=>{e=A.merge.call({skipUndefined:!0},By,e);const{fetch:t,Request:n,Response:a}=e,s=t?Za(t):typeof fetch=="function",o=Za(n),i=Za(a);if(!s)return!1;const l=s&&Za(Uc),d=s&&(typeof Hc=="function"?(p=>f=>p.encode(f))(new Hc):async p=>new Uint8Array(await new n(p).arrayBuffer())),c=o&&l&&Wc(()=>{let p=!1;const f=new n(ot.origin,{body:new Uc,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!f}),m=i&&l&&Wc(()=>A.isReadableStream(new a("").body)),h={stream:m&&(p=>p.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(p=>{!h[p]&&(h[p]=(f,k)=>{let x=f&&f[p];if(x)return x.call(f);throw new ie(`Response type '${p}' is not supported`,ie.ERR_NOT_SUPPORT,k)})});const u=async p=>{if(p==null)return 0;if(A.isBlob(p))return p.size;if(A.isSpecCompliantForm(p))return(await new n(ot.origin,{method:"POST",body:p}).arrayBuffer()).byteLength;if(A.isArrayBufferView(p)||A.isArrayBuffer(p))return p.byteLength;if(A.isURLSearchParams(p)&&(p=p+""),A.isString(p))return(await d(p)).byteLength},w=async(p,f)=>{const k=A.toFiniteNumber(p.getContentLength());return k??u(f)};return async p=>{let{url:f,method:k,data:x,signal:b,cancelToken:y,timeout:v,onDownloadProgress:S,onUploadProgress:C,responseType:P,headers:j,withCredentials:N="same-origin",fetchOptions:E}=lh(p),L=t||fetch;P=P?(P+"").toLowerCase():"text";let D=Dy([b,y&&y.toAbortSignal()],v),M=null;const K=D&&D.unsubscribe&&(()=>{D.unsubscribe()});let ae;try{if(C&&c&&k!=="get"&&k!=="head"&&(ae=await w(j,x))!==0){let U=new n(f,{method:"POST",body:x,duplex:"half"}),q;if(A.isFormData(x)&&(q=U.headers.get("content-type"))&&j.setContentType(q),U.body){const[R,H]=Fc(ae,qs(Oc(C)));x=Bc(U.body,zc,R,H)}}A.isString(N)||(N=N?"include":"omit");const Z=o&&"credentials"in n.prototype,_={...E,signal:D,method:k.toUpperCase(),headers:j.normalize().toJSON(),body:x,duplex:"half",credentials:Z?N:void 0};M=o&&new n(f,_);let T=await(o?L(M,E):L(f,_));const F=m&&(P==="stream"||P==="response");if(m&&(S||F&&K)){const U={};["status","statusText","headers"].forEach(W=>{U[W]=T[W]});const q=A.toFiniteNumber(T.headers.get("content-length")),[R,H]=S&&Fc(q,qs(Oc(S),!0))||[];T=new a(Bc(T.body,zc,R,()=>{H&&H(),K&&K()}),U)}P=P||"text";let B=await h[A.findKey(h,P)||"text"](T,p);return!F&&K&&K(),await new Promise((U,q)=>{oh(U,q,{data:B,headers:kt.from(T.headers),status:T.status,statusText:T.statusText,config:p,request:M})})}catch(Z){throw K&&K(),Z&&Z.name==="TypeError"&&/Load failed|fetch/i.test(Z.message)?Object.assign(new ie("Network Error",ie.ERR_NETWORK,p,M,Z&&Z.response),{cause:Z.cause||Z}):ie.from(Z,Z&&Z.code,p,M,Z&&Z.response)}}},Uy=new Map,dh=e=>{let t=e&&e.env||{};const{fetch:n,Request:a,Response:s}=t,o=[a,s,n];let i=o.length,l=i,d,c,m=Uy;for(;l--;)d=o[l],c=m.get(d),c===void 0&&m.set(d,c=l?new Map:zy(t)),m=c;return c};dh();const cd={http:sy,xhr:My,fetch:{get:dh}};A.forEach(cd,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Vc=e=>`- ${e}`,Hy=e=>A.isFunction(e)||e===null||e===!1;function Wy(e,t){e=A.isArray(e)?e:[e];const{length:n}=e;let a,s;const o={};for(let i=0;i<n;i++){a=e[i];let l;if(s=a,!Hy(a)&&(s=cd[(l=String(a)).toLowerCase()],s===void 0))throw new ie(`Unknown adapter '${l}'`);if(s&&(A.isFunction(s)||(s=s.get(t))))break;o[l||"#"+i]=s}if(!s){const i=Object.entries(o).map(([d,c])=>`adapter ${d} `+(c===!1?"is not supported by the environment":"is not available in the build"));let l=n?i.length>1?`since :
`+i.map(Vc).join(`
`):" "+Vc(i[0]):"as no adapter specified";throw new ie("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return s}const ch={getAdapter:Wy,adapters:cd};function Jo(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ma(null,e)}function qc(e){return Jo(e),e.headers=kt.from(e.headers),e.data=Qo.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),ch.getAdapter(e.adapter||Aa.adapter,e)(e).then(function(a){return Jo(e),a.data=Qo.call(e,e.transformResponse,a),a.headers=kt.from(a.headers),a},function(a){return sh(a)||(Jo(e),a&&a.response&&(a.response.data=Qo.call(e,e.transformResponse,a.response),a.response.headers=kt.from(a.response.headers))),Promise.reject(a)})}const uh="1.13.5",fo={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{fo[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});const Gc={};fo.transitional=function(t,n,a){function s(o,i){return"[Axios v"+uh+"] Transitional option '"+o+"'"+i+(a?". "+a:"")}return(o,i,l)=>{if(t===!1)throw new ie(s(i," has been removed"+(n?" in "+n:"")),ie.ERR_DEPRECATED);return n&&!Gc[i]&&(Gc[i]=!0,console.warn(s(i," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,i,l):!0}};fo.spelling=function(t){return(n,a)=>(console.warn(`${a} is likely a misspelling of ${t}`),!0)};function Vy(e,t,n){if(typeof e!="object")throw new ie("options must be an object",ie.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let s=a.length;for(;s-- >0;){const o=a[s],i=t[o];if(i){const l=e[o],d=l===void 0||i(l,o,e);if(d!==!0)throw new ie("option "+o+" must be "+d,ie.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ie("Unknown option "+o,ie.ERR_BAD_OPTION)}}const ys={assertOptions:Vy,validators:fo},Lt=ys.validators;let Vr=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Mc,response:new Mc}}async request(t,n){try{return await this._request(t,n)}catch(a){if(a instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{a.stack?o&&!String(a.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+o):a.stack=o}catch{}}throw a}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Jr(this.defaults,n);const{transitional:a,paramsSerializer:s,headers:o}=n;a!==void 0&&ys.assertOptions(a,{silentJSONParsing:Lt.transitional(Lt.boolean),forcedJSONParsing:Lt.transitional(Lt.boolean),clarifyTimeoutError:Lt.transitional(Lt.boolean),legacyInterceptorReqResOrdering:Lt.transitional(Lt.boolean)},!1),s!=null&&(A.isFunction(s)?n.paramsSerializer={serialize:s}:ys.assertOptions(s,{encode:Lt.function,serialize:Lt.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ys.assertOptions(n,{baseUrl:Lt.spelling("baseURL"),withXsrfToken:Lt.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=o&&A.merge(o.common,o[n.method]);o&&A.forEach(["delete","get","head","post","put","patch","common"],p=>{delete o[p]}),n.headers=kt.concat(i,o);const l=[];let d=!0;this.interceptors.request.forEach(function(f){if(typeof f.runWhen=="function"&&f.runWhen(n)===!1)return;d=d&&f.synchronous;const k=n.transitional||ld;k&&k.legacyInterceptorReqResOrdering?l.unshift(f.fulfilled,f.rejected):l.push(f.fulfilled,f.rejected)});const c=[];this.interceptors.response.forEach(function(f){c.push(f.fulfilled,f.rejected)});let m,h=0,u;if(!d){const p=[qc.bind(this),void 0];for(p.unshift(...l),p.push(...c),u=p.length,m=Promise.resolve(n);h<u;)m=m.then(p[h++],p[h++]);return m}u=l.length;let w=n;for(;h<u;){const p=l[h++],f=l[h++];try{w=p(w)}catch(k){f.call(this,k);break}}try{m=qc.call(this,w)}catch(p){return Promise.reject(p)}for(h=0,u=c.length;h<u;)m=m.then(c[h++],c[h++]);return m}getUri(t){t=Jr(this.defaults,t);const n=ih(t.baseURL,t.url,t.allowAbsoluteUrls);return nh(n,t.params,t.paramsSerializer)}};A.forEach(["delete","get","head","options"],function(t){Vr.prototype[t]=function(n,a){return this.request(Jr(a||{},{method:t,url:n,data:(a||{}).data}))}});A.forEach(["post","put","patch"],function(t){function n(a){return function(o,i,l){return this.request(Jr(l||{},{method:t,headers:a?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}Vr.prototype[t]=n(),Vr.prototype[t+"Form"]=n(!0)});let qy=class mh{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const a=this;this.promise.then(s=>{if(!a._listeners)return;let o=a._listeners.length;for(;o-- >0;)a._listeners[o](s);a._listeners=null}),this.promise.then=s=>{let o;const i=new Promise(l=>{a.subscribe(l),o=l}).then(s);return i.cancel=function(){a.unsubscribe(o)},i},t(function(o,i,l){a.reason||(a.reason=new Ma(o,i,l),n(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=a=>{t.abort(a)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new mh(function(s){t=s}),cancel:t}}};function Gy(e){return function(n){return e.apply(null,n)}}function Yy(e){return A.isObject(e)&&e.isAxiosError===!0}const rl={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(rl).forEach(([e,t])=>{rl[t]=e});function hh(e){const t=new Vr(e),n=qm(Vr.prototype.request,t);return A.extend(n,Vr.prototype,t,{allOwnKeys:!0}),A.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return hh(Jr(e,s))},n}const Ge=hh(Aa);Ge.Axios=Vr;Ge.CanceledError=Ma;Ge.CancelToken=qy;Ge.isCancel=sh;Ge.VERSION=uh;Ge.toFormData=po;Ge.AxiosError=ie;Ge.Cancel=Ge.CanceledError;Ge.all=function(t){return Promise.all(t)};Ge.spread=Gy;Ge.isAxiosError=Yy;Ge.mergeConfig=Jr;Ge.AxiosHeaders=kt;Ge.formToJSON=e=>ah(A.isHTMLForm(e)?new FormData(e):e);Ge.getAdapter=ch.getAdapter;Ge.HttpStatusCode=rl;Ge.default=Ge;const{Axios:Fj,AxiosError:Oj,CanceledError:$j,isCancel:Bj,CancelToken:zj,VERSION:Uj,all:Hj,Cancel:Wj,isAxiosError:Vj,spread:qj,toFormData:Gj,AxiosHeaders:Yj,HttpStatusCode:Kj,formToJSON:Qj,getAdapter:Jj,mergeConfig:Xj}=Ge,Ky=()=>{const e=window.location.hostname;return e==="localhost"||e==="127.0.0.1"||/^(10\.|192\.168\.|172\.(1[6-9]|2\d|3[01])\.)/.test(e)?`${window.location.protocol}//${e}:4000/api`:"https://api.aceddivision.com/api"},gh=Ky();console.log("[API] Initialized with URL:",gh);const O=Ge.create({baseURL:gh});O.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),console.log("[API REQUEST]",{method:e.method.toUpperCase(),url:e.baseURL+e.url,hasToken:!!t,data:e.data?JSON.parse(JSON.stringify(e.data)):null}),e});O.interceptors.response.use(e=>(console.log("[API RESPONSE SUCCESS]",{method:e.config.method.toUpperCase(),url:e.config.baseURL+e.config.url,status:e.status,data:e.data}),e),e=>{var t,n,a,s,o,i,l;return console.error("[API RESPONSE ERROR]",{method:(n=(t=e.config)==null?void 0:t.method)==null?void 0:n.toUpperCase(),url:((a=e.config)==null?void 0:a.baseURL)+((s=e.config)==null?void 0:s.url),status:(o=e.response)==null?void 0:o.status,statusText:(i=e.response)==null?void 0:i.statusText,data:(l=e.response)==null?void 0:l.data,message:e.message,code:e.code}),Promise.reject(e)});function Qy(){const[e]=mo(),[t,n]=g.useState({email:"",password:""}),[a,s]=g.useState(!1),[o,i]=g.useState(""),[l,d]=g.useState(!1),[c,m]=g.useState(null),[h,u]=g.useState(null),[w,p]=g.useState(!1),[f,k]=g.useState(""),x=lt(),{login:b}=_e();g.useEffect(()=>{const j=e.get("inviteToken");j&&(m(j),y(j))},[e]);const y=async j=>{try{const N=await O.get(`/households/invite-info/${j}`);u(N.data)}catch(N){console.error("Failed to fetch invite info:",N),i("Invalid or expired invite link")}},v=j=>{n({...t,[j.target.name]:j.target.value})},S=async j=>{var N,E;j.preventDefault(),s(!0),i("");try{const{data:L}=await O.post("/auth/login",t);if(console.log("Login successful:",L),L.mfaRequired){p(!0),s(!1);return}if(b(L.user,L.accessToken,L.pendingInvites||[]),localStorage.setItem("refreshToken",L.refreshToken),c)try{const D=await O.post(`/households/invite/accept/${c}`);console.log("Invite accepted automatically:",D.data),D.data.household&&b(D.data.user||L.user,L.accessToken,[])}catch(D){console.warn("Auto-accept failed:",D)}x("/dashboard")}catch(L){console.error("Login error:",L),i(((E=(N=L.response)==null?void 0:N.data)==null?void 0:E.error)||"Login failed")}finally{s(!1)}},C=async j=>{var N,E;j.preventDefault(),s(!0),i("");try{const{data:L}=await O.post("/auth/login",{...t,mfaToken:f});if(b(L.user,L.accessToken,L.pendingInvites||[]),localStorage.setItem("refreshToken",L.refreshToken),c)try{const D=await O.post(`/households/invite/accept/${c}`);D.data.household&&b(D.data.user||L.user,L.accessToken,[])}catch(D){console.warn("Auto-accept failed:",D)}x("/dashboard")}catch(L){i(((E=(N=L.response)==null?void 0:N.data)==null?void 0:E.error)||"Invalid MFA code")}finally{s(!1)}},P=async()=>{var j,N;s(!0),i("");try{const{data:E}=await O.post("/auth/passkey/login/start",{email:t.email}),{challengeUserId:L,...D}=E,M=await bf({optionsJSON:D}),{data:K}=await O.post("/auth/passkey/login/finish",{...M,challengeUserId:L});b(K.user,K.accessToken,K.pendingInvites||[]),localStorage.setItem("refreshToken",K.refreshToken),x("/dashboard")}catch(E){i(((N=(j=E.response)==null?void 0:j.data)==null?void 0:N.error)||E.message||"Passkey sign-in failed")}finally{s(!1)}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 w-full max-w-md",children:[r.jsx("h1",{className:"text-3xl font-bold text-center text-gray-800 mb-2",children:"Household Budget"}),w?r.jsxs("form",{onSubmit:C,className:"space-y-4 mt-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-4xl mb-2",children:""}),r.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-1",children:"Two-Factor Authentication"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Enter the 6-digit code from your authenticator app."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Authentication Code"}),r.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]{6}",maxLength:6,value:f,onChange:j=>k(j.target.value.replace(/\D/g,"")),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-center text-2xl tracking-widest",placeholder:"000000",required:!0,autoFocus:!0})]}),o&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded",children:o}),r.jsx("button",{type:"submit",disabled:a||f.length!==6,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition disabled:opacity-50",children:a?"Verifying...":"Verify"}),r.jsx("button",{type:"button",onClick:()=>{p(!1),k(""),i("")},className:"w-full text-sm text-gray-500 hover:text-gray-700 transition",children:" Back to login"})]}):r.jsxs(r.Fragment,{children:[h&&r.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[r.jsx("p",{className:"text-sm text-green-800 font-medium",children:" You have an invitation!"}),r.jsxs("p",{className:"text-xs text-green-600 mt-2",children:[r.jsx("strong",{children:"From:"})," ",h.invitedByName]}),r.jsxs("p",{className:"text-xs text-green-600",children:[r.jsx("strong",{children:"Household:"})," ",h.householdName]}),r.jsx("p",{className:"text-xs text-green-600 mt-2",children:"Log in below and you'll automatically be added to this household!"})]}),r.jsxs("form",{onSubmit:S,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),r.jsx("input",{type:"email",name:"email",value:t.email,onChange:v,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:l?"text":"password",name:"password",value:t.password,onChange:v,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 pr-10",required:!0}),r.jsx("button",{type:"button",onClick:()=>d(!l),className:"absolute right-3 top-2.5 text-gray-500 hover:text-gray-700",title:l?"Hide password":"Show password",children:l?r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}):r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-4.803m5.596-3.856a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0M15 12a3 3 0 11-6 0 3 3 0 016 0z"})})})]})]}),o&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded",children:o}),r.jsx("button",{type:"submit",disabled:a,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition disabled:opacity-50",children:a?"Logging in...":"Login"}),r.jsxs("div",{className:"flex items-center gap-3 my-1",children:[r.jsx("hr",{className:"flex-1 border-gray-200"}),r.jsx("span",{className:"text-xs text-gray-400",children:"or"}),r.jsx("hr",{className:"flex-1 border-gray-200"})]}),r.jsxs("button",{type:"button",onClick:P,disabled:a,className:"w-full flex items-center justify-center gap-2 border border-gray-300 hover:border-gray-400 text-gray-700 font-medium py-2 px-4 rounded-lg transition disabled:opacity-50",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),a?"Waiting...":"Sign in with Passkey"]})]}),r.jsxs("p",{className:"text-center text-gray-600 mt-4",children:["Don't have an account? ",r.jsx(fe,{to:"/register",className:"text-blue-500 hover:underline",children:"Register"})]}),r.jsxs("p",{className:"text-center text-xs text-gray-400 mt-3",children:[r.jsx(fe,{to:"/terms",className:"hover:underline",children:"Terms & Conditions"}),"  ",r.jsx(fe,{to:"/privacy-policy",className:"hover:underline",children:"Privacy Policy"})]})]})]})})}function Yc(){const{inviteToken:e}=Rm(),[t,n]=g.useState(e?"join":"create"),[a,s]=g.useState({email:"",password:"",name:"",householdName:""}),[o,i]=g.useState(null),[l,d]=g.useState(!1),[c,m]=g.useState(!1),[h,u]=g.useState(""),[w,p]=g.useState(!1),[f,k]=g.useState(!1),x=lt(),{login:b}=_e();g.useEffect(()=>{e&&y()},[e]);const y=async()=>{m(!0);try{const C=await O.get(`/households/invite-info/${e}`);i(C.data),s(P=>({...P,householdName:C.data.householdName}))}catch(C){console.error("Failed to fetch household info:",C),u("Invalid or expired invite link")}finally{m(!1)}},v=C=>{s({...a,[C.target.name]:C.target.value})},S=async C=>{var P,j;C.preventDefault(),d(!0),u("");try{if(t==="create"){const{data:N}=await O.post("/auth/register",a);console.log("Registration successful:",N),b(N.user,N.accessToken,[]),localStorage.setItem("refreshToken",N.refreshToken),x("/dashboard")}else if(t==="join"&&e){const{data:N}=await O.post("/auth/register",{email:a.email,password:a.password,name:a.name,householdName:`${a.name}'s Household`});console.log("Registration successful:",N),b(N.user,N.accessToken,[]),localStorage.setItem("refreshToken",N.refreshToken);try{const{data:E}=await O.post(`/households/invite/accept/${e}`);console.log("Invite accepted:",E),b(E.user||N.user,N.accessToken,[])}catch(E){console.warn("Auto-accept invite failed, but registration succeeded:",E)}x("/dashboard")}else{const{data:N}=await O.post("/auth/register",{email:a.email,password:a.password,name:a.name,householdName:`${a.name}'s Household`});console.log("Registration successful:",N),b(N.user,N.accessToken,[]),localStorage.setItem("refreshToken",N.refreshToken),x("/dashboard")}}catch(N){console.error("Registration error:",N),u(((j=(P=N.response)==null?void 0:P.data)==null?void 0:j.error)||"Registration failed")}finally{d(!1)}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 w-full max-w-md",children:[r.jsx("h1",{className:"text-3xl font-bold text-center text-gray-800 mb-2",children:"Create Account"}),r.jsx("p",{className:"text-center text-gray-500 text-sm mb-8",children:"Join the household budget tracker"}),c?r.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading household information..."}):h&&o===null&&e?r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded mb-4",children:h}):r.jsxs(r.Fragment,{children:[!e&&r.jsxs("div",{className:"mb-6 flex gap-2 p-1 bg-gray-100 rounded-lg",children:[r.jsx("button",{type:"button",onClick:()=>n("create"),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition ${t==="create"?"bg-white text-blue-600 shadow":"text-gray-600 hover:text-gray-800"}`,children:"Create Household"}),r.jsx("button",{type:"button",onClick:()=>n("join"),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition ${t==="join"?"bg-white text-blue-600 shadow":"text-gray-600 hover:text-gray-800"}`,children:"Join via Invite"})]}),e&&r.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[r.jsx("p",{className:"text-sm text-green-800 font-medium",children:" Joining with Invite"}),r.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Creating account to join: ",r.jsx("strong",{children:(o==null?void 0:o.householdName)||"Loading..."})]})]}),r.jsxs("form",{onSubmit:S,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Name"}),r.jsx("input",{type:"text",name:"name",value:a.name,onChange:v,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),t==="create"&&!e?r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Household Name"}),r.jsx("input",{type:"text",name:"householdName",value:a.householdName,onChange:v,placeholder:"e.g., John & Sarah",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:t==="create"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"You'll be the head of household and can invite members"})]}):e?r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Joining Household"}),r.jsx("input",{type:"text",value:a.householdName,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-700 cursor-not-allowed"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"You will join this household after registration"})]}):r.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:r.jsx("p",{className:"text-sm text-blue-800",children:" After creating your account, you'll need an invite link from your household head to join."})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),r.jsx("input",{type:"email",name:"email",value:a.email,onChange:v,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:f?"text":"password",name:"password",value:a.password,onChange:v,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 pr-10",required:!0}),r.jsx("button",{type:"button",onClick:()=>k(!f),className:"absolute right-3 top-2.5 text-gray-500 hover:text-gray-700",title:f?"Hide password":"Show password",children:f?r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}):r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-4.803m5.596-3.856a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0M15 12a3 3 0 11-6 0 3 3 0 016 0z"})})})]}),a.password.length>0&&r.jsx("ul",{className:"mt-2 space-y-1 text-xs",children:[{label:"At least 8 characters",ok:a.password.length>=8},{label:"One uppercase letter (AZ)",ok:/[A-Z]/.test(a.password)},{label:"One lowercase letter (az)",ok:/[a-z]/.test(a.password)},{label:"One number (09)",ok:/\d/.test(a.password)},{label:"One special character (!@#$%^&*)",ok:/[!@#$%^&*]/.test(a.password)}].map(({label:C,ok:P})=>r.jsxs("li",{className:`flex items-center gap-1.5 ${P?"text-green-600":"text-red-500"}`,children:[r.jsx("span",{children:P?"":""}),r.jsx("span",{children:C})]},C))})]}),h&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded",children:h}),r.jsxs("label",{className:"flex items-start gap-3 cursor-pointer select-none",children:[r.jsx("input",{type:"checkbox",checked:w,onChange:C=>p(C.target.checked),className:"mt-0.5 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 flex-shrink-0"}),r.jsxs("span",{className:"text-sm text-gray-600",children:["I agree to the"," ",r.jsx(fe,{to:"/terms",target:"_blank",className:"text-blue-600 hover:underline font-medium",children:"Terms & Conditions"})," ","and"," ",r.jsx(fe,{to:"/privacy-policy",target:"_blank",className:"text-blue-600 hover:underline font-medium",children:"Privacy Policy"})," ","of ACED Division LLC."]})]}),r.jsx("button",{type:"submit",disabled:l||c||!w,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Creating...":t==="create"?"Create Household":"Create Account & Join"})]}),r.jsxs("p",{className:"text-center text-gray-600 mt-4",children:["Already have an account? ",r.jsx(fe,{to:"/login",className:"text-blue-500 hover:underline",children:"Login"})]})]})]})})}const es=()=>r.jsx("div",{className:"w-8 border-t border-gray-200 dark:border-gray-600/60 my-0.5 flex-shrink-0"});function Jy(){const e=cr(),t=lt(),{language:n,setLanguage:a}=ue(),{theme:s,toggleTheme:o}=Bm(),{logout:i}=_e(),l=u=>e.pathname===u,d=g.useRef(null),[c,m]=g.useState(!1);g.useEffect(()=>{const u=d.current;if(!u)return;const w=()=>m(u.scrollTop+u.clientHeight<u.scrollHeight-4);w(),u.addEventListener("scroll",w);const p=new ResizeObserver(w);return p.observe(u),()=>{u.removeEventListener("scroll",w),p.disconnect()}},[]);const h=(u,w,p,f)=>r.jsx(fe,{to:u,title:w,className:`p-2.5 rounded-lg transition-all flex-shrink-0
        hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-${p}-600 dark:hover:text-${p}-400
        ${l(u)?`bg-${p}-100 dark:bg-${p}-900 text-${p}-600 dark:text-${p}-400`:"text-gray-400 dark:text-gray-500"}`,children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f})});return r.jsxs("aside",{className:"w-20 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 hidden sm:flex flex-col items-center h-screen sticky top-0 pt-6 pb-4 transition-colors",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-600 to-blue-500 rounded-full flex items-center justify-center text-white font-bold text-sm flex-shrink-0 mb-4",children:"H"}),r.jsxs("div",{className:"relative flex-1 w-full min-h-0",children:[r.jsxs("nav",{ref:d,className:`h-full w-full flex flex-col items-center overflow-y-auto overflow-x-hidden px-0 gap-1\r
        [&::-webkit-scrollbar]:w-0 [&::-webkit-scrollbar]:hidden`,style:{scrollbarWidth:"none"},children:[h("/dashboard","Dashboard","indigo",r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6z"})),r.jsx(es,{}),h("/income","Income","green",r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})),h("/fixed-expenses","Fixed Expenses","red",r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})),h("/expenses","Variable Expenses","orange",r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})),h("/goals","Goals & Funds","teal",r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})),r.jsx(es,{}),h("/credit-cards","Credit Cards","pink",r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})),h("/card-statements","Card Statements","pink",r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),h("/debt-payments","Debt Payments","pink",r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})),h("/monthly-overview","Monthly Overview","blue",r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})),h("/finance-report","Finance Meeting Report","indigo",r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),r.jsx(es,{}),h("/members","Members","purple",r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})),h("/linked-accounts","Linked Accounts","blue",r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18M3 7l9-4 9 4M4 10h16v11H4V10z"})),h("/transactions/review","Review Transactions","blue",r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})),r.jsx(es,{}),h("/insights","AI Insights","purple",r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m1.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})),r.jsx(fe,{to:"/subscription",title:"Subscription",className:`p-2.5 rounded-lg transition-all flex-shrink-0
            hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-yellow-600 dark:hover:text-yellow-400
            ${l("/subscription")||l("/pricing")?"bg-yellow-100 dark:bg-yellow-900 text-yellow-600 dark:text-yellow-400":"text-gray-400 dark:text-gray-500"}`,children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})})]}),c&&r.jsx("button",{onClick:()=>{var u;return(u=d.current)==null?void 0:u.scrollBy({top:80,behavior:"smooth"})},className:"absolute bottom-1 left-1/2 -translate-x-1/2 w-6 h-6 flex items-center justify-center rounded-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 shadow text-gray-400 hover:text-indigo-500 dark:text-gray-400 dark:hover:text-indigo-400 transition-all z-10",title:"More items below",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 9l-7 7-7-7"})})})]}),r.jsxs("div",{className:"flex-shrink-0 w-full flex flex-col items-center gap-2 pt-3 border-t border-gray-200 dark:border-gray-700 mt-2",children:[r.jsx("button",{onClick:()=>a(n==="en"?"es":"en"),className:"w-10 h-10 rounded-lg flex items-center justify-center text-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-all",title:n==="en"?"Switch to Espaol":"Switch to English",children:n==="en"?"":""}),r.jsx(fe,{to:"/settings/profile",className:`w-10 h-10 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all flex items-center justify-center
            ${l("/settings/profile")?"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white":"text-gray-400 dark:text-gray-500"}`,title:"Account Settings",children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),r.jsx("button",{onClick:o,type:"button",className:"w-10 h-10 rounded-lg bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 transition-all flex items-center justify-center",title:s==="light"?"Switch to Dark Mode":"Switch to Light Mode",children:s==="light"?r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-yellow-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})}),r.jsx("button",{onClick:()=>{i(),t("/login")},className:"w-10 h-10 rounded-lg bg-red-100 dark:bg-red-900 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-800 transition-all flex items-center justify-center",title:"Logout",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]})}function Xy({isOpen:e,onClose:t}){const n=cr(),{language:a,setLanguage:s}=ue(),{theme:o,toggleTheme:i}=Bm(),l=m=>n.pathname===m,d=m=>({indigo:"bg-indigo-100 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-400",green:"bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-400",red:"bg-red-100 dark:bg-red-900 text-red-600 dark:text-red-400",orange:"bg-orange-100 dark:bg-orange-900 text-orange-600 dark:text-orange-400",teal:"bg-teal-100 dark:bg-teal-900 text-teal-600 dark:text-teal-400",pink:"bg-pink-100 dark:bg-pink-900 text-pink-600 dark:text-pink-400",blue:"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400",purple:"bg-purple-100 dark:bg-purple-900 text-purple-600 dark:text-purple-400"})[m]||"bg-indigo-100 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-400",c=[{path:"/dashboard",label:"Dashboard",icon:"",color:"indigo"},{path:"/income",label:"Income",icon:"",color:"green"},{path:"/fixed-expenses",label:"Fixed Expenses",icon:"",color:"red"},{path:"/expenses",label:"Expenses",icon:"",color:"orange"},{path:"/goals",label:"Goals",icon:"",color:"teal"},{path:"/credit-cards",label:"Credit Cards",icon:"",color:"pink"},{path:"/card-statements",label:"Statements",icon:"",color:"pink"},{path:"/debt-payments",label:"Debt Payments",icon:"",color:"pink"},{path:"/monthly-overview",label:"Overview",icon:"",color:"blue"},{path:"/finance-report",label:"Finance Meeting",icon:"",color:"indigo"},{path:"/members",label:"Members",icon:"",color:"purple"},{path:"/linked-accounts",label:"Linked Accounts",icon:"",color:"blue"},{path:"/transactions/review",label:"Review Transactions",icon:"",color:"blue"},{path:"/insights",label:"AI Insights",icon:"",color:"purple"},{path:"/subscription",label:"Subscription",icon:"",color:"purple"}];return e?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-40 sm:hidden",onClick:t}),r.jsxs("aside",{className:"fixed left-0 top-0 h-full w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 z-50 flex flex-col overflow-y-auto",children:[r.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-600 to-blue-500 rounded-full flex items-center justify-center text-white font-bold text-sm",children:"H"}),r.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("nav",{className:"flex-1 p-4 space-y-2",children:c.map(m=>r.jsxs(fe,{to:m.path,onClick:t,className:`flex items-center space-x-3 px-4 py-3 rounded-lg transition-all ${l(m.path)?`${d(m.color)} font-medium`:"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[r.jsx("span",{className:"text-xl",children:m.icon}),r.jsx("span",{className:"text-sm font-medium",children:m.label})]},m.path))}),r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx("button",{onClick:()=>s("en"),className:`flex-1 py-2 rounded text-sm transition-all ${a==="en"?"bg-indigo-100 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-400 font-bold":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200"}`,children:""}),r.jsx("button",{onClick:()=>s("es"),className:`flex-1 py-2 rounded text-sm transition-all ${a==="es"?"bg-indigo-100 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-400 font-bold":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200"}`,children:""})]}),r.jsx("button",{onClick:i,className:"w-full py-2 px-3 rounded bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-all flex items-center justify-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:o==="light"?" Dark Mode":" Light Mode"})]})]})]}):null}function Zy(){const{t:e}=ue(),{user:t,switchHousehold:n}=_e();lt();const[a,s]=g.useState(!1),[o,i]=g.useState([]),[l,d]=g.useState(!1);g.useEffect(()=>{a&&c()},[a]);const c=async()=>{var h;d(!0);try{const u=await O.get("/households/user/my-households");i(u.data.households||[]),console.log("[HouseholdSwitcher] fetched households",(h=u.data.households)==null?void 0:h.length)}catch(u){console.error("[HouseholdSwitcher] Error fetching households:",u)}finally{d(!1)}},m=(h,u)=>{console.log("[HouseholdSwitcher] STEP 1 - Starting switch to:",{householdId:h,householdName:u}),console.log("[HouseholdSwitcher] Current user before switch:",t),n(h,u),console.log("[HouseholdSwitcher] STEP 2 - Called switchHousehold"),s(!1),setTimeout(()=>{console.log("[HouseholdSwitcher] STEP 3 - Reloading page with window.location.href = /dashboard"),window.location.href="/dashboard"},100)};return t?r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>s(!a),className:"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:e("Switch household","Cambiar hogar"),children:[r.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-3m0 0l7-4 7 4M5 9v10a1 1 0 001 1h12a1 1 0 001-1V9m-9 13l4-8m4 8l-4-8m0-5l7-4"})}),r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 hidden sm:inline max-w-[200px] truncate",children:t.householdName})]}),a&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>s(!1)}),r.jsx("div",{className:"fixed sm:absolute sm:right-0 sm:top-full sm:mt-2 inset-x-4 sm:inset-x-auto z-50 w-auto space-y-0",children:r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 max-w-lg sm:w-96 sm:max-w-none",children:r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:e("Current Household","Hogar Actual")}),r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700 mb-6",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center flex-shrink-0",children:r.jsx("svg",{className:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:t.householdName}),r.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:e("Active","Activo")})]}),r.jsx("svg",{className:"w-4 h-4 text-green-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),l?r.jsx("div",{className:"py-4 text-center text-gray-500 dark:text-gray-400",children:r.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mx-auto"})}):o.length>1?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:e("Other Households","Otros Hogares")}),r.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:o.map(h=>{var u,w;return h.householdId!==t.householdId&&r.jsxs("button",{onClick:()=>m(h.householdId,h.householdName),className:"w-full flex items-center gap-3 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors text-left",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-indigo-600 dark:text-indigo-300 font-semibold text-sm",children:((u=h.householdName)==null?void 0:u.charAt(0).toUpperCase())||"?"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"font-medium text-gray-900 dark:text-white text-sm",children:h.householdName}),r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[((w=h.members)==null?void 0:w.length)||0," ",e("members","miembros")]})]}),r.jsx("svg",{className:"w-5 h-5 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},h.householdId)})})]}):r.jsx("div",{className:"py-4 text-center text-gray-500 dark:text-gray-400 text-sm",children:r.jsx("p",{children:e("You are only a member of this household","Solo eres miembro de este hogar")})}),r.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:e("To join another household, accept the invitation through your email","Para unirte a otro hogar, acepta la invitacin a travs de tu correo")})})]})})})]})]}):null}function xh(){const e=g.useContext(Fm);if(!e)throw new Error("useNotifications must be used inside NotificationProvider");return e}function eb(e){const t=Date.now()-new Date(e).getTime(),n=Math.floor(t/6e4);if(n<1)return"just now";if(n<60)return`${n}m ago`;const a=Math.floor(n/60);return a<24?`${a}h ago`:new Date(e).toLocaleDateString()}const tb={invite:"",success:"",warning:"",error:"",info:""},Kc={invite:"bg-indigo-100 dark:bg-indigo-900/40",success:"bg-green-100 dark:bg-green-900/40",warning:"bg-yellow-100 dark:bg-yellow-900/40",error:"bg-red-100 dark:bg-red-900/40",info:"bg-gray-100 dark:bg-gray-700"};function rb(){const{notifications:e,unreadCount:t,markRead:n,markAllRead:a,removeNotification:s,clearAll:o,setInviteModalOpen:i}=xh(),{t:l}=ue(),[d,c]=g.useState(!1),m=g.useRef(null);g.useEffect(()=>{function u(w){m.current&&!m.current.contains(w.target)&&c(!1)}return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]);const h=u=>{n(u.id),i(!0),c(!1)};return r.jsxs("div",{className:"relative",ref:m,children:[r.jsxs("button",{onClick:()=>c(u=>!u),className:"relative p-2.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:l("Notifications","Notificaciones"),"aria-label":l("Notifications","Notificaciones"),children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),t>0&&r.jsx("span",{className:"absolute top-1 right-1 min-w-[18px] h-[18px] bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center px-1 leading-none shadow-sm",children:t>99?"99+":t})]}),d&&r.jsxs("div",{className:"absolute right-0 mt-2 w-80 sm:w-96 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 z-50 overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-100 dark:border-gray-700",children:[r.jsxs("h3",{className:"text-sm font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[l("Notifications","Notificaciones"),t>0&&r.jsxs("span",{className:"text-xs bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 dark:text-indigo-400 px-1.5 py-0.5 rounded-full font-semibold",children:[t," ",l("new","nuevos")]})]}),t>0&&r.jsx("button",{onClick:a,className:"text-xs text-indigo-500 hover:text-indigo-700 dark:text-indigo-400 dark:hover:text-indigo-300 font-medium transition-colors",children:l("Mark all read","Marcar todo ledo")})]}),r.jsx("div",{className:"max-h-[420px] overflow-y-auto divide-y divide-gray-50 dark:divide-gray-700/50",children:e.length===0?r.jsxs("div",{className:"py-12 text-center",children:[r.jsx("div",{className:"text-4xl mb-3",children:""}),r.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:l("You're all caught up!","Ests al da!")})]}):e.map(u=>r.jsxs("div",{className:`flex items-start gap-3 px-4 py-3.5 transition-colors ${u.read?"bg-white dark:bg-gray-800":"bg-indigo-50/60 dark:bg-indigo-900/10"}`,children:[r.jsx("div",{className:`flex-shrink-0 w-9 h-9 rounded-full flex items-center justify-center text-base ${Kc[u.type]||Kc.info}`,children:tb[u.type]||""}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:`text-sm font-semibold leading-tight ${u.read?"text-gray-500 dark:text-gray-400":"text-gray-900 dark:text-white"}`,children:u.title}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5 leading-snug",children:u.body}),r.jsxs("div",{className:"flex items-center gap-3 mt-1.5",children:[r.jsx("span",{className:"text-[11px] text-gray-400 dark:text-gray-500",children:eb(u.createdAt)}),u.type==="invite"&&r.jsx("button",{onClick:()=>h(u),className:"text-xs text-indigo-600 dark:text-indigo-400 font-semibold hover:underline",children:l("View Invitation ","Ver Invitacin ")})]})]}),r.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center gap-2 pt-0.5",children:[!u.read&&r.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 flex-shrink-0"}),r.jsx("button",{onClick:()=>s(u.id),className:"text-gray-300 hover:text-gray-500 dark:text-gray-600 dark:hover:text-gray-400 transition-colors mt-1",title:l("Dismiss","Descartar"),children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]},u.id))}),e.length>0&&r.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700 px-4 py-2.5 flex justify-end",children:r.jsx("button",{onClick:()=>{o(),c(!1)},className:"text-xs text-gray-400 hover:text-red-500 dark:hover:text-red-400 transition-colors",children:l("Clear all","Borrar todo")})})]})]})}function nb({onMobileMenuToggle:e}){var l,d;const{user:t}=_e(),[n,a]=g.useState(""),[s,o]=g.useState(!1),i=async()=>{o(!0);try{window.location.reload()}finally{o(!1)}};return r.jsx("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 transition-colors",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{onClick:e,className:"sm:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Toggle menu",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-700 dark:text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Dashboard"}),r.jsx(Zy,{}),r.jsxs("div",{className:"hidden md:block relative",children:[r.jsx("input",{value:n,onChange:c=>a(c.target.value),placeholder:"Search",className:"pl-3 pr-10 py-2 rounded-lg border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 dark:text-gray-100 w-72 focus:outline-none focus:ring-2 focus:ring-indigo-200 dark:focus:ring-indigo-500"}),r.jsx("button",{className:"absolute right-1 top-1 text-gray-400 dark:text-gray-500 p-1",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M12.9 14.32a8 8 0 111.414-1.414l4.387 4.387-1.414 1.414-4.387-4.387zM8 14a6 6 0 100-12 6 6 0 000 12z",clipRule:"evenodd"})})})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[r.jsx(rb,{}),r.jsx("button",{onClick:i,disabled:s,className:"p-2.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Refresh data",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-6 w-6 text-gray-600 dark:text-gray-400 transition-transform ${s?"animate-spin":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),r.jsxs("a",{href:"/settings/profile",className:"flex items-center space-x-3 hover:opacity-80 transition-opacity",title:"Account Settings",children:[r.jsxs("div",{className:"text-right hidden sm:block",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:(t==null?void 0:t.name)||"User"}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:(t==null?void 0:t.role)||"member"})]}),r.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-pink-500 to-yellow-400 flex items-center justify-center text-white font-bold",children:((d=(l=t==null?void 0:t.name)==null?void 0:l.charAt(0))==null?void 0:d.toUpperCase())||"U"})]})]})]})})}function Te({children:e}){const[t,n]=g.useState(!1);return r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex transition-colors",children:[r.jsx(Jy,{}),r.jsx(Xy,{isOpen:t,onClose:()=>n(!1)}),r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsx(nb,{onMobileMenuToggle:()=>n(!t)}),r.jsx("main",{className:"p-6 lg:p-8",children:e})]})]})}function ts({title:e,value:t,subtitle:n,accent:a,valueColor:s,linkTo:o,onClick:i}){const l=lt(),d=s||"text-gray-700 dark:text-gray-300",c=()=>{i?i():o&&l(o)},m=o||i;return r.jsx("div",{className:`bg-white dark:bg-gray-750 rounded-2xl p-4 sm:p-5 shadow-md border border-gray-200 dark:border-gray-700 ${m?"cursor-pointer hover:shadow-lg hover:border-gray-300 dark:hover:border-gray-600 transition-all":""}`,onClick:c,children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400",children:e}),r.jsx("p",{className:`mt-1 text-xl sm:text-2xl font-semibold ${d}`,children:t}),n&&r.jsx("p",{className:"mt-2 text-xs text-gray-400 dark:text-gray-500",children:n})]}),m&&r.jsxs("div",{className:"flex items-center gap-1 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 text-xs transition-colors",children:[r.jsx("span",{className:"hidden sm:inline",children:"View"}),r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})})}const Qc={groceries:"#10b981",transportation:"#f59e0b",utilities:"#3b82f6",entertainment:"#ec4899",healthcare:"#ef4444",dining:"#f97316",shopping:"#a855f7",insurance:"#06b6d4",childcare:"#14b8a6",maintenance_repairs:"#6366f1",other:"#6b7280"};function ab({expenses:e=[]}){const{t}=ue(),n={};e.forEach(o=>{const i=o.category||"other";n[i]=(n[i]||0)+(o.amount||0)});const a=Object.entries(n).sort((o,i)=>i[1]-o[1]).slice(0,6),s=Object.values(n).reduce((o,i)=>o+i,0);return s===0?r.jsxs("div",{className:"bg-white dark:bg-gray-750 rounded-2xl p-4 shadow-md border border-gray-200 dark:border-gray-700",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 mb-4",children:t("Spending by Category","Gastos por Categora")}),r.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400 text-sm",children:t("No spending data yet","Sin datos de gastos an")})]}):r.jsxs("div",{className:"bg-white dark:bg-gray-750 rounded-2xl p-4 shadow-md border border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:t("Spending by Category","Gastos por Categora")}),r.jsxs("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["$",s.toFixed(2)]})]}),r.jsx("div",{className:"space-y-3",children:a.map(([o,i])=>{const l=i/s*100,d=Qc[o]||Qc.other;return r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[r.jsx("span",{className:"text-gray-700 dark:text-gray-300 capitalize",children:o.replace(/_/g," ")}),r.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white",children:["$",i.toFixed(2)," ",r.jsxs("span",{className:"text-gray-400 dark:text-gray-500",children:["(",l.toFixed(0),"%)"]})]})]}),r.jsx("div",{className:"w-full bg-gray-100 dark:bg-gray-700 rounded-full h-2 overflow-hidden",children:r.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${l}%`,backgroundColor:d}})})]},o)})}),Object.keys(n).length>6&&r.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-200 dark:border-gray-600 text-xs text-gray-500 dark:text-gray-400",children:["+",Object.keys(n).length-6," ",t("more categories","ms categoras")]})]})}function Jc(){return r.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}function sb(){const{pendingInvites:e,login:t,user:n,token:a}=_e(),{inviteModalOpen:s,setInviteModalOpen:o}=xh(),{t:i}=ue(),[l,d]=g.useState(null),[c,m]=g.useState(null);if(!e||e.length===0||!s)return null;const h=e[0],u=async()=>{var f,k;d("accept"),m(null);try{const x=await O.post(`/households/invite/accept/${h.inviteToken}`),b=e.slice(1);x.data.household?t({...n,householdId:x.data.household.householdId,householdName:x.data.household.householdName},a,b):t(n,a,b)}catch(x){m(((k=(f=x.response)==null?void 0:f.data)==null?void 0:k.error)||i("Failed to accept invite","Error al aceptar invitacin"))}finally{d(null)}},w=async()=>{var f,k;d("decline"),m(null);try{await O.post(`/households/invite/decline/${h.inviteToken}`),t(n,a,e.slice(1))}catch(x){m(((k=(f=x.response)==null?void 0:f.data)==null?void 0:k.error)||i("Failed to decline invite","Error al rechazar invitacin"))}finally{d(null)}},p=r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm z-[9998]",onClick:()=>o(!1)}),r.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 pointer-events-none",children:r.jsxs("div",{className:"pointer-events-auto w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-indigo-200 dark:border-indigo-700 overflow-hidden",children:[r.jsx("div",{className:"h-1.5 bg-gradient-to-r from-indigo-500 via-purple-500 to-blue-500"}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-xl",children:""}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-base font-bold text-gray-900 dark:text-white",children:i("Household Invitation","Invitacin del Hogar")}),e.length>1&&r.jsxs("p",{className:"text-xs text-indigo-500 dark:text-indigo-400 font-medium",children:[e.length," ",i("pending invitations","invitaciones pendientes")]})]})]}),r.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"Dismiss",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),r.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 rounded-xl p-4 mb-4",children:[r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:h.invitedByName||"Someone"})," ",i("invited you to join","te invit a unirte a")]}),r.jsx("p",{className:"text-xl font-bold text-indigo-600 dark:text-indigo-400 mt-1",children:h.householdName}),r.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:[i("Expires","Expira")," ",new Date(h.expiresAt||Date.now()).toLocaleDateString()]})]}),c&&r.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 rounded-lg text-sm",children:c}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:w,disabled:!!l,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 font-medium text-sm transition-colors disabled:opacity-60",children:l==="decline"?r.jsx(Jc,{}):i("Decline","Rechazar")}),r.jsx("button",{onClick:u,disabled:!!l,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl bg-indigo-600 hover:bg-indigo-700 text-white font-medium text-sm transition-colors disabled:opacity-60 shadow-md shadow-indigo-200 dark:shadow-indigo-900/40",children:l==="accept"?r.jsx(Jc,{}):i("Accept","Aceptar")})]}),r.jsx("p",{className:"text-center text-xs text-gray-400 dark:text-gray-500 mt-3",children:i("Click outside to dismiss  find it again in the  bell","Haz clic fuera para cerrar  encuntralo en la  campana")})]})]})})]});return Sm.createPortal(p,document.body)}const ob=(e,t)=>!e||!Array.isArray(e)?0:e.filter(n=>n.userId!==t).reduce((n,a)=>n+(a.incomePercentage||0),0),ib=["utilities","rent_mortgage","groceries","transportation","insurance","childcare","entertainment","healthcare","maintenance_repairs","other"];function ph({member:e,householdId:t,allMembers:n,onClose:a,onSave:s}){const{t:o}=ue(),[i,l]=g.useState([]),[d,c]=g.useState(0),[m,h]=g.useState(0),[u,w]=g.useState("member"),[p,f]=g.useState(!1),[k,x]=g.useState(null);g.useEffect(()=>{e&&(l(e.responsibilities||[]),c(e.incomePercentage||0),h(e.incomeAmount||0),w(e.role||"member"))},[e]);const b=j=>{i.includes(j)?l(i.filter(N=>N!==j)):l([...i,j])},y=async()=>{var j,N;f(!0),x(null);try{await O.patch(`/households/${t}/members/${e.userId}`,{role:u,responsibilities:i,incomePercentage:d,incomeAmount:m}),s({...e,role:u,responsibilities:i,incomePercentage:d,incomeAmount:m}),a()}catch(E){console.error("[MemberDetailsModal] Error saving:",E),x(((N=(j=E.response)==null?void 0:j.data)==null?void 0:N.error)||o("Failed to save","Error al guardar"))}finally{f(!1)}},v=ob(n,e==null?void 0:e.userId),S=v+d,C=100-v,P=S>100;return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto shadow-lg",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:o("Member Details","Detalles del Miembro")}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e==null?void 0:e.name})]}),r.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[k&&r.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900 border border-red-300 dark:border-red-700 rounded-lg text-red-700 dark:text-red-300 text-sm",children:k}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:o("Role","Funcin")}),r.jsxs("select",{value:u,onChange:j=>w(j.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[r.jsx("option",{value:"owner",children:o("Owner","Propietario")}),r.jsx("option",{value:"co-owner",children:o("Co-Owner (Spouse)","Co-Propietario (Cnyuge)")}),r.jsx("option",{value:"manager",children:o("Manager","Gerente")}),r.jsx("option",{value:"member",children:o("Member","Miembro")}),r.jsx("option",{value:"viewer",children:o("Viewer","Observador")})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:u==="owner"?o("Full access, can manage all members and household settings","Acceso completo, puede administrar todos los miembros y configuracin"):u==="co-owner"?o("Equal permissions as owner (for spouses or partners)","Permisos iguales al propietario (para cnyuges o parejas)"):u==="manager"?o("Can add expenses for any member and manage household","Puede agregar gastos para cualquier miembro y administrar el hogar"):u==="viewer"?o("Can only view household data","Solo puede ver datos del hogar"):o("Can only add expenses for themselves","Solo puede agregar gastos para ellos mismos")})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o("Income Percentage","Porcentaje de Ingresos"),v>0&&r.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:["(",v,"% ",o("already assigned","ya asignado"),")"]})]}),r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("input",{type:"range",min:"0",max:C,value:d,onChange:j=>c(Number(j.target.value)),className:"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer"}),r.jsx("div",{className:`w-16 px-3 py-2 rounded-lg text-center ${P?"bg-red-100 dark:bg-red-900":"bg-gray-100 dark:bg-gray-700"}`,children:r.jsxs("span",{className:`text-sm font-semibold ${P?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"}`,children:[d,"%"]})})]}),r.jsxs("div",{className:"mb-3",children:[r.jsx("div",{className:"flex items-center gap-2 mb-1",children:r.jsxs("div",{className:"flex-1 bg-gray-100 dark:bg-gray-700 rounded-full h-3 overflow-hidden",children:[r.jsx("div",{className:"h-full bg-green-500 transition-all",style:{width:`${Math.min(v,100)}%`}}),r.jsx("div",{className:`h-full ${P?"bg-red-500":"bg-blue-500"} transition-all`,style:{width:`${Math.min(d,C)}%`}})]})}),r.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{children:[" ",o("Other members","Otros miembros"),": ",v,"%"]}),r.jsxs("span",{children:[" ",e==null?void 0:e.name,": ",d,"%"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:P?"text-red-600 dark:text-red-400 font-semibold":"",children:[o("Total","Total"),": ",S,"%"]}),r.jsxs("span",{children:[o("Available","Disponible"),": ",C,"%"]})]})]})]}),P&&r.jsx("div",{className:"mb-3 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg",children:r.jsxs("p",{className:"text-sm text-red-700 dark:text-red-400",children:[" ",o("Income total exceeds 100%","El ingreso total excede el 100%"),". ",o("Maximum for this member","Mximo para este miembro"),": ",C,"%"]})}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:o("Percentage of household income expected from this member","Porcentaje de ingresos del hogar esperado de este miembro")})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o("Income Amount","Monto de Ingresos")," (Optional)"]}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:m,onChange:j=>h(Number(j.target.value)),placeholder:o("Enter amount","Ingrese la cantidad"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:o("Specific amount if different from percentage","Cantidad especfica si es diferente del porcentaje")})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:o("Responsibilities","Responsabilidades")}),r.jsx("div",{className:"space-y-2",children:ib.map(j=>r.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:i.includes(j),onChange:()=>b(j),className:"w-4 h-4 rounded border-gray-300 dark:border-gray-600 text-indigo-600 focus:ring-indigo-500"}),r.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:o(j.replace(/_/g," "),j.replace(/_/g," "))})]},j))})]}),r.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:[r.jsx("h4",{className:"text-sm font-medium text-blue-900 dark:text-blue-300 mb-2",children:o("Summary","Resumen")}),r.jsxs("ul",{className:"text-sm text-blue-800 dark:text-blue-400 space-y-1",children:[r.jsxs("li",{children:[" ",o("Income Contribution","Contribucin de Ingresos"),": ",d,"%",m>0?` ($${m.toFixed(2)})`:""]}),r.jsxs("li",{children:[" ",o("Responsibilities","Responsabilidades"),": ",i.length>0?i.join(", ").replace(/_/g," "):o("None assigned","Ninguna asignada")]})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700 sticky bottom-0 bg-white dark:bg-gray-800",children:[r.jsx("button",{onClick:a,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:o("Cancel","Cancelar")}),r.jsx("button",{onClick:y,disabled:p,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:p?o("Saving...","Guardando..."):o("Save","Guardar")})]})]})})}function lb(){var ge,G,ne,ve,de,ke;const{user:e,logout:t}=_e(),n=lt(),{t:a,language:s}=ue(),[o,i]=g.useState(null),[l,d]=g.useState(0),[c,m]=g.useState([]),[h,u]=g.useState([]),[w,p]=g.useState([]),[f,k]=g.useState(null),[x,b]=g.useState([]),[y,v]=g.useState([]),[S,C]=g.useState([]),[P,j]=g.useState(!0),[N,E]=g.useState(null),[L,D]=g.useState([]),[M,K]=g.useState(null),[ae,Z]=g.useState([]),[_,T]=g.useState(null),[F,B]=g.useState([]),U=g.useCallback(async()=>{var V,ce,re,le;if(!(e!=null&&e.householdId)){console.log("[Dashboard] fetchData called but no user.householdId, skipping");return}console.log("[Dashboard] FETCHING DATA - householdId:",e.householdId,"householdName:",e.householdName);try{const we=new Date,I=`${we.getFullYear()}-${String(we.getMonth()+1).padStart(2,"0")}`;console.log("[Dashboard] Making API calls with householdId:",e.householdId);const[$,Y,se,Ne,me,xe,pe,oe]=await Promise.all([O.get(`/households/${e.householdId}/summary`).catch(Q=>{var J;return console.error("[Dashboard] Summary failed for householdId:",e.householdId,(J=Q.response)==null?void 0:J.status,Q.message),null}),O.get(`/fixed-expenses/${e.householdId}`).catch(Q=>{var J;return console.error("[Dashboard] Fixed expenses failed for householdId:",e.householdId,(J=Q.response)==null?void 0:J.status,Q.message),null}),O.get(`/fixed-expense-payments/${e.householdId}?month=${I}`).catch(Q=>{var J;return console.error("[Dashboard] Payments failed for householdId:",e.householdId,(J=Q.response)==null?void 0:J.status,Q.message),null}),O.get(`/goals/${e.householdId}`).catch(Q=>{var J;return console.error("[Dashboard] Goals failed for householdId:",e.householdId,(J=Q.response)==null?void 0:J.status,Q.message),null}),O.get(`/credit-cards/${e.householdId}`).catch(Q=>{var J;return console.error("[Dashboard] Credit cards failed for householdId:",e.householdId,(J=Q.response)==null?void 0:J.status,Q.message),null}),O.get(`/income/${e.householdId}`).catch(Q=>{var J;return console.error("[Dashboard] Income failed for householdId:",e.householdId,(J=Q.response)==null?void 0:J.status,Q.message),null}),O.get(`/expenses/${e.householdId}`).catch(Q=>{var J;return console.error("[Dashboard] Variable expenses failed for householdId:",e.householdId,(J=Q.response)==null?void 0:J.status,Q.message),null}),O.get("/subscription").catch(()=>null)]),[be,Ee]=await Promise.all([O.get(`/households/${e.householdId}`).catch(Q=>{var J;return console.error("[Dashboard] Household fetch failed for householdId:",e.householdId,(J=Q.response)==null?void 0:J.status,Q.message),null}),O.get(`/households/${e.householdId}/invites`).catch(Q=>{var J;return console.error("[Dashboard] Invites fetch failed for householdId:",e.householdId,(J=Q.response)==null?void 0:J.status,Q.message),null})]);if(console.log("[Dashboard] API responses received:",{summary:!!($!=null&&$.data),expenses:!!(Y!=null&&Y.data),payments:!!(se!=null&&se.data),goals:!!(Ne!=null&&Ne.data),creditCards:!!(me!=null&&me.data),household:!!(be!=null&&be.data),invites:!!(Ee!=null&&Ee.data)}),$!=null&&$.data&&i($.data),oe!=null&&oe.data&&T(oe.data),Y!=null&&Y.data&&d(Y.data.total||0),se!=null&&se.data&&(console.log("[Dashboard] Payments updated:",se.data.payments),m(se.data.payments||[])),Ne!=null&&Ne.data&&u(Ne.data.goals||[]),me!=null&&me.data&&(p(me.data.cards||[]),k(me.data.summary||null)),be!=null&&be.data&&E(be.data),Ee!=null&&Ee.data&&D(Ee.data.invites||[]),pe!=null&&pe.data&&Z(pe.data.expenses||[]),xe!=null&&xe.data&&(pe!=null&&pe.data)){const Q=xe.data.byMonth||{},J=pe.data.byMonth||{},he=new Set([...Object.keys(Q),...Object.keys(J)]),Oe=Array.from(he).sort().slice(-12),It=Oe.map(dt=>{const gt=Number(Q[dt]||0),xt=Number(J[dt]||0);return gt-xt});C(Oe),v(It)}const Ie=[];try{const J=((V=(await O.get("/plaid/transactions?limit=10")).data)==null?void 0:V.transactions)||[];B(J),J.forEach(he=>{Ie.push({type:"plaid",name:he.name||he.merchantName||"Bank Transaction",amount:Math.abs(he.amount),isCredit:he.amount<0,category:he.userCategory||he.primaryCategory||"Other",date:he.date,pending:he.isPending})})}catch{}(ce=xe==null?void 0:xe.data)!=null&&ce.incomes&&xe.data.incomes.slice(0,3).forEach(Q=>{const J=Array.isArray(Q.dailyBreakdown)?Q.dailyBreakdown[0]:null;Ie.push({type:"income",name:(J==null?void 0:J.source)||Q.contributorName||"Income",amount:Number(Q.weeklyTotal||0),date:(J==null?void 0:J.date)||Q.createdAt})}),(re=se==null?void 0:se.data)!=null&&re.payments&&se.data.payments.slice(0,3).forEach(Q=>{var J;Ie.push({type:"payment",name:((J=Q.fixedExpenseId)==null?void 0:J.name)||"Payment",amount:Q.amount,date:Q.paymentDate})}),(le=pe==null?void 0:pe.data)!=null&&le.expenses&&pe.data.expenses.slice(0,3).forEach(Q=>{Ie.push({type:"expense",name:Q.category||Q.description||"Expense",amount:Q.amount,date:Q.date})}),Ie.sort((Q,J)=>new Date(J.date)-new Date(Q.date)),b(Ie.slice(0,8)),j(!1)}catch(we){console.error("[Dashboard] fetch error:",we),j(!1)}},[e==null?void 0:e.householdId]);g.useEffect(()=>{console.log("[Dashboard] useEffect triggered - householdId:",e==null?void 0:e.householdId,"householdName:",e==null?void 0:e.householdName),i(null),E(null),D([]),m([]),v([]),Z([]),U()},[U,e==null?void 0:e.householdId]),g.useEffect(()=>{const V=()=>{document.hidden||(console.log("[Dashboard] Page came into focus, refetching data..."),U())};return document.addEventListener("visibilitychange",V),()=>document.removeEventListener("visibilitychange",V)},[U]);const q=()=>{if(!(N!=null&&N.members)||!(e!=null&&e.id))return null;const V=N.members.find(ce=>ce.userId===e.id);return V==null?void 0:V.role},R=()=>{const V=q();return["owner","co-owner"].includes(V)},H=()=>{R()?K((N==null?void 0:N.members)||[]):alert(a("You do not have permission to manage members","No tienes permiso para administrar miembros"))},ee=o?o.totalIncome-o.totalExpenses-l:0;return r.jsx(Te,{children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:[a("Welcome back","Bienvenido"),e!=null&&e.name?`, ${e.name}`:""]}),r.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:[a("Household","Hogar"),": ",(e==null?void 0:e.householdName)||""]})]}),_&&((G=(ge=_.subscription)==null?void 0:ge.plan)==null?void 0:G.type)==="free"&&r.jsxs("div",{className:"mb-5 flex items-center justify-between bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 border border-purple-200 dark:border-purple-800 rounded-xl px-4 py-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-xl",children:""}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-purple-900 dark:text-purple-300",children:"You're on the Free plan"}),r.jsx("p",{className:"text-xs text-purple-700 dark:text-purple-400",children:"Upgrade to unlock AI insights, full history, and more features."})]})]}),r.jsx(fe,{to:"/pricing",className:"shrink-0 px-4 py-1.5 bg-purple-600 hover:bg-purple-700 text-white text-xs font-bold rounded-lg transition-colors",children:"Upgrade"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[r.jsx(ts,{title:a("Total Income","Total de Ingresos"),value:o?`$${o.totalIncome.toFixed(2)}`:"$0.00",subtitle:a("This month","Este mes"),accent:"bg-green-500",linkTo:"/income"}),r.jsx(ts,{title:a("Fixed Expenses","Gastos Fijos"),value:`$${l.toFixed(2)}`,subtitle:a("Monthly bills","Facturas mensuales"),accent:"bg-red-500",linkTo:"/fixed-expenses"}),r.jsx(ts,{title:a("Variable Expenses","Gastos Variables"),value:o?`$${o.totalExpenses.toFixed(2)}`:"$0.00",subtitle:a("Other spending","Otros gastos"),accent:"bg-orange-500",linkTo:"/expenses"}),r.jsx(ts,{title:a("Available This Month","Disponible Este Mes"),value:`$${ee.toFixed(2)}`,subtitle:a("Monthly budget","Presupuesto mensual"),accent:ee<0?"bg-red-600":"bg-blue-500",valueColor:ee<0?"text-red-600":"text-gray-700 dark:text-gray-300"})]}),r.jsx(sb,{tasks:c}),r.jsxs("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 flex flex-col gap-4",children:[r.jsx(ab,{expenses:ae}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-md border border-gray-100 dark:border-gray-700 overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-100 dark:border-gray-700",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:a("Recent Activity","Actividad Reciente")}),r.jsxs("div",{className:"flex items-center gap-3",children:[F.length>0&&r.jsxs("span",{className:"text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 px-2 py-0.5 rounded-full font-medium",children:[" ",F.length," bank txns"]}),r.jsx(fe,{to:"/transactions/review",className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"View all "})]})]}),x.length===0?r.jsxs("div",{className:"text-center py-8 text-sm text-gray-400 dark:text-gray-500",children:[r.jsx("p",{children:"No recent activity yet."}),r.jsx(fe,{to:"/linked-accounts",className:"text-blue-500 hover:underline text-xs mt-1 inline-block",children:"Connect a bank account to see transactions "})]}):r.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:x.map((V,ce)=>{const re=V.type==="income"||V.type==="plaid"&&V.isCredit;return r.jsxs("div",{className:"flex items-center gap-3 px-4 py-2.5 hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors",children:[r.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${V.type==="income"?"bg-green-500":V.type==="payment"?"bg-blue-500":V.type==="plaid"?V.isCredit?"bg-emerald-500":"bg-rose-400":"bg-orange-400"}`}),r.jsx("div",{className:"w-14 shrink-0",children:r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:V.date?new Date(V.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}):""})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-100 truncate",children:V.name}),V.type==="plaid"&&V.category&&r.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 truncate",children:[V.pending?" Pending  ":"",V.category]})]}),r.jsxs("span",{className:`text-sm font-semibold shrink-0 ${re?"text-green-600 dark:text-green-400":"text-red-500 dark:text-red-400"}`,children:[re?"+":"-","$",V.amount.toFixed(2)]})]},ce)})})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-md border border-gray-100 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:a("Goals & Funds","Metas y Fondos")}),r.jsx("a",{href:"/goals",className:"text-xs text-teal-600 dark:text-teal-400 hover:text-teal-700",children:a("View all","Ver todo")})]}),h.length===0?r.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500 py-3 text-center",children:a("No goals yet.","Sin objetivos an.")}):r.jsx("ul",{className:"space-y-3",children:h.slice(0,6).map(V=>{const ce=V._id||V.id,re=V.progressPercent!=null?V.progressPercent:V.target>0?Math.min(100,Math.round(V.currentBalance/V.target*100)):null;return r.jsxs("li",{children:[r.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400 mb-1",children:[r.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:V.name}),r.jsx("span",{children:re!=null?`${re}%`:`$${Number(V.currentBalance||0).toFixed(0)}`})]}),V.target>0&&r.jsx("div",{className:"w-full bg-gray-100 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden",children:r.jsx("div",{className:"h-1.5 rounded-full bg-teal-500 transition-all",style:{width:`${re}%`}})})]},ce)})})]})]}),r.jsxs("div",{className:"flex flex-col gap-4",children:[f&&f.cardCount>0&&r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-md border border-gray-100 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:a("Credit Card Debt","Deuda de Tarjetas")}),r.jsx("a",{href:"/credit-cards",className:"text-xs text-pink-600 dark:text-pink-400 hover:text-pink-700",children:a("View all","Ver todo")})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:a("Total Debt","Deuda Total")}),r.jsxs("span",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:["$",((ne=f.totalDebt)==null?void 0:ne.toFixed(2))||"0.00"]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400 mb-1",children:[r.jsx("span",{children:a("Paid Off","Pagado")}),r.jsxs("span",{className:"font-medium text-green-600 dark:text-green-400",children:[f.overallProgress||0,"%"]})]}),r.jsx("div",{className:"w-full bg-gray-100 dark:bg-gray-700 rounded-full h-2 overflow-hidden",children:r.jsx("div",{className:"h-2 rounded-full bg-green-500 transition-all",style:{width:`${f.overallProgress||0}%`}})}),r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["$",((ve=f.totalPaid)==null?void 0:ve.toFixed(2))||"0.00"," ",a("of","de")," $",((de=f.totalOriginal)==null?void 0:de.toFixed(2))||"0.00"]})]}),w.length>0&&w[0].dueDay&&r.jsxs("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-600 flex justify-between text-xs",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:a("Next Payment Due","Prximo Pago")}),r.jsxs("span",{className:"font-semibold text-orange-600 dark:text-orange-400",children:[a("Day","Da")," ",w[0].dueDay]})]})]})]}),r.jsx(fe,{to:"/insights",className:"block bg-gradient-to-br from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 rounded-2xl p-4 shadow-md transition-all group",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-bold text-white mb-1",children:" Smart Financial Insights"}),r.jsx("p",{className:"text-xs text-purple-200",children:"View spending analysis & recommendations "})]}),r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-purple-200 group-hover:text-white transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m1.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})]})}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-md border border-gray-100 dark:border-gray-700",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 mb-3",children:a("Fixed Expenses This Month","Gastos Fijos Este Mes")}),(()=>{const V=c.reduce((le,we)=>le+(Number(we.amount)||0),0),ce=Math.max(0,l-V),re=l>0?Math.round(V/l*100):0;return r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400 mb-1",children:[r.jsx("span",{children:a("Paid","Pagado")}),r.jsxs("span",{className:"font-medium text-green-600 dark:text-green-400",children:["$",V.toFixed(2)]})]}),r.jsx("div",{className:"w-full bg-gray-100 dark:bg-gray-700 rounded-full h-2 overflow-hidden",children:r.jsx("div",{className:"h-2 rounded-full bg-green-500 transition-all",style:{width:`${re}%`}})}),r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[re,"% ",a("of","de")," $",l.toFixed(2)]})]}),r.jsx("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-600",children:r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:a("Remaining to Pay","Por Pagar")}),r.jsxs("span",{className:`font-semibold ${ce>0?"text-orange-600 dark:text-orange-400":"text-green-600 dark:text-green-400"}`,children:["$",ce.toFixed(2)]})]})})]})})()]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-md border border-gray-100 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:a("Household","Hogar")}),r.jsx("button",{onClick:()=>n("/members"),className:"text-xs px-3 py-1 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:a("Manage","Gestionar")})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("button",{onClick:H,disabled:!R(),className:`w-full flex items-center justify-between p-2.5 rounded-lg transition-colors ${R()?"bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer":"bg-gray-100 dark:bg-gray-700 cursor-not-allowed opacity-60"}`,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-7 h-7 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center",children:r.jsx("span",{className:"text-blue-600 dark:text-blue-400 text-xs",children:""})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:a("Members","Miembros")}),r.jsx("div",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:((ke=N==null?void 0:N.members)==null?void 0:ke.length)||0})]})]}),r.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),L.length>0&&r.jsxs("div",{className:"flex items-center gap-2 p-2.5 bg-yellow-50 dark:bg-yellow-900 rounded-lg border border-yellow-200 dark:border-yellow-700",children:[r.jsx("div",{className:"w-7 h-7 rounded-full bg-yellow-100 dark:bg-yellow-800 flex items-center justify-center",children:r.jsx("span",{className:"text-yellow-600 dark:text-yellow-400 text-xs",children:""})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:a("Pending Invites","Invitaciones Pendientes")}),r.jsx("div",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:L.length})]})]}),r.jsx("button",{onClick:()=>n("/members"),className:"w-full px-3 py-1.5 bg-indigo-50 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-300 rounded-lg hover:bg-indigo-100 dark:hover:bg-indigo-800 transition-colors text-xs font-medium",children:a("+ Invite Members","+ Invitar Miembros")})]})]})]})]}),M&&typeof M=="object"&&!Array.isArray(M)&&r.jsx(ph,{member:M,householdId:e==null?void 0:e.householdId,allMembers:N==null?void 0:N.members,onClose:()=>K(null),onSave:V=>{E(ce=>({...ce,members:ce.members.map(re=>re.userId===V.userId?V:re)}))}}),Array.isArray(M)&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto shadow-lg",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:a("Household Members","Miembros del Hogar")}),r.jsx("button",{onClick:()=>K(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"space-y-3",children:M.map((V,ce)=>{var re;return r.jsxs("button",{onClick:()=>K(V),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors text-left",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-indigo-600 dark:text-indigo-300 font-semibold text-sm",children:((re=V.name)==null?void 0:re.charAt(0).toUpperCase())||"?"})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:V.name||"Member"}),r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:V.email||""}),V.incomePercentage>0&&r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[a("Income","Ingresos"),": ",V.incomePercentage,"%"]})]})]}),r.jsx("svg",{className:"w-5 h-5 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},ce)})})})]})})]})})}function db({householdId:e,onCreated:t}){const{t:n}=ue(),[a,s]=g.useState(""),[o,i]=g.useState("Salary"),[l,d]=g.useState(""),[c,m]=g.useState(""),[h,u]=g.useState("current"),[w,p]=g.useState(""),[f,k]=g.useState([]),[x,b]=g.useState(!1),[y,v]=g.useState(null);g.useEffect(()=>{(async()=>{var j;if(e)try{console.log("[IncomeForm] fetching household members for:",e);const E=((j=(await O.get(`/households/${e}`)).data)==null?void 0:j.members)||[];console.log("[IncomeForm] members fetched:",E),k(E),E.length>0&&!w&&p(E[0].name)}catch(N){console.error("[IncomeForm] fetch members error:",N)}})()},[e]);const S=()=>{s(""),i("Salary"),d(""),m(""),u("current"),v(null)},C=async P=>{var j,N,E;if(P.preventDefault(),v(null),!e)return v(n("No household selected","Sin hogar seleccionado"));if(!a||Number(a)<=0)return v(n("Enter a valid amount","Ingresa un monto vlido"));if(!w)return v(n("Please select a household member","Por favor selecciona un miembro del hogar"));b(!0);try{const L={amount:Number(a),source:o,description:l,contributorName:w};if(h&&h!=="current"){const K=Number(h.replace("wk",""))||void 0;K&&(L.week=K),c&&(L.date=c)}else L.week="current";console.log("[IncomeForm] submitting payload:",L,"householdId:",e);const D=await O.post(`/income/${e}/daily`,L);console.log("[IncomeForm] response:",D&&D.data);const M=D.data.income||{id:D.data.id,...L};t&&t(M),S()}catch(L){console.error("[IncomeForm] submit error:",L,(j=L==null?void 0:L.response)==null?void 0:j.data),v(((E=(N=L==null?void 0:L.response)==null?void 0:N.data)==null?void 0:E.error)||n("Failed to create income","Error al registrar ingreso"))}finally{b(!1)}};return r.jsxs("form",{onSubmit:C,className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-md border border-gray-100 dark:border-gray-700",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:n("Member","Miembro")}),r.jsxs("select",{value:w,onChange:P=>p(P.target.value),className:"mt-1 w-full p-2 border rounded-lg",children:[r.jsxs("option",{value:"",children:["-- ",n("Select","Seleccionar")," --"]}),f.map(P=>r.jsx("option",{value:P.name,children:P.name},P.userId))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:n("Amount","Monto")}),r.jsx("input",{value:a,onChange:P=>s(P.target.value),placeholder:"0.00",type:"number",step:"0.01",className:"mt-1 w-full p-2 border rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:n("Source","Fuente")}),r.jsxs("select",{value:o,onChange:P=>i(P.target.value),className:"mt-1 w-full p-2 border rounded-lg",children:[r.jsx("option",{value:"Salary",children:n("Salary","Salario")}),r.jsx("option",{value:"Freelance",children:n("Freelance","Freelance")}),r.jsx("option",{value:"Interest",children:n("Interest","Inters")}),r.jsx("option",{value:"Other",children:n("Other","Otro")})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:n("Description","Descripcin")}),r.jsx("input",{value:l,onChange:P=>d(P.target.value),placeholder:n("e.g., Client payment","p.ej., Pago de cliente"),className:"mt-1 w-full p-2 border rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:n("Week","Semana")}),r.jsxs("select",{value:h,onChange:P=>u(P.target.value),className:"mt-1 w-full p-2 border rounded-lg",children:[r.jsx("option",{value:"current",children:n("Current","Actual")}),r.jsx("option",{value:"wk1",children:n("Wk1","Sem1")}),r.jsx("option",{value:"wk2",children:n("Wk2","Sem2")}),r.jsx("option",{value:"wk3",children:n("Wk3","Sem3")}),r.jsx("option",{value:"wk4",children:n("Wk4","Sem4")}),r.jsx("option",{value:"wk5",children:n("Wk5","Sem5")})]})]})]}),h&&h!=="current"&&r.jsxs("div",{className:"mt-4",children:[r.jsx("label",{className:"block text-xs text-gray-500",children:n("Optional: Pick a specific date within this week","Opcional: Elige una fecha especfica en esta semana")}),r.jsx("input",{type:"date",value:c,onChange:P=>m(P.target.value),className:"mt-1 w-full max-w-xs p-2 border rounded-lg"})]}),y&&r.jsx("div",{className:"text-sm text-red-500 mt-3",children:y}),r.jsx("div",{className:"mt-4 text-right",children:r.jsx("button",{type:"submit",disabled:x,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-60",children:x?n("Saving...","Guardando..."):n("Add Income","Agregar Ingreso")})})]})}function cb({income:e,members:t=[],onSave:n,onClose:a}){var x,b,y;const{t:s}=ue(),[o,i]=g.useState((e==null?void 0:e.amount)||Array.isArray(e==null?void 0:e.dailyBreakdown)&&((x=e==null?void 0:e.dailyBreakdown[0])==null?void 0:x.amount)||0),[l,d]=g.useState((e==null?void 0:e.contributorName)||""),[c,m]=g.useState((e==null?void 0:e.source)||Array.isArray(e==null?void 0:e.dailyBreakdown)&&((b=e==null?void 0:e.dailyBreakdown[0])==null?void 0:b.source)||"Salary"),[h,u]=g.useState((e==null?void 0:e.description)||Array.isArray(e==null?void 0:e.dailyBreakdown)&&((y=e==null?void 0:e.dailyBreakdown[0])==null?void 0:y.description)||""),[w,p]=g.useState(!1),f=["Salary","Freelance","Interest","Other"],k=async v=>{v.preventDefault(),p(!0);try{const S={amount:Number(o),contributorName:l,source:c,description:h};await n(S)}finally{p(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-2xl max-w-md w-full",children:[r.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-white",children:s("Edit Income Entry","Editar Entrada de Ingreso")}),r.jsxs("form",{onSubmit:k,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-300",children:s("Amount","Monto")}),r.jsx("input",{type:"number",step:"0.01",value:o,onChange:v=>i(v.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-300",children:s("Contributor Name","Nombre del Contribuyente")}),r.jsxs("select",{value:l,onChange:v=>d(v.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",children:[r.jsxs("option",{value:"",children:["-- ",s("Select","Seleccionar")," --"]}),t.map(v=>r.jsx("option",{value:v.name,children:v.name},v.userId||v.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-300",children:s("Source","Fuente")}),r.jsx("select",{value:c,onChange:v=>m(v.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",children:f.map(v=>r.jsx("option",{value:v,children:s(v,v==="Salary"?"Salario":v==="Freelance"?"Freelance":v==="Interest"?"Inters":"Otro")},v))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-300",children:s("Description","Descripcin")}),r.jsx("input",{type:"text",value:h,onChange:v=>u(v.target.value),placeholder:s("Optional","Opcional"),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{type:"button",onClick:a,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:s("Cancel","Cancelar")}),r.jsx("button",{type:"submit",disabled:w,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-60 transition-colors",children:w?s("Saving...","Guardando..."):s("Save","Guardar")})]})]})]})})}function ub({householdId:e,entries:t=[],members:n=[],loading:a=!1,refresh:s}){const{t:o,language:i}=ue(),[l,d]=g.useState(null);console.log("[IncomeList] render entries count:",t.length,"loading:",a,"householdId:",e);const c=async u=>{var p,f,k;const w=u._id||u.id;if(!w)return console.error("[IncomeList] missing id for delete");if(!e)return console.error("[IncomeList] missing householdId for delete");if(window.confirm(o("Delete this income entry?","Eliminar esta entrada de ingreso?")))try{console.log("[IncomeList] deleting",{id:w,householdId:e}),await O.delete(`/income/${e}/${w}`),console.log("[IncomeList] delete success",w),s&&s()}catch(x){console.error("[IncomeList] delete error",x,(p=x==null?void 0:x.response)==null?void 0:p.data),alert(((k=(f=x==null?void 0:x.response)==null?void 0:f.data)==null?void 0:k.error)||o("Failed to delete","Error al eliminar"))}},m=u=>{d(u)},h=async u=>{var p,f,k;const w=l._id||l.id;if(!w)return console.error("[IncomeList] missing id for edit");if(!e)return console.error("[IncomeList] missing householdId for edit");try{console.log("[IncomeList] patching",{id:w,householdId:e,updates:u});const x=await O.patch(`/income/${e}/${w}`,u);console.log("[IncomeList] patch response",x&&x.data),d(null),s&&s()}catch(x){console.error("[IncomeList] patch error",x,(p=x==null?void 0:x.response)==null?void 0:p.data),alert(((k=(f=x==null?void 0:x.response)==null?void 0:f.data)==null?void 0:k.error)||o("Failed to update","Error al actualizar"))}};return r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-md border border-gray-100 dark:border-gray-700",children:[a?r.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:o("Loading","Cargando")}):t.length===0?r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:o("No income entries yet.","Sin entradas de ingresos an.")}):r.jsx("ul",{className:"space-y-3",children:t.map((u,w)=>{var y,v,S;const p=u._id||u.id||w;let f=0;typeof u.amount=="number"?f=u.amount:typeof u.dailyAmount=="number"?f=u.dailyAmount:Array.isArray(u.dailyBreakdown)&&u.dailyBreakdown.length&&(f=u.dailyBreakdown.reduce((C,P)=>C+(Number(P.amount)||0),0));let k=u.source||Array.isArray(u.dailyBreakdown)&&((y=u.dailyBreakdown[0])==null?void 0:y.source)||"Manual",x=u.contributorName||"Unknown";const b=u.date||Array.isArray(u.dailyBreakdown)&&((v=u.dailyBreakdown[0])==null?void 0:v.date)||null;return i==="es"&&(Array.isArray(u.dailyBreakdown)&&((S=u.dailyBreakdown[0])!=null&&S.source_es)&&(k=u.dailyBreakdown[0].source_es),u.contributorName_es&&(x=u.contributorName_es)),r.jsxs("li",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[k,"  ",r.jsx("span",{className:"text-indigo-600 dark:text-indigo-400",children:x})]}),r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[u.description||""," ",b?` ${new Date(b).toLocaleString()}`:""]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:["$",Number(f||0).toFixed(2)]}),r.jsx("button",{onClick:()=>m(u),className:"text-sm text-indigo-600",children:o("Edit","Editar")}),r.jsx("button",{onClick:()=>c(u),className:"text-sm text-red-600",children:o("Delete","Eliminar")})]})]},p)})}),r.jsx("div",{className:"mt-4 text-right",children:r.jsx("button",{onClick:()=>{console.log("[IncomeList] refresh clicked"),s&&s()},className:"text-sm text-indigo-600",children:o("Refresh","Actualizar")})}),l&&r.jsx(cb,{income:l,members:n,onSave:h,onClose:()=>d(null)})]})}function mb({title:e,entries:t=[],members:n=[],onClose:a}){const{t:s}=ue();return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[r.jsx("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e}),r.jsx("button",{onClick:a,className:"text-2xl text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]})}),r.jsxs("div",{className:"p-6",children:[t.length===0?r.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:s("No income entries for this period","Sin entradas de ingresos para este perodo")}):r.jsx("ul",{className:"space-y-4",children:t.map((o,i)=>{var u,w;const l=o._id||o.id||i;let d=0;typeof o.amount=="number"?d=o.amount:typeof o.dailyAmount=="number"?d=o.dailyAmount:Array.isArray(o.dailyBreakdown)&&o.dailyBreakdown.length&&(d=o.dailyBreakdown.reduce((p,f)=>p+(Number(f.amount)||0),0));const c=o.source||Array.isArray(o.dailyBreakdown)&&((u=o.dailyBreakdown[0])==null?void 0:u.source)||"Manual",m=o.date||Array.isArray(o.dailyBreakdown)&&((w=o.dailyBreakdown[0])==null?void 0:w.date)||null,h=o.contributorName||"Unknown";return r.jsxs("div",{className:"flex justify-between items-start bg-gray-50 dark:bg-gray-700 p-4 rounded-lg border border-gray-100 dark:border-gray-600",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[c,"  ",r.jsx("span",{className:"text-indigo-600 dark:text-indigo-400",children:h})]}),r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[o.description?`${o.description}`:"",m&&` ${o.description?"":""} ${new Date(m).toLocaleDateString()}`]})]}),r.jsx("div",{className:"text-right ml-4",children:r.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["$",Number(d||0).toFixed(2)]})})]},l)})}),t.length>0&&r.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"text-gray-600 dark:text-gray-400 font-medium",children:[s("Total","Total"),":"]}),r.jsxs("span",{className:"text-2xl font-bold text-indigo-600",children:["$",t.reduce((o,i)=>{let l=0;return typeof i.amount=="number"?l=i.amount:typeof i.dailyAmount=="number"?l=i.dailyAmount:Array.isArray(i.dailyBreakdown)&&i.dailyBreakdown.length&&(l=i.dailyBreakdown.reduce((d,c)=>d+(Number(c.amount)||0),0)),o+l},0).toFixed(2)]})]})})]}),r.jsx("div",{className:"sticky bottom-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 p-6",children:r.jsx("button",{onClick:a,className:"w-full px-4 py-2 bg-indigo-600 dark:bg-indigo-700 text-white rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-800 transition-colors font-medium",children:s("Close","Cerrar")})})]})})}function hb({householdId:e,onUpdate:t}){const{t:n}=ue(),[a,s]=g.useState([]),[o,i]=g.useState(null),[l,d]=g.useState(""),[c,m]=g.useState(!1);g.useEffect(()=>{h()},[e]);const h=async()=>{if(e)try{const f=await O.get(`/income-splits/${e}`);s(f.data.splits||[]),console.log("[IncomeSplitConfig] fetched splits:",f.data.splits)}catch(f){console.error("[IncomeSplitConfig] fetch error:",f)}},u=f=>{i(f),d(f.splitPercentage)},w=async()=>{var f,k;if(!l||Number(l)<0||Number(l)>100){alert(n("Enter a valid percentage between 0 and 100","Ingresa un porcentaje vlido entre 0 y 100"));return}m(!0);try{await O.patch(`/income-splits/${e}/${o.userId._id||o.userId}`,{splitPercentage:Number(l)}),i(null),await h(),t&&t()}catch(x){console.error("[IncomeSplitConfig] save error:",x),alert(((k=(f=x==null?void 0:x.response)==null?void 0:f.data)==null?void 0:k.error)||n("Failed to save","Error al guardar"))}finally{m(!1)}},p=a.reduce((f,k)=>f+(k.splitPercentage||0),0);return r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-md border border-gray-100 dark:border-gray-700",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4",children:n("Income Split Configuration","Configuracin de Divisin de Ingresos")}),r.jsx("div",{className:"space-y-3",children:a.map(f=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:f.userId.name||f.userName}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:f.isHeadOfHouse&&r.jsx("span",{className:"inline-block mr-2 px-2 py-0.5 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded-full",children:n("Head of House","Jefe de Hogar")})})]}),(o==null?void 0:o._id)===f._id?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"number",min:"0",max:"100",value:l,onChange:k=>d(k.target.value),className:"w-20 p-2 border rounded text-sm",placeholder:"%"}),r.jsx("span",{className:"text-sm",children:"%"}),r.jsx("button",{onClick:w,disabled:c,className:"px-3 py-1 bg-green-600 text-white rounded text-xs hover:bg-green-700 disabled:opacity-60",children:c?n("Saving...","Guardando..."):n("Save","Guardar")}),r.jsx("button",{onClick:()=>i(null),className:"px-3 py-1 bg-gray-400 text-white rounded text-xs hover:bg-gray-500",children:n("Cancel","Cancelar")})]}):r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"text-lg font-bold text-indigo-600 w-12 text-right",children:[f.splitPercentage,"%"]}),r.jsx("button",{onClick:()=>u(f),className:"text-xs text-indigo-600 hover:text-indigo-700",children:n("Edit","Editar")})]})]},f._id))}),r.jsxs("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:[r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:n("Total Split","Divisin Total")}),r.jsxs("span",{className:`font-bold ${p===100?"text-green-600 dark:text-green-400":"text-orange-600 dark:text-orange-400"}`,children:[p,"%"]})]}),p!==100&&r.jsx("div",{className:"text-xs text-orange-600 dark:text-orange-400 mt-1",children:n("Note: Total should equal 100%","Nota: El total debe ser 100%")})]})]})}function gb({householdId:e,fixedExpensesTotal:t=0,currentMonthIncome:n=[]}){const{t:a}=ue(),[s,o]=g.useState([]),[i,l]=g.useState(!1);g.useEffect(()=>{e&&d()},[e]);const d=async()=>{l(!0);try{const h=await O.get(`/income-splits/${e}`);o(h.data.splits||[])}catch(h){console.error("[IncomeSplitExpectations] fetch error:",h)}finally{l(!1)}},c=t/4.33,m={};return n.forEach(h=>{const u=h.contributedBy||"unassigned";m[u]||(m[u]=[]),m[u].push(h)}),i?r.jsx("div",{className:"text-gray-500",children:a("Loading...","Cargando...")}):r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-md border border-gray-100 dark:border-gray-700",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4",children:a("Income Expectations vs Actual","Expectativas de Ingresos vs Real")}),r.jsx("div",{className:"space-y-4",children:s.map(h=>{const u=c*(h.splitPercentage/100),p=(m[String(h.userId._id||h.userId)]||[]).reduce((b,y)=>b+(Number(y.amount)||0),0),f=Math.max(0,u-p),k=f>0,x=p>=u;return r.jsxs("div",{className:`p-4 rounded-lg border ${x?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-700":"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-700"}`,children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:h.userId.name||h.userName}),r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[h.splitPercentage,"% ",a("of fixed expenses","de gastos fijos")]})]})}),r.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-3",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded p-2 border border-gray-200 dark:border-gray-600",children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:a("Expected","Esperado")}),r.jsxs("div",{className:"text-lg font-bold text-indigo-600 dark:text-indigo-400",children:["$",u.toFixed(2)]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded p-2 border border-gray-200 dark:border-gray-600",children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:a("Actual","Real")}),r.jsxs("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["$",p.toFixed(2)]})]}),r.jsxs("div",{className:`rounded p-2 border ${k?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-700":"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-700"}`,children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:a("Short","Falta")}),r.jsxs("div",{className:`text-lg font-bold ${k?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:["$",f.toFixed(2)]})]})]}),k&&r.jsxs("div",{className:"text-xs text-red-600 dark:text-red-400 mt-2",children:[a("Still needs to contribute: $","An necesita contribuir: $"),f.toFixed(2)]}),x&&r.jsxs("div",{className:"text-xs text-green-600 dark:text-green-400 mt-2",children:[" ",a("Target met!","Meta alcanzada!")]})]},h._id)})}),r.jsxs("div",{className:"mt-4 p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg border border-indigo-200 dark:border-indigo-700 text-xs text-gray-600 dark:text-gray-300",children:[r.jsxs("div",{className:"font-semibold text-indigo-700 dark:text-indigo-400 mb-1",children:[a("Weekly Fixed Expenses Target","Meta Semanal de Gastos Fijos"),": $",c.toFixed(2)]}),r.jsxs("div",{className:"text-indigo-600 dark:text-indigo-400",children:[a("Based on: Total Fixed ($","Basado en: Total Fijo ($"),t.toFixed(2),a(")  4.33 weeks",")  4.33 semanas")]})]})]})}function xb({householdId:e}){const{t}=ue(),[n,a]=g.useState(null),[s,o]=g.useState(!1);g.useEffect(()=>{e&&i()},[e]);const i=async()=>{o(!0);try{const d=await O.get(`/households/${e}`);a(d.data)}catch(d){console.error("[HouseholdMembersWidget] Error fetching household:",d)}finally{o(!1)}};if(s)return r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-md border border-gray-100 dark:border-gray-700",children:r.jsxs("div",{className:"animate-pulse space-y-3",children:[r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/3"}),r.jsx("div",{className:"h-12 bg-gray-200 dark:bg-gray-700 rounded"})]})});if(!(n!=null&&n.members)||n.members.length===0)return null;const l=n.members.reduce((d,c)=>d+(c.incomePercentage||0),0);return r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-md border border-gray-100 dark:border-gray-700",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4",children:t("Household Members","Miembros del Hogar")}),r.jsx("div",{className:"space-y-3",children:n.members.map(d=>{var c;return r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-indigo-600 dark:text-indigo-300 font-semibold text-xs",children:((c=d.name)==null?void 0:c.charAt(0).toUpperCase())||"?"})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:d.name||"Member"}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:d.email||""})]})]}),r.jsx("div",{className:"flex items-center gap-2 ml-2 flex-shrink-0",children:d.incomePercentage>0?r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"text-lg font-bold text-indigo-600 dark:text-indigo-400",children:[d.incomePercentage,"%"]}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap",children:t("Income","Ingresos")})]}):r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-sm text-gray-400 dark:text-gray-500",children:""}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap",children:t("No split","Sin divisin")})]})})]},d.userId)})}),l!==100&&n.members.some(d=>d.incomePercentage>0)&&r.jsx("div",{className:"mt-4 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-700",children:r.jsxs("div",{className:"text-xs text-amber-800 dark:text-amber-200",children:[r.jsx("span",{className:"font-medium",children:t("Note:","Nota:")})," ",t("Income split total is {{total}}%",`El total de la divisin de ingresos es ${l}%`).replace("{{total}}",l)]})}),n.members.some(d=>d.responsibilities&&d.responsibilities.length>0)&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-3 uppercase",children:t("Responsibilities","Responsabilidades")}),r.jsx("div",{className:"space-y-2",children:n.members.map(d=>!d.responsibilities||d.responsibilities.length===0?null:r.jsxs("div",{className:"text-xs",children:[r.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[d.name,":"]}),r.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:d.responsibilities.map(c=>r.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded text-xs",children:c.replace(/_/g," ")},c))})]},d.userId))})]})]})}function Xc(){const{user:e}=_e(),{language:t,t:n}=ue(),[a,s]=g.useState([]),[o,i]=g.useState([]),[l,d]=g.useState([0,0,0,0]),[c,m]=g.useState(0),[h,u]=g.useState(0),[w,p]=g.useState(!1),[f,k]=g.useState(null),x=async()=>{var E;if(e!=null&&e.householdId){p(!0);try{const L=new Date,D=`${L.getFullYear()}-${String(L.getMonth()+1).padStart(2,"0")}`;console.log("[IncomePage] fetching month:",D,"householdId:",e.householdId,"lang:",t);const M=await O.get(`/income/${e.householdId}/${D}?lang=${t}`);console.log("[IncomePage] fetch response:",M&&M.data);const K=M.data.income||[];s(K),d(M.data.weeklyTotals||[0,0,0,0]),m(M.data.total||0)}catch(L){console.error("[IncomePage] Failed to load incomes",L,(E=L==null?void 0:L.response)==null?void 0:E.data)}finally{p(!1)}}},b=async()=>{var E;if(e!=null&&e.householdId)try{const D=((E=(await O.get(`/households/${e.householdId}`)).data)==null?void 0:E.members)||[];i(D)}catch(L){console.error("[IncomePage] fetch members error:",L)}},y=async()=>{if(e!=null&&e.householdId)try{const E=await O.get(`/fixed-expenses/${e.householdId}`);u(E.data.total||0)}catch(E){console.error("[IncomePage] fetch fixed expenses error:",E)}};g.useEffect(()=>{x(),b(),y()},[e,t]);const v=E=>{const L=[E,...a];s(L);const D=[0,0,0,0];L.forEach(K=>{const ae=Number(K.week)||1,Z=Math.min(3,Math.max(0,ae-1)),_=Number(K.weeklyTotal)||0;D[Z]+=_});const M=D.reduce((K,ae)=>K+ae,0);d(D),m(M)},C=Math.min(4,Math.ceil(new Date().getDate()/7)),P=a.filter(E=>Number(E.week)===Number(C)),j=()=>f==="month"?a:f&&typeof f=="number"?a.filter(E=>Number(E.week)===Number(f)):[],N=()=>{if(f==="month"){const L=new Date().toLocaleString(t==="es"?"es-ES":"en-US",{month:"long",year:"numeric"});return t==="es"?`Todos los Ingresos - ${L}`:`All Income - ${L}`}else if(f&&typeof f=="number")return t==="es"?`Ingresos Semana ${f}`:`Week ${f} Income`;return""};return r.jsx(Te,{children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n("Add Income","Agregar Ingreso")}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:n("Quickly log daily income for your household.","Registra los ingresos diarios de tu hogar.")})]}),r.jsxs("a",{href:"/linked-accounts",className:"flex items-center gap-3 mb-6 px-4 py-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/40 transition-colors group",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-semibold text-blue-800 dark:text-blue-300",children:"Link your bank account"}),r.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Automatically sync transactions instead of entering them manually"})]}),r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-blue-500 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),r.jsx(db,{householdId:e==null?void 0:e.householdId,onCreated:v}),r.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2",children:[r.jsx("h2",{className:"text-lg font-medium mb-3 text-gray-900 dark:text-white",children:n("This week","Esta semana")}),r.jsx(ub,{householdId:e==null?void 0:e.householdId,loading:w,entries:P,members:o,refresh:x})]}),r.jsxs("aside",{children:[r.jsx("h2",{className:"text-lg font-medium mb-3 text-gray-900 dark:text-white",children:n("This month","Este mes")}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{onClick:()=>k("month"),className:"bg-white dark:bg-gray-750 rounded-2xl p-4 shadow-md border border-gray-100 dark:border-gray-700 cursor-pointer hover:shadow-lg hover:border-indigo-300 dark:hover:border-indigo-500 transition-all",children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:n("Total Income","Total de Ingresos")}),r.jsxs("div",{className:"text-2xl font-semibold text-gray-700 dark:text-gray-300",children:["$",c.toFixed(2)]}),r.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:n("Click to view all","Clic para ver todo")})]})})}),r.jsxs("div",{className:"bg-white dark:bg-gray-750 rounded-2xl p-4 shadow-md border border-gray-100 dark:border-gray-700",children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium mb-2",children:n("Weekly totals","Totales semanales")}),r.jsx("div",{className:"grid grid-cols-4 gap-2 text-center text-sm",children:l.map((E,L)=>r.jsxs("div",{onClick:()=>k(L+1),className:"bg-gray-50 dark:bg-gray-700 p-3 rounded cursor-pointer hover:bg-indigo-100 dark:hover:bg-indigo-900 hover:text-indigo-700 dark:hover:text-indigo-300 transition-colors",children:[r.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:["W",L+1]}),r.jsxs("div",{className:"font-semibold text-gray-700 dark:text-gray-300",children:["$",Number(E||0).toFixed(2)]})]},L))})]})]})]})]}),r.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsx(gb,{householdId:e==null?void 0:e.householdId,fixedExpensesTotal:h,currentMonthIncome:a})}),r.jsxs("aside",{className:"space-y-6",children:[r.jsx(hb,{householdId:e==null?void 0:e.householdId,onUpdate:x}),r.jsx(xb,{householdId:e==null?void 0:e.householdId})]})]}),f&&r.jsx(mb,{title:N(),entries:j(),members:o,onClose:()=>k(null)})]})})}function pb({onScanComplete:e,onError:t}){const n=g.useRef(null),[a,s]=g.useState(!1),o=async i=>{var d,c,m;const l=(d=i.target.files)==null?void 0:d[0];if(l){i.target.value="",s(!0);try{const h=new FormData;h.append("receipt",l);const{data:u}=await O.post("/receipts/scan",h,{headers:{"Content-Type":"multipart/form-data"}});e&&e(u)}catch(h){const u=((m=(c=h.response)==null?void 0:c.data)==null?void 0:m.error)||"Receipt scan failed. Please try again.";t?t(u):console.warn("[ReceiptUpload]",u)}finally{s(!1)}}};return r.jsxs(r.Fragment,{children:[r.jsx("input",{ref:n,type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:o}),r.jsx("button",{type:"button",title:"Scan receipt",onClick:()=>{var i;return(i=n.current)==null?void 0:i.click()},disabled:a,className:"inline-flex items-center gap-1.5 px-3 py-2 text-sm font-medium text-indigo-700 bg-indigo-50 hover:bg-indigo-100 disabled:opacity-50 rounded-lg border border-indigo-200 transition-colors",children:a?r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Scanning"]}):r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Scan receipt"]})})]})}function fb({householdId:e,onCreated:t}){const{t:n}=ue(),{user:a}=_e(),[s,o]=g.useState(""),[i,l]=g.useState("Food"),[d,c]=g.useState(""),[m,h]=g.useState(""),[u,w]=g.useState([]),[p,f]=g.useState(!1),[k,x]=g.useState(null),[b,y]=g.useState(null),[v,S]=g.useState(null),[C,P]=g.useState(null),j=["Food","Groceries","Gas","Entertainment","Dining","Shopping","Utilities","Transportation","Medical","Other"];g.useEffect(()=>{(async()=>{var K;if(e)try{const Z=((K=(await O.get(`/households/${e}`)).data)==null?void 0:K.members)||[];w(Z);const _=Z.find(T=>T.userId===(a==null?void 0:a.id)||T.email===(a==null?void 0:a.email));_&&(y(_.role),["owner","manager"].includes(_.role)?Z.length>0&&!m&&h(Z[0].name):h(_.name))}catch(ae){console.error("[ExpenseForm] fetch members error:",ae)}})()},[e,a]);const N=M=>{S(M),P(null),M.amount&&o(String(M.amount)),M.category&&l(M.category),M.merchant&&c(M.merchant)},E=()=>{o(""),l("Food"),c(""),x(null),S(null),P(null)},L=async M=>{var K,ae,Z;if(M.preventDefault(),x(null),!e)return x(n("No household selected","Sin hogar seleccionado"));if(!s||Number(s)<=0)return x(n("Enter a valid amount","Ingresa un monto vlido"));if(!m)return x(n("Please select a household member","Por favor selecciona un miembro del hogar"));if(!d||d.trim()==="")return x(n("Description is required","La descripcin es requerida"));f(!0);try{const _={amount:Number(s),category:i,description:d,contributorName:m};console.log("[ExpenseForm] submitting payload:",_,"householdId:",e);const T=await O.post(`/expenses/${e}`,_);console.log("[ExpenseForm] response:",T&&T.data);const F=T.data.expense||{id:T.data.id,..._};t&&t(F),E()}catch(_){console.error("[ExpenseForm] submit error:",_,(K=_==null?void 0:_.response)==null?void 0:K.data),x(((Z=(ae=_==null?void 0:_.response)==null?void 0:ae.data)==null?void 0:Z.error)||n("Failed to create expense","Error al crear gasto"))}finally{f(!1)}},D=["owner","co-owner","manager"].includes(b);return r.jsxs(r.Fragment,{children:[!D&&r.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:[" ",n("You can only add expenses for yourself","Solo puedes agregar gastos para ti mismo"),".",n("Managers and owners can add expenses for other members.","Los gerentes y propietarios pueden agregar gastos para otros miembros.")]})}),r.jsxs("div",{className:"mb-3 flex items-center gap-3",children:[r.jsx(pb,{onScanComplete:N,onError:M=>P(M)}),v&&r.jsx("span",{className:"text-xs text-green-700 bg-green-50 border border-green-200 px-3 py-1.5 rounded-lg",children:" Receipt scanned  form pre-filled. Review & submit."}),C&&r.jsxs("span",{className:"text-xs text-red-600 bg-red-50 border border-red-200 px-3 py-1.5 rounded-lg",children:[" ",C]})]}),r.jsxs("form",{onSubmit:L,className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-md border border-gray-100 dark:border-gray-700",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:n("Member","Miembro")}),D?r.jsxs("select",{value:m,onChange:M=>h(M.target.value),className:"mt-1 w-full p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",children:[r.jsxs("option",{value:"",children:["-- ",n("Select","Seleccionar")," --"]}),u.map(M=>r.jsx("option",{value:M.name,children:M.name},M.userId))]}):r.jsx("input",{type:"text",value:m,disabled:!0,className:"mt-1 w-full p-2 border rounded-lg bg-gray-100 dark:bg-gray-700 dark:border-gray-600 cursor-not-allowed"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:n("Amount","Monto")}),r.jsx("input",{value:s,onChange:M=>o(M.target.value),placeholder:"0.00",type:"number",step:"0.01",className:"mt-1 w-full p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:n("Category","Categora")}),r.jsx("select",{value:i,onChange:M=>l(M.target.value),className:"mt-1 w-full p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",children:j.map(M=>r.jsx("option",{value:M,children:n(M,M==="Food"?"Comida":M==="Groceries"?"Compras":M==="Gas"?"Gasolina":M==="Entertainment"?"Entretenimiento":M==="Dining"?"Restaurantes":M==="Shopping"?"Compras":M==="Utilities"?"Servicios":M==="Transportation"?"Transporte":M==="Medical"?"Mdico":"Otro")},M))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:n("Description","Descripcin")}),r.jsx("input",{value:d,onChange:M=>c(M.target.value),placeholder:n("e.g., Whole Foods, Target, Shell","p.ej., Whole Foods, Target, Shell"),className:"mt-1 w-full p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]}),r.jsx("div",{className:"flex items-end",children:r.jsx("button",{type:"submit",disabled:p,className:"w-full px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-60 transition-colors",children:p?n("Saving...","Guardando..."):n("Add Expense","Agregar Gasto")})})]}),k&&r.jsx("div",{className:"text-sm text-red-500 mt-3",children:k})]})]})}function yb({expense:e,members:t=[],onSave:n,onClose:a}){const{t:s}=ue(),[o,i]=g.useState((e==null?void 0:e.amount)||0),[l,d]=g.useState((e==null?void 0:e.category)||"Food"),[c,m]=g.useState((e==null?void 0:e.description)||""),[h,u]=g.useState((e==null?void 0:e.contributorName)||""),[w,p]=g.useState(!1),f=["Food","Groceries","Gas","Entertainment","Dining","Shopping","Utilities","Transportation","Medical","Other"],k=async x=>{x.preventDefault(),p(!0);try{const b={amount:Number(o),category:l,description:c,contributorName:h};await n(b)}finally{p(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-2xl max-w-md w-full",children:[r.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-white",children:s("Edit Expense","Editar Gasto")}),r.jsxs("form",{onSubmit:k,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:s("Amount","Monto")}),r.jsx("input",{type:"number",step:"0.01",value:o,onChange:x=>i(x.target.value),className:"mt-1 w-full p-2 border rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:s("Category","Categora")}),r.jsx("select",{value:l,onChange:x=>d(x.target.value),className:"mt-1 w-full p-2 border rounded-lg",children:f.map(x=>r.jsx("option",{value:x,children:s(x,x==="Food"?"Comida":x==="Groceries"?"Compras":x==="Gas"?"Gasolina":x==="Entertainment"?"Entretenimiento":x==="Dining"?"Restaurantes":x==="Shopping"?"Compras":x==="Utilities"?"Servicios":x==="Transportation"?"Transporte":x==="Medical"?"Mdico":"Otro")},x))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:s("Description","Descripcin")}),r.jsx("input",{type:"text",value:c,onChange:x=>m(x.target.value),placeholder:s("e.g., Whole Foods, Target, Shell","p.ej., Whole Foods, Target, Shell"),className:"mt-1 w-full p-2 border rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:s("Member","Miembro")}),r.jsxs("select",{value:h,onChange:x=>u(x.target.value),className:"mt-1 w-full p-2 border rounded-lg",children:[r.jsxs("option",{value:"",children:["-- ",s("Select","Seleccionar")," --"]}),t.map(x=>r.jsx("option",{value:x.name,children:x.name},x.userId||x.id))]})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{type:"button",onClick:a,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:s("Cancel","Cancelar")}),r.jsx("button",{type:"submit",disabled:w,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-60 transition-colors",children:w?s("Saving...","Guardando..."):s("Save","Guardar")})]})]})]})})}function bb({householdId:e,entries:t=[],members:n=[],loading:a=!1,refresh:s}){const{t:o,language:i}=ue(),[l,d]=g.useState(null);console.log("[ExpenseList] render entries count:",t.length,"loading:",a);const c=async u=>{var p,f,k;const w=u._id||u.id;if(!w)return console.error("[ExpenseList] missing id for delete");if(!e)return console.error("[ExpenseList] missing householdId");if(window.confirm(o("Delete this expense?","Eliminar este gasto?")))try{console.log("[ExpenseList] deleting",{id:w,householdId:e}),await O.delete(`/expenses/${e}/${w}`),console.log("[ExpenseList] delete success",w),s&&s()}catch(x){console.error("[ExpenseList] delete error",x,(p=x==null?void 0:x.response)==null?void 0:p.data),alert(((k=(f=x==null?void 0:x.response)==null?void 0:f.data)==null?void 0:k.error)||o("Failed to delete","Error al eliminar"))}},m=u=>{d(u)},h=async u=>{var p,f,k;const w=l._id||l.id;if(!w)return console.error("[ExpenseList] missing id for edit");if(!e)return console.error("[ExpenseList] missing householdId");try{console.log("[ExpenseList] patching",{id:w,householdId:e,updates:u});const x=await O.patch(`/expenses/${e}/${w}`,u);console.log("[ExpenseList] patch response",x&&x.data),d(null),s&&s()}catch(x){console.error("[ExpenseList] patch error",x,(p=x==null?void 0:x.response)==null?void 0:p.data),alert(((k=(f=x==null?void 0:x.response)==null?void 0:f.data)==null?void 0:k.error)||o("Failed to update","Error al actualizar"))}};return r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-md border border-gray-100 dark:border-gray-700",children:[a?r.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:o("Loading","Cargando")}):t.length===0?r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:o("No expenses yet.","Sin gastos an.")}):r.jsx("ul",{className:"space-y-3",children:t.map((u,w)=>{const p=u._id||u.id||w,f=Number(u.amount)||0;let k=i==="es"&&u.category_es?u.category_es:u.category||"Other",x=i==="es"&&u.description_es?u.description_es:u.description||"";const b=u.date?new Date(u.date).toLocaleString():null,y=u.contributorName||"Unknown";return r.jsxs("li",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[k,"  ",r.jsx("span",{className:"text-orange-600 dark:text-orange-400",children:y})]}),r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[x," ",b?` ${b}`:""]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:["$",f.toFixed(2)]}),r.jsx("button",{onClick:()=>m(u),className:"text-sm text-indigo-600",children:o("Edit","Editar")}),r.jsx("button",{onClick:()=>c(u),className:"text-sm text-red-600",children:o("Delete","Eliminar")})]})]},p)})}),r.jsx("div",{className:"mt-4 text-right",children:r.jsx("button",{onClick:()=>{console.log("[ExpenseList] refresh clicked"),s&&s()},className:"text-sm text-indigo-600",children:o("Refresh","Actualizar")})}),l&&r.jsx(yb,{expense:l,members:n,onSave:h,onClose:()=>d(null)})]})}function vb(){const{user:e}=_e(),{t,language:n}=ue(),[a,s]=g.useState([]),[o,i]=g.useState([]),[l,d]=g.useState({}),[c,m]=g.useState(0),[h,u]=g.useState(!1),w=async()=>{var y;if(e!=null&&e.householdId){u(!0);try{const v=new Date,S=`${v.getFullYear()}-${String(v.getMonth()+1).padStart(2,"0")}`;console.log("[ExpensesPage] fetching month:",S,"householdId:",e.householdId,"lang:",n);const C=await O.get(`/expenses/${e.householdId}/${S}?lang=${n}`);console.log("[ExpensesPage] fetch response:",C&&C.data);const P=C.data.expenses||[];s(P),d(C.data.byCategory||{}),m(C.data.total||0)}catch(v){console.error("[ExpensesPage] Failed to load expenses",v,(y=v==null?void 0:v.response)==null?void 0:y.data)}finally{u(!1)}}},p=async()=>{var y;if(e!=null&&e.householdId)try{const S=((y=(await O.get(`/households/${e.householdId}`)).data)==null?void 0:y.members)||[];i(S)}catch(v){console.error("[ExpensesPage] fetch members error:",v)}};g.useEffect(()=>{w(),p()},[e,n]);const f=y=>{const v=[y,...a];s(v);const S={};v.forEach(P=>{const j=P.category||"Other";S[j]=(S[j]||0)+(Number(P.amount)||0)}),d(S);const C=Object.values(S).reduce((P,j)=>P+j,0);m(C)},x=Math.min(4,Math.ceil(new Date().getDate()/7)),b=a.filter(y=>Number(y.week)===Number(x));return r.jsx(Te,{children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t("Variable Expenses","Gastos Variables")}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("Track your daily and weekly spending.","Registra tus gastos diarios y semanales.")})]}),r.jsxs("a",{href:"/linked-accounts",className:"flex items-center gap-3 mb-6 px-4 py-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/40 transition-colors group",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-semibold text-blue-800 dark:text-blue-300",children:"Link your bank account"}),r.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Automatically sync transactions instead of entering them manually"})]}),r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-blue-500 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),r.jsx(fb,{householdId:e==null?void 0:e.householdId,onCreated:f}),r.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2",children:[r.jsx("h2",{className:"text-lg font-medium mb-3 text-gray-900 dark:text-white",children:t("This week","Esta semana")}),r.jsx(bb,{householdId:e==null?void 0:e.householdId,loading:h,entries:b,members:o,refresh:w})]}),r.jsxs("aside",{children:[r.jsx("h2",{className:"text-lg font-medium mb-3 text-gray-900 dark:text-white",children:t("This month","Este mes")}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"bg-white dark:bg-gray-750 rounded-2xl p-4 shadow-md border border-gray-100 dark:border-gray-700",children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("Total Spent","Total Gastado")}),r.jsxs("div",{className:"text-2xl font-semibold text-gray-700 dark:text-gray-300",children:["$",c.toFixed(2)]}),r.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:t("This month","Este mes")})]})})}),Object.keys(l).length>0&&r.jsxs("div",{className:"bg-white dark:bg-gray-750 rounded-2xl p-4 shadow-md border border-gray-100 dark:border-gray-700",children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium mb-3",children:t("By Category","Por Categora")}),r.jsx("div",{className:"space-y-2",children:Object.entries(l).map(([y,v])=>r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:y}),r.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:["$",v.toFixed(2)]})]},y))})]})]})]})]})]})})}function jb({householdId:e,onCreated:t}){const{t:n}=ue(),[a,s]=g.useState(""),[o,i]=g.useState(""),[l,d]=g.useState("Other"),[c,m]=g.useState("monthly"),[h,u]=g.useState("1"),[w,p]=g.useState(!1),[f,k]=g.useState(null),x=["Housing","Utilities","Insurance","Auto","Family","Food","Savings","Debt","Bills","Entertainment","Other"],b=()=>{s(""),i(""),d("Other"),m("monthly"),u("1"),k(null)},y=async v=>{var S,C,P;if(v.preventDefault(),k(null),!e)return k(n("No household selected","Sin hogar seleccionado"));if(!a||!o||Number(o)<=0)return k(n("Enter name and valid amount","Ingresa nombre y monto vlido"));p(!0);try{const j={name:a,amount:Number(o),group:l,frequency:c,dueDay:Number(h)};console.log("[FixedExpenseForm] submitting payload:",j,"householdId:",e);const N=await O.post(`/fixed-expenses/${e}`,j);console.log("[FixedExpenseForm] response:",N&&N.data);const E=N.data.expense||{id:N.data.id,...j};t&&t(E),b()}catch(j){console.error("[FixedExpenseForm] submit error:",j,(S=j==null?void 0:j.response)==null?void 0:S.data),k(((P=(C=j==null?void 0:j.response)==null?void 0:C.data)==null?void 0:P.error)||n("Failed to create expense","Error al crear gasto"))}finally{p(!1)}};return r.jsxs("form",{onSubmit:y,className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-md border border-gray-100 dark:border-gray-700",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:n("Name","Nombre")}),r.jsx("input",{value:a,onChange:v=>s(v.target.value),placeholder:n("e.g., Rent","p.ej., Renta"),className:"mt-1 w-full p-2 border rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:n("Amount","Monto")}),r.jsx("input",{value:o,onChange:v=>i(v.target.value),placeholder:"0.00",type:"number",step:"0.01",className:"mt-1 w-full p-2 border rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:n("Category","Categora")}),r.jsx("select",{value:l,onChange:v=>d(v.target.value),className:"mt-1 w-full p-2 border rounded-lg",children:x.map(v=>r.jsx("option",{value:v,children:v},v))})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:n("Frequency","Frecuencia")}),r.jsxs("select",{value:c,onChange:v=>m(v.target.value),className:"mt-1 w-full p-2 border rounded-lg",children:[r.jsx("option",{value:"weekly",children:n("Weekly","Semanal")}),r.jsx("option",{value:"biweekly",children:n("Biweekly","Quincenal")}),r.jsx("option",{value:"monthly",children:n("Monthly","Mensual")})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:n("Due Day (of month)","Da de vencimiento")}),r.jsx("input",{value:h,onChange:v=>u(v.target.value),type:"number",min:"1",max:"31",className:"mt-1 w-full p-2 border rounded-lg"})]})]}),f&&r.jsx("div",{className:"text-sm text-red-500 mt-3",children:f}),r.jsx("div",{className:"mt-4 text-right",children:r.jsx("button",{type:"submit",disabled:w,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-60 transition-colors",children:w?n("Saving...","Guardando..."):n("Add Fixed Expense","Agregar Gasto Fijo")})})]})}function kb({expense:e,onSave:t,onClose:n}){const{t:a}=ue(),[s,o]=g.useState((e==null?void 0:e.name)||""),[i,l]=g.useState((e==null?void 0:e.amount)||0),[d,c]=g.useState((e==null?void 0:e.group)||"Other"),[m,h]=g.useState((e==null?void 0:e.frequency)||"monthly"),[u,w]=g.useState((e==null?void 0:e.dueDay)||1),[p,f]=g.useState(!1),k=["Housing","Utilities","Insurance","Auto","Family","Food","Savings","Debt","Bills","Entertainment","Other"],x=async b=>{b.preventDefault(),f(!0);try{const y={name:s,amount:Number(i),group:d,frequency:m,dueDay:Number(u)};await t(y)}finally{f(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-2xl max-w-md w-full",children:[r.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-white",children:a("Edit Fixed Expense","Editar Gasto Fijo")}),r.jsxs("form",{onSubmit:x,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:a("Name","Nombre")}),r.jsx("input",{type:"text",value:s,onChange:b=>o(b.target.value),className:"mt-1 w-full p-2 border rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:a("Amount","Monto")}),r.jsx("input",{type:"number",step:"0.01",value:i,onChange:b=>l(b.target.value),className:"mt-1 w-full p-2 border rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:a("Category","Categora")}),r.jsx("select",{value:d,onChange:b=>c(b.target.value),className:"mt-1 w-full p-2 border rounded-lg",children:k.map(b=>r.jsx("option",{value:b,children:b},b))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:a("Frequency","Frecuencia")}),r.jsxs("select",{value:m,onChange:b=>h(b.target.value),className:"mt-1 w-full p-2 border rounded-lg",children:[r.jsx("option",{value:"weekly",children:a("Weekly","Semanal")}),r.jsx("option",{value:"biweekly",children:a("Biweekly","Quincenal")}),r.jsx("option",{value:"monthly",children:a("Monthly","Mensual")})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:a("Due Day (of month)","Da de vencimiento")}),r.jsx("input",{type:"number",min:"1",max:"31",value:u,onChange:b=>w(b.target.value),className:"mt-1 w-full p-2 border rounded-lg"})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{type:"button",onClick:n,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:a("Cancel","Cancelar")}),r.jsx("button",{type:"submit",disabled:p,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-60 transition-colors",children:p?a("Saving...","Guardando..."):a("Save","Guardar")})]})]})]})})}const wb=["online","check","transfer","cash","other"],Nb=(e,t)=>e(t,t==="online"?"En lnea":t==="check"?"Cheque":t==="transfer"?"Transferencia":t==="cash"?"Efectivo":"Otro");function Sb({expense:e,onSave:t,onClose:n}){const{t:a}=ue(),[s,o]=g.useState((e==null?void 0:e.amount)||0),[i,l]=g.useState(new Date().toISOString().split("T")[0]),[d,c]=g.useState("online"),[m,h]=g.useState(""),[u,w]=g.useState(!1),p=async f=>{f.preventDefault(),w(!0);try{await t({fixedExpenseId:e._id||e.id,amount:Number(s),paymentDate:i,method:d,notes:m})}finally{w(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full",children:[r.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between",children:[r.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[a("Mark as Paid: ","Marcar como pagado: "),r.jsx("span",{className:"text-red-600 dark:text-red-500",children:e==null?void 0:e.name})]}),r.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl",children:""})]}),r.jsxs("form",{onSubmit:p,className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-300",children:a("Amount","Monto")}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:s,onChange:f=>o(f.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-300",children:a("Payment Date","Fecha de Pago")}),r.jsx("input",{type:"date",value:i,onChange:f=>l(f.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-300",children:a("Method","Mtodo")}),r.jsx("select",{value:d,onChange:f=>c(f.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",children:wb.map(f=>r.jsx("option",{value:f,children:Nb(a,f)},f))})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-xs text-gray-500 dark:text-gray-300",children:[a("Notes","Notas")," ",r.jsxs("span",{className:"text-gray-400 dark:text-gray-500",children:["(",a("optional","opcional"),")"]})]}),r.jsx("textarea",{value:m,onChange:f=>h(f.target.value),placeholder:a("e.g., Confirmation #12345","p.ej., Confirmacin #12345"),rows:"2",className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-sm"})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{type:"button",onClick:n,className:"flex-1 px-4 py-2 bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-white rounded-lg hover:bg-gray-300 dark:hover:bg-gray-700 transition-colors",children:a("Cancel","Cancelar")}),r.jsx("button",{type:"submit",disabled:u,className:"flex-1 px-4 py-2 bg-green-600 dark:bg-green-700 text-white rounded-lg hover:bg-green-700 dark:hover:bg-green-800 disabled:opacity-60 transition-colors",children:u?a("Saving...","Guardando..."):a("Confirm","Confirmar")})]})]})]})})}function Cb({householdId:e,byGroup:t={},total:n=0,payments:a=[],loading:s=!1,refresh:o,currentMonth:i}){const{t:l,language:d}=ue(),[c,m]=g.useState(null),[h,u]=g.useState(null);console.log("[FixedExpenseList] render byGroup:",Object.keys(t),"total:",n,"loading:",s,"payments:",a.length);const w=async b=>{var v,S,C;const y=b._id||b.id;if(!y)return console.error("[FixedExpenseList] missing id for delete");if(!e)return console.error("[FixedExpenseList] missing householdId");if(window.confirm(l(`Delete "${b.name}"?`,`Eliminar "${b.name}"?`)))try{console.log("[FixedExpenseList] deleting",{id:y,householdId:e}),await O.delete(`/fixed-expenses/${e}/${y}`),console.log("[FixedExpenseList] delete success",y),o&&o()}catch(P){console.error("[FixedExpenseList] delete error",P,(v=P==null?void 0:P.response)==null?void 0:v.data),alert(((C=(S=P==null?void 0:P.response)==null?void 0:S.data)==null?void 0:C.error)||"Failed to delete")}},p=b=>{m(b)},f=async b=>{var v,S,C;const y=c._id||c.id;if(!y)return console.error("[FixedExpenseList] missing id for edit");if(!e)return console.error("[FixedExpenseList] missing householdId");try{console.log("[FixedExpenseList] patching",{id:y,householdId:e,updates:b});const P=await O.patch(`/fixed-expenses/${e}/${y}`,b);console.log("[FixedExpenseList] patch response",P&&P.data),m(null),o&&o()}catch(P){console.error("[FixedExpenseList] patch error",P,(v=P==null?void 0:P.response)==null?void 0:v.data),alert(((C=(S=P==null?void 0:P.response)==null?void 0:S.data)==null?void 0:C.error)||"Failed to update")}},k=async b=>{var y,v;if(!e)return console.error("[FixedExpenseList] missing householdId for payment");try{console.log("[FixedExpenseList] creating payment",b),await O.post(`/fixed-expense-payments/${e}`,b),u(null),o&&o()}catch(S){console.error("[FixedExpenseList] payment error",S),alert(((v=(y=S==null?void 0:S.response)==null?void 0:y.data)==null?void 0:v.error)||l("Failed to save payment","Error al guardar pago"))}},x={Housing:"text-blue-600",Utilities:"text-yellow-600",Insurance:"text-orange-600",Auto:"text-purple-600",Family:"text-pink-600",Food:"text-green-600",Savings:"text-teal-600",Debt:"text-red-600",Bills:"text-indigo-600",Entertainment:"text-violet-600",Other:"text-gray-600"};return s?r.jsx("div",{className:"text-gray-500",children:l("Loading","Cargando")}):Object.keys(t).length===0?r.jsx("div",{className:"text-sm text-gray-500",children:l("No fixed expenses yet.","Sin gastos fijos an.")}):r.jsxs("div",{className:"space-y-6",children:[Object.entries(t).map(([b,y])=>{const v=y.reduce((C,P)=>C+(Number(P.amount)||0),0),S=x[b]||"text-gray-600";return r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:`font-medium ${S}`,children:b}),r.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:["$",v.toFixed(2)]})]}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-md border border-gray-100 dark:border-gray-700 space-y-3",children:y.map(C=>{const P=C._id||C.id,j=d==="es"&&C.name_es?C.name_es:C.name,N=String(C._id||C.id),E=a.filter(M=>{var _;const ae=String(((_=M.fixedExpenseId)==null?void 0:_._id)||M.fixedExpenseId||"")===N,Z=i?M.monthPaid===i:!0;return ae&&Z}),L=E.reduce((M,K)=>M+(Number(K.amount)||0),0),D=L>=Number(C.amount);return Math.max(0,Number(C.amount)-L),console.log("[FixedExpenseList] expense:",j,{expenseId:N,totalPayments:a.length,matchingPayments:E.length,paidAmount:L,expenseAmount:Number(C.amount),isPaid:D}),r.jsx("div",{className:`p-3 rounded-lg border transition-colors ${D?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-700":"bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600"}`,children:r.jsxs("div",{className:"flex justify-between items-start gap-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:j}),D&&r.jsxs("span",{className:"text-xs px-2 py-0.5 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-400 rounded-full font-medium",children:[" ",l("Paid","Pagado")]})]}),r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[l("Frequency","Frecuencia"),": ",r.jsx("span",{className:"capitalize",children:l(C.frequency,C.frequency==="weekly"?"Semanal":C.frequency==="biweekly"?"Quincenal":"Mensual")}),C.dueDay&&`  ${l("Due","Vence")}: ${l("Day","Da")} ${C.dueDay}`]}),L>0&&!D&&r.jsxs("div",{className:"text-xs text-orange-600 dark:text-orange-400 mt-1",children:[l("Paid","Pagado"),": $",L.toFixed(2)," / $",Number(C.amount).toFixed(2)]})]}),r.jsxs("div",{className:"flex items-center space-x-2 text-right",children:[r.jsxs("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 min-w-fit",children:["$",Number(C.amount||0).toFixed(2)]}),r.jsx("button",{onClick:()=>!D&&u(C),disabled:D,className:`text-xs px-2 py-1 rounded transition-colors ${D?"bg-green-100 text-green-700 cursor-not-allowed opacity-75":"bg-blue-100 text-blue-700 hover:bg-blue-200 cursor-pointer"}`,children:D?l("Paid","Pagado"):l("Mark Paid","Marcar")}),r.jsx("button",{onClick:()=>p(C),className:"text-xs text-indigo-600 hover:text-indigo-700",children:l("Edit","Editar")}),r.jsx("button",{onClick:()=>w(C),className:"text-xs text-red-600 hover:text-red-700",children:l("Delete","Eliminar")})]})]})},P)})})]},b)}),r.jsx("div",{className:"bg-gradient-to-r from-red-50 dark:from-red-900/20 to-orange-50 dark:to-orange-900/20 rounded-2xl p-6 border border-red-100 dark:border-red-700 mt-6",children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:l("Total Monthly Fixed Expenses","Total de Gastos Fijos Mensuales")}),r.jsxs("div",{className:"text-3xl font-bold text-red-600 dark:text-red-400",children:["$",n.toFixed(2)]})]})})}),r.jsx("div",{className:"text-right mt-4",children:r.jsx("button",{onClick:()=>{console.log("[FixedExpenseList] refresh clicked"),o&&o()},className:"text-sm text-indigo-600",children:l("Refresh","Actualizar")})}),c&&r.jsx(kb,{expense:c,onSave:f,onClose:()=>m(null)}),h&&r.jsx(Sb,{expense:h,onSave:k,onClose:()=>u(null)})]})}function Eb({currentMonth:e,payments:t=[],totalFixed:n=0}){const{t:a}=ue(),s=t.reduce((l,d)=>l+(Number(d.amount)||0),0),o=Math.max(0,n-s),i=n>0?Math.round(s/n*100):0;return r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-md border border-gray-100 dark:border-gray-700",children:[r.jsx("div",{className:"mb-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:a("Fixed Expenses Progress","Progreso de Gastos Fijos")}),r.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:e||"This Month"})]})}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400 mb-1.5",children:[r.jsxs("span",{children:[a("Paid","Pagado"),": ",r.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:["$",s.toFixed(2)]})]}),r.jsxs("span",{children:[a("of","de")," ",r.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:["$",n.toFixed(2)]}),"  ",i,"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3 overflow-hidden",children:r.jsx("div",{className:"h-3 rounded-full bg-gradient-to-r from-red-500 to-red-400 transition-all duration-500",style:{width:`${i}%`}})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-4",children:[r.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3 border border-green-100 dark:border-green-700",children:[r.jsx("div",{className:"text-xs text-green-600 dark:text-green-400",children:a("Paid","Pagado")}),r.jsxs("div",{className:"text-lg font-bold text-green-700 dark:text-green-400",children:["$",s.toFixed(2)]})]}),r.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-3 border border-orange-100 dark:border-orange-700",children:[r.jsx("div",{className:"text-xs text-orange-600 dark:text-orange-400",children:a("Remaining","Pendiente")}),r.jsxs("div",{className:"text-lg font-bold text-orange-700 dark:text-orange-400",children:["$",o.toFixed(2)]})]})]}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 pt-2",children:o===0?r.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:[" ",a("All fixed expenses paid this month!","Todos los gastos fijos pagados este mes!")]}):r.jsxs("span",{children:[a("Remaining to pay this month","Pendiente de pagar este mes"),": $",o.toFixed(2)]})})]})]})}function Pb(){const{user:e}=_e(),{language:t,t:n}=ue(),[a,s]=g.useState([]),[o,i]=g.useState({}),[l,d]=g.useState(0),[c,m]=g.useState([]),[h,u]=g.useState(""),[w,p]=g.useState(!1),[f,k]=g.useState(!1),x=async()=>{var y;if(e!=null&&e.householdId){p(!0);try{console.log("[FixedExpensesPage] fetching expenses for householdId:",e.householdId,"lang:",t);const v=await O.get(`/fixed-expenses/${e.householdId}?lang=${t}`);console.log("[FixedExpensesPage] fetch response:",v&&v.data),s(v.data.expenses||[]),i(v.data.byGroup||{}),d(v.data.total||0);const S=new Date,C=`${S.getFullYear()}-${String(S.getMonth()+1).padStart(2,"0")}`;u(C);const P=await O.get(`/fixed-expense-payments/${e.householdId}?month=${C}`);m(P.data.payments||[])}catch(v){console.error("[FixedExpensesPage] Failed to load expenses",v,(y=v==null?void 0:v.response)==null?void 0:y.data)}finally{p(!1)}}};g.useEffect(()=>{x()},[e,t]);const b=y=>{x(),k(!1)};return r.jsx(Te,{children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsx("div",{className:"mb-6 flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n("Fixed Expenses","Gastos Fijos")}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:n("Manage your recurring monthly bills and fixed payments.","Gestiona tus gastos recurrentes mensuales y pagos fijos.")})]})}),f&&r.jsx(jb,{householdId:e==null?void 0:e.householdId,onCreated:b}),r.jsx("div",{className:"mt-4 mb-6",children:r.jsx("button",{onClick:()=>k(!f),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:f?n("Cancel","Cancelar"):n("+ Add Fixed Expense","+ Agregar Gasto Fijo")})}),r.jsxs("div",{className:"mt-8",children:[r.jsx("h2",{className:"text-lg font-medium mb-4 text-gray-900 dark:text-white",children:n("Your Fixed Expenses","Tus Gastos Fijos")}),r.jsx("div",{className:"mb-6",children:r.jsx(Eb,{currentMonth:h,payments:c,totalFixed:l})}),r.jsx(Cb,{householdId:e==null?void 0:e.householdId,byGroup:o,total:l,payments:c,currentMonth:h,loading:w,refresh:x,language:t})]})]})})}const Ib=["Emergency","Project","Investment","Other"],Lb=(e,t)=>e(t,t==="Emergency"?"Emergencia":t==="Project"?"Proyecto":t==="Investment"?"Inversin":"Otro");function Rb({householdId:e,onCreated:t}){const{t:n}=ue(),[a,s]=g.useState(""),[o,i]=g.useState("Other"),[l,d]=g.useState(""),[c,m]=g.useState(""),[h,u]=g.useState(""),[w,p]=g.useState(!1),[f,k]=g.useState(null),x=()=>{s(""),i("Other"),d(""),m(""),u(""),k(null)},b=async y=>{var v,S;if(y.preventDefault(),k(null),!e)return k(n("No household selected","Sin hogar seleccionado"));if(!a.trim())return k(n("Goal name is required","El nombre del objetivo es requerido"));p(!0);try{const C={name:a.trim(),type:o,monthlyContribution:Number(l)||0,target:Number(c)||0,currentBalance:Number(h)||0},P=await O.post(`/goals/${e}`,C);t&&t(P.data.goal),x()}catch(C){console.error("[GoalForm] submit error:",C),k(((S=(v=C==null?void 0:C.response)==null?void 0:v.data)==null?void 0:S.error)||n("Failed to create goal","Error al crear objetivo"))}finally{p(!1)}};return r.jsxs("form",{onSubmit:b,className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-md border border-gray-100 dark:border-gray-700",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"lg:col-span-2",children:[r.jsx("label",{className:"block text-xs text-gray-500",children:n("Goal Name","Nombre del Objetivo")}),r.jsx("input",{value:a,onChange:y=>s(y.target.value),placeholder:n("e.g., Emergency Fund","p.ej., Fondo de Emergencia"),className:"mt-1 w-full p-2 border rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:n("Type","Tipo")}),r.jsx("select",{value:o,onChange:y=>i(y.target.value),className:"mt-1 w-full p-2 border rounded-lg",children:Ib.map(y=>r.jsx("option",{value:y,children:Lb(n,y)},y))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:n("Monthly Contribution","Aportacin Mensual")}),r.jsx("input",{value:l,onChange:y=>d(y.target.value),placeholder:"0.00",type:"number",step:"0.01",min:"0",className:"mt-1 w-full p-2 border rounded-lg"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-xs text-gray-500",children:[n("Target Amount","Monto Objetivo")," ",r.jsxs("span",{className:"text-gray-400",children:["(",n("optional","opcional"),")"]})]}),r.jsx("input",{value:c,onChange:y=>m(y.target.value),placeholder:"0.00",type:"number",step:"0.01",min:"0",className:"mt-1 w-full p-2 border rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:n("Current Balance","Saldo Actual")}),r.jsx("input",{value:h,onChange:y=>u(y.target.value),placeholder:"0.00",type:"number",step:"0.01",min:"0",className:"mt-1 w-full p-2 border rounded-lg"})]})]}),f&&r.jsx("div",{className:"text-sm text-red-500 mt-3",children:f}),r.jsx("div",{className:"mt-4 text-right",children:r.jsx("button",{type:"submit",disabled:w,className:"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 disabled:opacity-60 transition-colors",children:w?n("Saving...","Guardando..."):n("Add Goal","Agregar Objetivo")})})]})}const _b=["Emergency","Project","Investment","Other"],Tb=(e,t)=>e(t,t==="Emergency"?"Emergencia":t==="Project"?"Proyecto":t==="Investment"?"Inversin":"Otro");function Ab({goal:e,onSave:t,onClose:n}){const{t:a}=ue(),[s,o]=g.useState((e==null?void 0:e.name)||""),[i,l]=g.useState((e==null?void 0:e.type)||"Other"),[d,c]=g.useState((e==null?void 0:e.monthlyContribution)??0),[m,h]=g.useState((e==null?void 0:e.target)??0),[u,w]=g.useState((e==null?void 0:e.currentBalance)??0),[p,f]=g.useState(!1),k=async x=>{x.preventDefault(),f(!0);try{await t({name:s.trim(),type:i,monthlyContribution:Number(d),target:Number(m),currentBalance:Number(u)})}finally{f(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-2xl max-w-md w-full",children:[r.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-white",children:a("Edit Goal","Editar Meta")}),r.jsxs("form",{onSubmit:k,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:a("Goal Name","Nombre del Objetivo")}),r.jsx("input",{type:"text",value:s,onChange:x=>o(x.target.value),className:"mt-1 w-full p-2 border rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:a("Type","Tipo")}),r.jsx("select",{value:i,onChange:x=>l(x.target.value),className:"mt-1 w-full p-2 border rounded-lg",children:_b.map(x=>r.jsx("option",{value:x,children:Tb(a,x)},x))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:a("Monthly Contribution","Aportacin Mensual")}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:d,onChange:x=>c(x.target.value),className:"mt-1 w-full p-2 border rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:a("Target Amount","Monto Objetivo")}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:m,onChange:x=>h(x.target.value),className:"mt-1 w-full p-2 border rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500",children:a("Current Balance","Saldo Actual")}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:u,onChange:x=>w(x.target.value),className:"mt-1 w-full p-2 border rounded-lg"})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{type:"button",onClick:n,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:a("Cancel","Cancelar")}),r.jsx("button",{type:"submit",disabled:p,className:"flex-1 px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 disabled:opacity-60 transition-colors",children:p?a("Saving...","Guardando..."):a("Save","Guardar")})]})]})]})})}const Mb=["bank","cash","check","transfer","other"],Db=(e,t)=>e(t,t==="bank"?"Banco":t==="cash"?"Efectivo":t==="check"?"Cheque":t==="transfer"?"Transferencia":"Otro");function Fb({goal:e,onSave:t,onClose:n}){const{t:a}=ue(),[s,o]=g.useState(""),[i,l]=g.useState(new Date().toISOString().split("T")[0]),[d,c]=g.useState("bank"),[m,h]=g.useState(""),[u,w]=g.useState(!1),p=async f=>{if(f.preventDefault(),!s||Number(s)<=0)return alert(a("Enter a valid amount","Ingresa un monto vlido"));w(!0);try{await t({goalId:e._id||e.id,amount:Number(s),contributionDate:i,method:d,notes:m}),o(""),h("")}finally{w(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-2xl max-w-md w-full",children:[r.jsxs("h2",{className:"text-xl font-bold mb-4 dark:text-white",children:[a("Add Funds to: ","Agregar Fondos a: "),r.jsx("span",{className:"text-teal-600 dark:text-teal-400",children:e==null?void 0:e.name})]}),r.jsxs("form",{onSubmit:p,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-300",children:a("Amount","Monto")}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:s,onChange:f=>o(f.target.value),placeholder:"0.00",className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-300",children:a("Date","Fecha")}),r.jsx("input",{type:"date",value:i,onChange:f=>l(f.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-300",children:a("Method","Mtodo")}),r.jsx("select",{value:d,onChange:f=>c(f.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",children:Mb.map(f=>r.jsx("option",{value:f,children:Db(a,f)},f))})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-xs text-gray-500 dark:text-gray-300",children:[a("Notes","Notas")," ",r.jsxs("span",{className:"text-gray-400 dark:text-gray-500",children:["(",a("optional","opcional"),")"]})]}),r.jsx("textarea",{value:m,onChange:f=>h(f.target.value),placeholder:a("e.g., Monthly contribution","p.ej., Aportacin mensual"),rows:"2",className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-sm"})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{type:"button",onClick:n,className:"flex-1 px-4 py-2 bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-white rounded-lg hover:bg-gray-300 dark:hover:bg-gray-700 transition-colors",children:a("Cancel","Cancelar")}),r.jsx("button",{type:"submit",disabled:u,className:"flex-1 px-4 py-2 bg-teal-600 dark:bg-teal-700 text-white rounded-lg hover:bg-teal-700 dark:hover:bg-teal-800 disabled:opacity-60 transition-colors",children:u?a("Saving...","Guardando..."):a("Add","Agregar")})]})]})]})})}const Zc={Emergency:{bg:"bg-orange-50 dark:bg-orange-900/20",border:"border-orange-200 dark:border-orange-700",bar:"bg-orange-500",badge:"bg-orange-100 dark:bg-orange-900 text-orange-700 dark:text-orange-300"},Project:{bg:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-200 dark:border-blue-700",bar:"bg-blue-500",badge:"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300"},Investment:{bg:"bg-teal-50 dark:bg-teal-900/20",border:"border-teal-200 dark:border-teal-700",bar:"bg-teal-500",badge:"bg-teal-100 dark:bg-teal-900 text-teal-700 dark:text-teal-300"},Other:{bg:"bg-gray-50 dark:bg-gray-700/50",border:"border-gray-200 dark:border-gray-600",bar:"bg-gray-400",badge:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}},Ob=(e,t)=>e(t,t==="Emergency"?"Emergencia":t==="Project"?"Proyecto":t==="Investment"?"Inversin":"Otro");function $b({householdId:e,goals:t=[],totalMonthlyContribution:n=0,loading:a=!1,refresh:s}){const{t:o}=ue(),[i,l]=g.useState(null),[d,c]=g.useState(null),m=async p=>{var k,x;const f=p._id||p.id;if(window.confirm(o(`Delete "${p.name}"?`,`Eliminar "${p.name}"?`)))try{await O.delete(`/goals/${e}/${f}`),s&&s()}catch(b){console.error("[GoalList] delete error:",b),alert(((x=(k=b==null?void 0:b.response)==null?void 0:k.data)==null?void 0:x.error)||o("Failed to delete","Error al eliminar"))}},h=async p=>{var k,x;const f=i._id||i.id;try{await O.patch(`/goals/${e}/${f}`,p),l(null),s&&s()}catch(b){console.error("[GoalList] patch error:",b),alert(((x=(k=b==null?void 0:b.response)==null?void 0:k.data)==null?void 0:x.error)||o("Failed to update","Error al actualizar"))}},u=p=>{c(p)},w=async p=>{var f,k;if(!e||!d)return console.error("[GoalList] missing householdId or goal");try{const x=d._id||d.id;console.log("[GoalList] creating contribution",{goalId:x,...p}),await O.post(`/goal-contributions/${e}/${x}`,p),c(null),s&&s()}catch(x){console.error("[GoalList] contribution error",x),alert(((k=(f=x==null?void 0:x.response)==null?void 0:f.data)==null?void 0:k.error)||o("Failed to add contribution","Error al agregar fondos"))}};return a?r.jsx("div",{className:"text-gray-500",children:o("Loading","Cargando")}):t.length===0?r.jsxs("div",{className:"text-center py-12 text-gray-400",children:[r.jsx("div",{className:"text-4xl mb-3",children:""}),r.jsx("div",{className:"text-sm",children:o("No goals yet. Add your first savings goal!","Sin objetivos an. Agrega tu primer objetivo de ahorro!")})]}):r.jsxs("div",{className:"space-y-4",children:[t.map(p=>{const f=p._id||p.id,k=Zc[p.type]||Zc.Other,x=p.progressPercent!=null?p.progressPercent:p.target>0?Math.min(100,Math.round(p.currentBalance/p.target*100)):null;return r.jsxs("div",{className:`rounded-2xl p-5 border shadow-sm dark:border-gray-700 dark:bg-gray-800 ${p.type==="Emergency"?"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-700":p.type==="Project"?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700":p.type==="Investment"?"bg-teal-50 dark:bg-teal-900/20 border-teal-200 dark:border-teal-700":"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700"}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:p.name}),r.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${k.badge}`,children:Ob(o,p.type)})]}),r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:[o("Monthly contribution","Aportacin mensual"),":"," ",r.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:["$",Number(p.monthlyContribution||0).toFixed(2)]})]})]}),r.jsxs("div",{className:"flex items-center gap-3 ml-4 shrink-0",children:[r.jsx("button",{onClick:()=>u(p),className:"text-sm text-green-600 hover:text-green-700 transition-colors",children:o("Add Funds","Agregar Fondos")}),r.jsx("button",{onClick:()=>l(p),className:"text-sm text-indigo-600 hover:text-indigo-700 transition-colors",children:o("Edit","Editar")}),r.jsx("button",{onClick:()=>m(p),className:"text-sm text-red-600 hover:text-red-700 transition-colors",children:o("Delete","Eliminar")})]})]}),p.target>0?r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400 mb-1.5",children:[r.jsxs("span",{children:["$",Number(p.currentBalance||0).toFixed(2)," ",o("saved","guardado")]}),r.jsxs("span",{children:[o("of","de")," $",Number(p.target).toFixed(2),"  ",x,"%"]})]}),r.jsx("div",{className:"w-full bg-gray-100 dark:bg-gray-700 rounded-full h-3 overflow-hidden border border-gray-200 dark:border-gray-600",children:r.jsx("div",{className:`h-3 rounded-full transition-all duration-500 ${k.bar}`,style:{width:`${x}%`}})})]}):r.jsxs("div",{className:"flex justify-between text-sm pt-1",children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:o("Current Balance","Saldo Actual")}),r.jsxs("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:["$",Number(p.currentBalance||0).toFixed(2)]})]})]},f)}),r.jsx("div",{className:"bg-gradient-to-r from-teal-50 dark:from-teal-900/30 to-green-50 dark:to-green-900/30 rounded-2xl p-5 border border-teal-100 dark:border-teal-700/50 mt-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:o("Total Monthly Contributions","Total de Aportaciones Mensuales")}),r.jsxs("div",{className:"text-2xl font-bold text-teal-600 dark:text-teal-400",children:["$",Number(n||0).toFixed(2)]})]})}),r.jsx("div",{className:"text-right",children:r.jsx("button",{onClick:()=>s&&s(),className:"text-sm text-indigo-600 hover:text-indigo-700 transition-colors",children:o("Refresh","Actualizar")})}),i&&r.jsx(Ab,{goal:i,onSave:h,onClose:()=>l(null)}),d&&r.jsx(Fb,{goal:d,householdId:e,onSave:w,onClose:()=>c(null)})]})}function Bb(){const{user:e}=_e(),{t}=ue(),[n,a]=g.useState([]),[s,o]=g.useState(0),[i,l]=g.useState(!1),[d,c]=g.useState(!1),m=async()=>{if(e!=null&&e.householdId){l(!0);try{console.log("[GoalsPage] fetching goals for householdId:",e.householdId);const u=await O.get(`/goals/${e.householdId}`);a(u.data.goals||[]),o(u.data.totalMonthlyContribution||0)}catch(u){console.error("[GoalsPage] fetch error:",u)}finally{l(!1)}}};g.useEffect(()=>{m()},[e]);const h=()=>{m(),c(!1)};return r.jsx(Te,{children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t("Goals & Funds","Metas y Fondos")}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("Track your savings goals and financial targets.","Rastrea tus metas de ahorro y objetivos financieros.")})]}),d&&r.jsx(Rb,{householdId:e==null?void 0:e.householdId,onCreated:h}),r.jsx("div",{className:"mt-4 mb-6",children:r.jsx("button",{onClick:()=>c(!d),className:"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors",children:d?t("Cancel","Cancelar"):t("+ Add Goal","+ Agregar Objetivo")})}),r.jsx($b,{householdId:e==null?void 0:e.householdId,goals:n,totalMonthlyContribution:s,loading:i,refresh:m})]})})}function zb({householdId:e,onSuccess:t}){const{t:n}=ue(),[a,s]=g.useState({cardName:"",holder:"",originalBalance:"",currentBalance:"",minPayment:"",plannedExtraPayment:"",interestRate:"",creditLimit:"",dueDay:""}),[o,i]=g.useState(!1),l=c=>{s({...a,[c.target.name]:c.target.value})},d=async c=>{var m,h;if(c.preventDefault(),!!e){i(!0);try{await O.post(`/credit-cards/${e}`,{...a,originalBalance:parseFloat(a.originalBalance)||0,currentBalance:parseFloat(a.currentBalance)||0,minPayment:parseFloat(a.minPayment)||0,plannedExtraPayment:parseFloat(a.plannedExtraPayment)||0,interestRate:parseFloat(a.interestRate)||0,creditLimit:parseFloat(a.creditLimit)||0,dueDay:parseInt(a.dueDay)||null}),s({cardName:"",holder:"",originalBalance:"",currentBalance:"",minPayment:"",plannedExtraPayment:"",interestRate:"",creditLimit:"",dueDay:""}),t&&t()}catch(u){console.error("[CreditCardForm] Error:",u),alert(((h=(m=u.response)==null?void 0:m.data)==null?void 0:h.error)||n("Failed to add card","Error al agregar tarjeta"))}finally{i(!1)}}};return r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-md border border-gray-100 dark:border-gray-700",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:n("Add Credit Card","Agregar Tarjeta de Crdito")}),r.jsxs("form",{onSubmit:d,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n("Card Name","Nombre de Tarjeta")," *"]}),r.jsx("input",{type:"text",name:"cardName",value:a.cardName,onChange:l,placeholder:"Chase Sapphire",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n("Card Holder","Titular")," *"]}),r.jsx("input",{type:"text",name:"holder",value:a.holder,onChange:l,placeholder:"Maria",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n("Original Balance","Balance Original")," *"]}),r.jsx("input",{type:"number",step:"0.01",name:"originalBalance",value:a.originalBalance,onChange:l,placeholder:"5000.00",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n("Current Balance","Balance Actual")," *"]}),r.jsx("input",{type:"number",step:"0.01",name:"currentBalance",value:a.currentBalance,onChange:l,placeholder:"4393.00",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n("Minimum Payment","Pago Mnimo")}),r.jsx("input",{type:"number",step:"0.01",name:"minPayment",value:a.minPayment,onChange:l,placeholder:"50.00",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n("Planned Extra Payment","Pago Extra Planeado")}),r.jsx("input",{type:"number",step:"0.01",name:"plannedExtraPayment",value:a.plannedExtraPayment,onChange:l,placeholder:"200.00",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n("Interest Rate (APR %)","Tasa de Inters (APR %)")}),r.jsx("input",{type:"number",step:"0.01",name:"interestRate",value:a.interestRate,onChange:l,placeholder:"18.99",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n("Credit Limit","Lmite de Crdito")}),r.jsx("input",{type:"number",step:"0.01",name:"creditLimit",value:a.creditLimit,onChange:l,placeholder:"10000.00",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n("Due Day of Month","Da de Vencimiento")}),r.jsx("input",{type:"number",min:"1",max:"31",name:"dueDay",value:a.dueDay,onChange:l,placeholder:"15",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),r.jsx("div",{className:"md:col-span-2",children:r.jsx("button",{type:"submit",disabled:o,className:"w-full px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-colors",children:o?n("Adding...","Agregando..."):n("Add Card","Agregar Tarjeta")})})]})]})}function Ub({card:e,onSave:t,onClose:n}){const{t:a}=ue(),[s,o]=g.useState({cardName:e.cardName||"",holder:e.holder||"",originalBalance:e.originalBalance||0,currentBalance:e.currentBalance||0,minPayment:e.minPayment||0,plannedExtraPayment:e.plannedExtraPayment||0,interestRate:e.interestRate||0,creditLimit:e.creditLimit||0,dueDay:e.dueDay||""}),i=d=>{const{name:c,value:m}=d.target;o(h=>({...h,[c]:c==="cardName"||c==="holder"||c==="dueDay"?m:parseFloat(m)||0}))},l=d=>{if(d.preventDefault(),!s.cardName.trim()){alert(a("Card name is required","El nombre de la tarjeta es obligatorio"));return}if(!s.holder.trim()){alert(a("Cardholder name is required","El nombre del titular es obligatorio"));return}t(s)};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a("Edit Credit Card","Editar Tarjeta de Crdito")}),r.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl",children:""})]}),r.jsxs("form",{onSubmit:l,className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-900 dark:text-white mb-1",children:[a("Card Name","Nombre de la Tarjeta")," *"]}),r.jsx("input",{type:"text",name:"cardName",value:s.cardName,onChange:i,placeholder:a("e.g., Chase Sapphire","ej., Chase Sapphire"),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-900 dark:text-white mb-1",children:[a("Cardholder","Titular")," *"]}),r.jsx("input",{type:"text",name:"holder",value:s.holder,onChange:i,placeholder:a("e.g., Maria","ej., Maria"),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-900 dark:text-white mb-1",children:[a("Original Balance","Balance Original")," *"]}),r.jsx("input",{type:"number",name:"originalBalance",value:s.originalBalance,onChange:i,step:"0.01",min:"0",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-900 dark:text-white mb-1",children:[a("Current Balance","Balance Actual")," *"]}),r.jsx("input",{type:"number",name:"currentBalance",value:s.currentBalance,onChange:i,step:"0.01",min:"0",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-white mb-1",children:a("Minimum Payment","Pago Mnimo")}),r.jsx("input",{type:"number",name:"minPayment",value:s.minPayment,onChange:i,step:"0.01",min:"0",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-white mb-1",children:a("Planned Extra Payment","Pago Extra Planificado")}),r.jsx("input",{type:"number",name:"plannedExtraPayment",value:s.plannedExtraPayment,onChange:i,step:"0.01",min:"0",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-white mb-1",children:a("Interest Rate (APR %)","Tasa de Inters (APR %)")}),r.jsx("input",{type:"number",name:"interestRate",value:s.interestRate,onChange:i,step:"0.01",min:"0",max:"100",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-white mb-1",children:a("Credit Limit","Lmite de Crdito")}),r.jsx("input",{type:"number",name:"creditLimit",value:s.creditLimit,onChange:i,step:"0.01",min:"0",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-white mb-1",children:a("Payment Due Day","Da de Vencimiento")}),r.jsx("input",{type:"number",name:"dueDay",value:s.dueDay,onChange:i,min:"1",max:"31",placeholder:a("1-31","1-31"),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"submit",className:"flex-1 bg-indigo-600 dark:bg-indigo-700 text-white py-3 rounded-lg font-semibold hover:bg-indigo-700 dark:hover:bg-indigo-800 transition",children:a("Save Changes","Guardar Cambios")}),r.jsx("button",{type:"button",onClick:n,className:"flex-1 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-white py-3 rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-gray-700 transition",children:a("Cancel","Cancelar")})]})]})]})})}function Hb({cards:e,loading:t,onUpdate:n,householdId:a}){const{t:s}=ue(),[o,i]=g.useState(null),l=async c=>{var m,h;if(window.confirm(s(`Delete "${c.cardName}"?`,`Eliminar "${c.cardName}"?`)))try{await O.delete(`/credit-cards/${a}/${c._id}`),n&&n()}catch(u){console.error("[CreditCardList] Delete error:",u),alert(((h=(m=u.response)==null?void 0:m.data)==null?void 0:h.error)||s("Failed to delete card","Error al eliminar tarjeta"))}},d=async c=>{var m,h;if(o)try{await O.patch(`/credit-cards/${a}/${o._id}`,c),i(null),n&&n()}catch(u){console.error("[CreditCardList] Update error:",u),alert(((h=(m=u.response)==null?void 0:m.data)==null?void 0:h.error)||s("Failed to update card","Error al actualizar tarjeta"))}};return t?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500 mx-auto"}),r.jsx("p",{className:"text-gray-600 mt-4",children:s("Loading...","Cargando...")})]}):e.length===0?r.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-750 rounded-xl border border-gray-200 dark:border-gray-700",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:s("No Credit Cards Yet","Sin Tarjetas de Crdito")}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:s("Add your first credit card to start tracking debt","Agrega tu primera tarjeta para rastrear deuda")})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"space-y-4",children:e.map(c=>{const m=c.payoffPercent||0,h=c.currentBalance||0,u=(c.originalBalance||0)-h;return r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-md border border-gray-100 dark:border-gray-700 hover:shadow-lg transition-shadow",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-800",children:c.cardName}),r.jsx("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-sm font-medium",children:c.holder})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-500",children:s("Current Balance","Balance Actual")}),r.jsxs("div",{className:"text-lg font-bold text-red-600",children:["$",h.toFixed(2)]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-500",children:s("Original","Original")}),r.jsxs("div",{className:"text-lg font-semibold text-gray-700",children:["$",(c.originalBalance||0).toFixed(2)]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-500",children:s("Paid Off","Pagado")}),r.jsxs("div",{className:"text-lg font-semibold text-green-600",children:["$",u.toFixed(2)]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-500",children:s("Min Payment","Pago Mn.")}),r.jsxs("div",{className:"text-lg font-semibold text-gray-700",children:["$",(c.minPayment||0).toFixed(2)]})]})]})]}),r.jsxs("div",{className:"flex gap-2 ml-4",children:[r.jsx("button",{onClick:()=>i(c),className:"px-3 py-1 text-sm text-indigo-600 hover:text-indigo-800",children:s("Edit","Editar")}),r.jsx("button",{onClick:()=>l(c),className:"px-3 py-1 text-sm text-red-600 hover:text-red-800",children:s("Delete","Eliminar")})]})]}),r.jsxs("div",{className:"mb-3",children:[r.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[r.jsx("span",{children:s("Payoff Progress","Progreso de Pago")}),r.jsxs("span",{className:"font-semibold text-indigo-600",children:[m,"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:r.jsx("div",{className:"h-3 rounded-full bg-gradient-to-r from-green-500 to-green-600 transition-all",style:{width:`${Math.min(100,m)}%`}})})]}),r.jsxs("div",{className:"flex flex-wrap gap-4 text-xs text-gray-600",children:[c.interestRate>0&&r.jsxs("div",{children:[r.jsxs("span",{className:"font-medium",children:[s("APR","APR"),":"]})," ",c.interestRate,"%"]}),c.plannedExtraPayment>0&&r.jsxs("div",{children:[r.jsxs("span",{className:"font-medium",children:[s("Extra Payment","Pago Extra"),":"]})," $",c.plannedExtraPayment.toFixed(2)]}),c.creditLimit>0&&r.jsxs("div",{children:[r.jsxs("span",{className:"font-medium",children:[s("Credit Limit","Lmite"),":"]})," $",c.creditLimit.toFixed(2)]}),c.dueDay&&r.jsxs("div",{children:[r.jsxs("span",{className:"font-medium",children:[s("Due Day","Da de Vencimiento"),":"]})," ",c.dueDay]})]})]},c._id)})}),o&&r.jsx(Ub,{card:o,onSave:d,onClose:()=>i(null)})]})}const Wb=(e,t,n="text/csv")=>{const a=document.createElement("a");a.setAttribute("href",`data:${n};charset=utf-8,${encodeURIComponent(e)}`),a.setAttribute("download",t),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)},yo=(e,t,n=null)=>{if(!e||e.length===0){alert("No data to export");return}const a=n||Object.keys(e[0]),s=[a.join(","),...e.map(o=>a.map(i=>{const l=o[i];return typeof l=="string"&&(l.includes(",")||l.includes('"')||l.includes(`
`))?`"${l.replace(/"/g,'""')}"`:l??""}).join(","))].join(`
`);Wb(s,t,"text/csv")},Vb=(e,t)=>{var a,s,o;const n=e.map(i=>({"Card Name":i.cardName,Holder:i.holder,"Current Balance":`$${i.currentBalance.toFixed(2)}`,"Original Balance":`$${i.originalBalance.toFixed(2)}`,"Min Payment":`$${i.minPayment}`,"Interest Rate":`${i.interestRate}%`,"Credit Limit":`$${i.creditLimit}`,"Due Day":i.dueDay}));t&&n.push({"Card Name":"TOTAL",Holder:"","Current Balance":`$${(a=t.totalDebt)==null?void 0:a.toFixed(2)}`,"Original Balance":`$${(s=t.totalOriginal)==null?void 0:s.toFixed(2)}`,"Min Payment":"","Interest Rate":"","Credit Limit":`$${(o=t.totalOriginal)==null?void 0:o.toFixed(2)}`,"Due Day":""}),yo(n,`credit-cards-${new Date().toISOString().split("T")[0]}.csv`)},qb=e=>{const t=e.map(n=>{var a;return{"Card Name":((a=n.cardId)==null?void 0:a.cardName)||"N/A","Statement Name":n.statementName,Month:n.month,"Statement Date":new Date(n.statementDate).toLocaleDateString(),"Statement Balance":`$${n.statementBalance.toFixed(2)}`,"Current Balance":`$${n.currentBalance.toFixed(2)}`,"Amount Paid":`$${(n.amountPaid||0).toFixed(2)}`}});yo(t,`card-statements-${new Date().toISOString().split("T")[0]}.csv`)},Gb=e=>{const t=e.map(n=>{var a;return{"Card Name":((a=n.cardId)==null?void 0:a.cardName)||"N/A",Amount:`$${n.amount.toFixed(2)}`,"Payment Date":new Date(n.paymentDate).toLocaleDateString(),"Payment Method":n.paymentMethod,Month:n.month}});yo(t,`debt-payments-${new Date().toISOString().split("T")[0]}.csv`)},Yb=e=>{const t=e.map(n=>({Month:n.month,"Total Income":`$${n.totalIncome.toFixed(2)}`,"Total Expenses":`$${n.totalExpenses.toFixed(2)}`,Remaining:`$${n.remaining.toFixed(2)}`,"Weekly Allowance":`$${n.weeklyAllowance.toFixed(2)}`}));yo(t,`monthly-overview-${new Date().toISOString().split("T")[0]}.csv`)};function Kb(){var u,w,p;const{user:e}=_e(),{t}=ue(),[n,a]=g.useState([]),[s,o]=g.useState(null),[i,l]=g.useState(!0),[d,c]=g.useState(!1),m=g.useCallback(async()=>{if(e!=null&&e.householdId)try{l(!0);const f=await O.get(`/credit-cards/${e.householdId}`);a(f.data.cards||[]),o(f.data.summary||{})}catch(f){console.error("[CreditCards] Error fetching:",f)}finally{l(!1)}},[e==null?void 0:e.householdId]);g.useEffect(()=>{m()},[m]);const h=()=>{c(!1),m()};return r.jsx(Te,{children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:t("Credit Cards","Tarjetas de Crdito")}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:t("Track and manage credit card debt","Rastrea y gestiona deuda de tarjetas")})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>Vb(n,s),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",title:"Download as CSV",children:t("Export","Exportar")}),r.jsx("button",{onClick:()=>c(!d),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:d?t("Cancel","Cancelar"):t("+ Add Card","+ Agregar Tarjeta")})]})]}),s&&r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-750 rounded-xl p-4 shadow-md border border-gray-200 dark:border-gray-700",children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:t("Total Debt","Deuda Total")}),r.jsxs("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:["$",((u=s.totalDebt)==null?void 0:u.toFixed(2))||"0.00"]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-750 rounded-xl p-4 shadow-md border border-gray-200 dark:border-gray-700",children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:t("Original Balance","Balance Original")}),r.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:["$",((w=s.totalOriginal)==null?void 0:w.toFixed(2))||"0.00"]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-750 rounded-xl p-4 shadow-md border border-gray-200 dark:border-gray-700",children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:t("Amount Paid","Pagado")}),r.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:["$",((p=s.totalPaid)==null?void 0:p.toFixed(2))||"0.00"]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-750 rounded-xl p-4 shadow-md border border-gray-200 dark:border-gray-700",children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:t("Progress","Progreso")}),r.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[s.overallProgress||0,"%"]})]})]}),d&&r.jsx("div",{className:"mb-6",children:r.jsx(zb,{householdId:e==null?void 0:e.householdId,onSuccess:h})}),r.jsx(Hb,{cards:n,loading:i,onUpdate:m,householdId:e==null?void 0:e.householdId})]})})}function Qb(e,t=void 0){if(!e||typeof e!="string")return"Unknown";const[n,a]=e.split("-"),s=parseInt(n,10),o=parseInt(a,10)-1;return new Date(s,o,1,12,0,0,0).toLocaleDateString(t,{year:"numeric",month:"long"})}function nl(){const e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0");return`${t}-${n}`}function fh(e){if(!e||typeof e!="string")return nl();const[t,n]=e.split("-");return`${t}-${n}`}function Jb({householdId:e,creditCards:t,onSuccess:n}){const{t:a}=ue(),[s,o]=g.useState(null),[i,l]=g.useState({cardId:"",statementName:"",month:nl(),statementDate:"",statementBalance:0,currentBalance:0}),d=m=>{const{name:h,value:u}=m.target;if(h==="statementDate"&&u){const w=fh(u);l(p=>({...p,[h]:u,month:w}));return}if(h==="cardId"&&u){const w=t.find(p=>p._id===u);if(w&&i.month){l(p=>({...p,[h]:u,statementName:`${w.cardName} - ${i.month}`}));return}}if(h==="month"&&u){const w=t.find(p=>p._id===i.cardId);if(w){l(p=>({...p,[h]:u,statementName:`${w.cardName} - ${u}`}));return}}l(w=>({...w,[h]:["statementBalance","currentBalance"].includes(h)?parseFloat(u)||0:u}))},c=async m=>{var h,u,w,p,f;if(m.preventDefault(),!i.cardId){alert(a("Please select a credit card","Por favor selecciona una tarjeta"));return}if(!i.statementName.trim()){alert(a("Statement name is required","El nombre del estado es obligatorio"));return}if(!i.statementDate){alert(a("Statement date is required","La fecha del estado es obligatoria"));return}try{await O.post(`/card-statements/${e}`,i),l({cardId:"",statementName:"",month:nl(),statementDate:"",statementBalance:0,currentBalance:0}),o(null),n&&n()}catch(k){console.error("[CardStatementForm] Error:",k),((h=k.response)==null?void 0:h.status)===409&&((w=(u=k.response)==null?void 0:u.data)==null?void 0:w.code)==="DUPLICATE_STATEMENT"?o(k.response.data):alert(((f=(p=k.response)==null?void 0:p.data)==null?void 0:f.error)||a("Failed to create statement","Error al crear estado"))}};return r.jsxs("form",{onSubmit:c,className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-md border border-gray-100 dark:border-gray-700",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:a("Add Card Statement","Agregar Estado de Tarjeta")}),s&&r.jsx("div",{className:"mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"text-2xl",children:""}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-yellow-900 dark:text-yellow-100 mb-2",children:a("Statement Already Exists","La Declaracin Ya Existe")}),r.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200 mb-4",children:s.error}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:()=>{o(null),n&&n(!0)},className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 text-sm font-medium",children:a("Edit Existing","Editar Existente")}),r.jsx("button",{type:"button",onClick:()=>o(null),className:"px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 text-sm font-medium",children:a("Cancel","Cancelar")})]})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[a("Credit Card","Tarjeta de Crdito")," *"]}),r.jsxs("select",{name:"cardId",value:i.cardId,onChange:d,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0,children:[r.jsx("option",{value:"",children:a("Select a card","Selecciona una tarjeta")}),t.map(m=>r.jsxs("option",{value:m._id,children:[m.cardName," - ",m.holder]},m._id))]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[a("Month","Mes")," ",r.jsx("span",{className:"text-xs text-gray-500",children:a("(auto-derived)","(auto-derivado)")})]}),r.jsx("input",{type:"month",name:"month",value:i.month,readOnly:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600 cursor-not-allowed",title:a("Month is automatically calculated from the statement date","El mes se calcula automticamente a partir de la fecha del estado")})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[a("Statement Name","Nombre del Estado")," *"]}),r.jsx("input",{type:"text",name:"statementName",value:i.statementName,onChange:d,placeholder:a("e.g., Chase - 2024-01","ej., Chase - 2024-01"),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[a("Statement Date","Fecha del Estado")," *"]}),r.jsx("input",{type:"date",name:"statementDate",value:i.statementDate,onChange:d,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[a("Statement Balance","Balance del Estado")," *"]}),r.jsx("input",{type:"number",name:"statementBalance",value:i.statementBalance,onChange:d,step:"0.01",min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[a("Current Balance","Balance Actual")," *"]}),r.jsx("input",{type:"number",name:"currentBalance",value:i.currentBalance,onChange:d,step:"0.01",min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]})]}),r.jsx("div",{className:"mt-6",children:r.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-3 rounded-lg font-semibold hover:bg-indigo-700 transition",children:a("Add Statement","Agregar Estado")})})]})}function Xb({statement:e,creditCards:t,onSave:n,onClose:a}){var h;const{t:s}=ue(),[o,i]=g.useState(null),[l,d]=g.useState({cardId:((h=e.cardId)==null?void 0:h._id)||e.cardId||"",statementName:e.statementName||"",month:e.month||"",statementDate:e.statementDate?e.statementDate.split("T")[0]:"",statementBalance:e.statementBalance||0,currentBalance:e.currentBalance||0}),c=u=>{const{name:w,value:p}=u.target;if(i(null),w==="statementDate"&&p){const f=fh(p);d(k=>({...k,[w]:p,month:f}));return}d(f=>({...f,[w]:["statementBalance","currentBalance"].includes(w)?parseFloat(p)||0:p}))},m=u=>{if(u.preventDefault(),i(null),!l.cardId){i(s("Please select a credit card","Por favor selecciona una tarjeta"));return}if(!l.statementName.trim()){i(s("Statement name is required","El nombre del estado es obligatorio"));return}if(!l.statementDate){i(s("Statement date is required","La fecha del estado es obligatoria"));return}n(l)};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:s("Edit Card Statement","Editar Estado de Tarjeta")}),r.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl",children:""})]}),r.jsxs("form",{onSubmit:m,className:"p-6 space-y-4",children:[o&&r.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg",children:r.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:o})}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[s("Credit Card","Tarjeta de Crdito")," *"]}),r.jsxs("select",{name:"cardId",value:l.cardId,onChange:c,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0,children:[r.jsx("option",{value:"",children:s("Select a card","Selecciona una tarjeta")}),t.map(u=>r.jsxs("option",{value:u._id,children:[u.cardName," - ",u.holder]},u._id))]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[s("Month","Mes")," ",r.jsx("span",{className:"text-xs text-gray-500",children:s("(auto-derived)","(auto-derivado)")})]}),r.jsx("input",{type:"month",name:"month",value:l.month,readOnly:!0,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-400 cursor-not-allowed",title:s("Month is automatically calculated from the statement date","El mes se calcula automticamente a partir de la fecha del estado")})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[s("Statement Name","Nombre del Estado")," *"]}),r.jsx("input",{type:"text",name:"statementName",value:l.statementName,onChange:c,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[s("Statement Date","Fecha del Estado")," *"]}),r.jsx("input",{type:"date",name:"statementDate",value:l.statementDate,onChange:c,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[s("Statement Balance","Balance del Estado")," *"]}),r.jsx("input",{type:"number",name:"statementBalance",value:l.statementBalance,onChange:c,step:"0.01",min:"0",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[s("Current Balance","Balance Actual")," *"]}),r.jsx("input",{type:"number",name:"currentBalance",value:l.currentBalance,onChange:c,step:"0.01",min:"0",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"submit",className:"flex-1 bg-indigo-600 dark:bg-indigo-700 text-white py-3 rounded-lg font-semibold hover:bg-indigo-700 dark:hover:bg-indigo-800 transition",children:s("Save Changes","Guardar Cambios")}),r.jsx("button",{type:"button",onClick:a,className:"flex-1 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-white py-3 rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-gray-700 transition",children:s("Cancel","Cancelar")})]})]})]})})}function Zb(){const{user:e}=_e(),{t}=ue(),[n,a]=g.useState([]),[s,o]=g.useState([]),[i,l]=g.useState([]),[d,c]=g.useState(!0),[m,h]=g.useState(!1),[u,w]=g.useState(null),p=g.useCallback(async()=>{if(e!=null&&e.householdId)try{c(!0);const S=await O.get(`/card-statements/${e.householdId}`);a(S.data.statements||[]),o(S.data.byMonth||[])}catch(S){console.error("[CardStatements] Error fetching:",S)}finally{c(!1)}},[e==null?void 0:e.householdId]),f=g.useCallback(async()=>{if(e!=null&&e.householdId)try{const S=await O.get(`/credit-cards/${e.householdId}`);l(S.data.cards||[])}catch(S){console.error("[CardStatements] Error fetching cards:",S)}},[e==null?void 0:e.householdId]);g.useEffect(()=>{p(),f()},[p,f]);const k=()=>{h(!1),p()},x=S=>{w(S)},b=async S=>{var C,P,j,N,E,L,D;if(u)try{await O.patch(`/card-statements/${e.householdId}/${u._id}`,S),w(null),p()}catch(M){console.error("[CardStatements] Update error:",M),((C=M.response)==null?void 0:C.status)===409&&((j=(P=M.response)==null?void 0:P.data)==null?void 0:j.code)==="DUPLICATE_STATEMENT"?alert(((E=(N=M.response)==null?void 0:N.data)==null?void 0:E.error)||t("A statement for this card in that month already exists.","Ya existe una declaracin para esta tarjeta en ese mes.")):alert(((D=(L=M.response)==null?void 0:L.data)==null?void 0:D.error)||t("Failed to update statement","Error al actualizar estado"))}},y=async S=>{var C,P;if(window.confirm(t(`Delete "${S.statementName}"?`,`Eliminar "${S.statementName}"?`)))try{await O.delete(`/card-statements/${e.householdId}/${S._id}`),p()}catch(j){console.error("[CardStatements] Delete error:",j),alert(((P=(C=j.response)==null?void 0:C.data)==null?void 0:P.error)||t("Failed to delete statement","Error al eliminar estado"))}},v=async()=>{var S,C;if(window.confirm(t("This will recalculate month values for all statements based on their dates. Continue?","Esto recalcular los valores de mes para todos los estados basado en sus fechas. Continuar?")))try{await O.post(`/card-statements/${e.householdId}/migrate-fix-months`),alert(t("Month values have been fixed!","Los valores del mes han sido reparados!")),p()}catch(P){console.error("[CardStatements] Migration error:",P),alert(((C=(S=P.response)==null?void 0:S.data)==null?void 0:C.error)||t("Failed to fix month values","Error al reparar valores del mes"))}};return d?r.jsx(Te,{children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500 mx-auto"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-4",children:t("Loading...","Cargando...")})]})}):r.jsx(Te,{children:r.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:t("Card Statements","Estados de Tarjetas")}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:t("Track monthly credit card statements","Rastrea estados mensuales de tarjetas")})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>qb(n),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",title:"Download as CSV",children:t("Export","Exportar")}),r.jsx("button",{onClick:v,className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors text-sm",title:"Fix month values",children:t("Fix Months","Reparar Meses")}),r.jsx("button",{onClick:()=>h(!m),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:m?t("Cancel","Cancelar"):t("+ Add Statement","+ Agregar Estado")})]})]}),m&&r.jsx("div",{className:"mb-6",children:r.jsx(Jb,{householdId:e==null?void 0:e.householdId,creditCards:i,onSuccess:k})}),s.length===0?r.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-750 rounded-xl border border-gray-200 dark:border-gray-700",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:t("No Statements Yet","Sin Estados")}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t("Add your first statement to start tracking","Agrega tu primer estado para comenzar")})]}):r.jsx("div",{className:"space-y-6",children:s.map(S=>r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-md border border-gray-100 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4 pb-4 border-b border-gray-200 dark:border-gray-700",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:Qb(S.month)}),r.jsxs("div",{className:"flex gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t("Statement Balance","Balance Estado"),":"]}),r.jsxs("span",{className:"ml-2 font-bold text-red-600 dark:text-red-400",children:["$",S.totalStatementBalance.toFixed(2)]})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t("Current","Actual"),":"]}),r.jsxs("span",{className:"ml-2 font-bold text-orange-600 dark:text-orange-400",children:["$",S.totalCurrentBalance.toFixed(2)]})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t("Paid","Pagado"),":"]}),r.jsxs("span",{className:"ml-2 font-bold text-green-600 dark:text-green-400",children:["$",S.totalPaid.toFixed(2)]})]})]})]}),r.jsx("div",{className:"space-y-3",children:S.statements.map(C=>{var P;return r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-200",children:C.statementName}),C.cardId&&r.jsxs("span",{className:"px-2 py-1 bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 rounded-full text-xs",children:[C.cardId.cardName," - ",C.cardId.holder]})]}),r.jsxs("div",{className:"flex gap-6 text-sm text-gray-600 dark:text-gray-400",children:[r.jsxs("div",{children:[r.jsxs("span",{className:"font-medium",children:[t("Statement Date","Fecha"),":"]})," ",new Date(C.statementDate).toLocaleDateString()]}),r.jsxs("div",{children:[r.jsxs("span",{className:"font-medium",children:[t("Statement Balance","Balance Estado"),":"]})," ","$",C.statementBalance.toFixed(2)]}),r.jsxs("div",{children:[r.jsxs("span",{className:"font-medium",children:[t("Current Balance","Balance Actual"),":"]})," ","$",C.currentBalance.toFixed(2)]}),r.jsxs("div",{children:[r.jsxs("span",{className:"font-medium",children:[t("Paid","Pagado"),":"]})," ",r.jsxs("span",{className:"text-green-600 dark:text-green-400 font-semibold",children:["$",((P=C.amountPaid)==null?void 0:P.toFixed(2))||"0.00"]})]})]})]}),r.jsxs("div",{className:"flex gap-2 ml-4",children:[r.jsx("button",{onClick:()=>x(C),className:"px-3 py-1 text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300",children:t("Edit","Editar")}),r.jsx("button",{onClick:()=>y(C),className:"px-3 py-1 text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300",children:t("Delete","Eliminar")})]})]},C._id)})})]},S.month))}),u&&r.jsx(Xb,{statement:u,creditCards:i,onSave:b,onClose:()=>w(null)})]})})}function ev({householdId:e,creditCards:t,statements:n,onSuccess:a}){const{t:s}=ue(),[o,i]=g.useState({cardId:"",cardStatementId:"",paymentDate:new Date().toISOString().split("T")[0],amountPaid:0,notes:""}),l=m=>{const{name:h,value:u}=m.target;i(w=>({...w,[h]:h==="amountPaid"?parseFloat(u)||0:u}))},d=async m=>{var h,u;if(m.preventDefault(),!o.cardId){alert(s("Please select a credit card","Por favor selecciona una tarjeta"));return}if(!o.paymentDate){alert(s("Payment date is required","La fecha de pago es obligatoria"));return}if(o.amountPaid<=0){alert(s("Amount must be greater than 0","La cantidad debe ser mayor que 0"));return}try{await O.post(`/debt-payments/${e}`,o),i({cardId:"",cardStatementId:"",paymentDate:new Date().toISOString().split("T")[0],amountPaid:0,notes:""}),a&&a()}catch(w){console.error("[DebtPaymentForm] Error:",w),alert(((u=(h=w.response)==null?void 0:h.data)==null?void 0:u.error)||s("Failed to create payment","Error al crear pago"))}},c=o.cardId?n.filter(m=>{var h;return((h=m.cardId)==null?void 0:h._id)===o.cardId||m.cardId===o.cardId}):[];return r.jsxs("form",{onSubmit:d,className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-md border border-gray-100 dark:border-gray-700",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:s("Record Debt Payment","Registrar Pago de Deuda")}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s("Credit Card","Tarjeta de Crdito")," *"]}),r.jsxs("select",{name:"cardId",value:o.cardId,onChange:l,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0,children:[r.jsx("option",{value:"",children:s("Select a card","Selecciona una tarjeta")}),t.map(m=>r.jsxs("option",{value:m._id,children:[m.cardName," - ",m.holder," ($",m.currentBalance.toFixed(2),")"]},m._id))]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s("Payment Date","Fecha de Pago")," *"]}),r.jsx("input",{type:"date",name:"paymentDate",value:o.paymentDate,onChange:l,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s("Amount Paid","Cantidad Pagada")," *"]}),r.jsx("input",{type:"number",name:"amountPaid",value:o.amountPaid,onChange:l,step:"0.01",min:"0",placeholder:"0.00",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s("Link to Statement (Optional)","Vincular a Estado (Opcional)")}),r.jsxs("select",{name:"cardStatementId",value:o.cardStatementId,onChange:l,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:s("None","Ninguno")}),c.map(m=>r.jsxs("option",{value:m._id,children:[m.statementName," ($",m.currentBalance.toFixed(2),")"]},m._id))]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s("Notes (Optional)","Notas (Opcional)")}),r.jsx("textarea",{name:"notes",value:o.notes,onChange:l,rows:2,placeholder:s("Any additional notes...","Notas adicionales..."),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})]}),r.jsx("div",{className:"mt-6",children:r.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-3 rounded-lg font-semibold hover:bg-indigo-700 transition",children:s("Record Payment","Registrar Pago")})})]})}function tv({payment:e,creditCards:t,statements:n,onSave:a,onClose:s}){var h,u;const{t:o}=ue(),[i,l]=g.useState({cardId:((h=e.cardId)==null?void 0:h._id)||e.cardId||"",cardStatementId:((u=e.cardStatementId)==null?void 0:u._id)||e.cardStatementId||"",paymentDate:e.paymentDate?e.paymentDate.split("T")[0]:"",amountPaid:e.amountPaid||0,notes:e.notes||""}),d=w=>{const{name:p,value:f}=w.target;l(k=>({...k,[p]:p==="amountPaid"?parseFloat(f)||0:f}))},c=w=>{if(w.preventDefault(),!i.cardId){alert(o("Please select a credit card","Por favor selecciona una tarjeta"));return}if(!i.paymentDate){alert(o("Payment date is required","La fecha de pago es obligatoria"));return}if(i.amountPaid<=0){alert(o("Amount must be greater than 0","La cantidad debe ser mayor que 0"));return}a(i)},m=i.cardId?n.filter(w=>{var p;return((p=w.cardId)==null?void 0:p._id)===i.cardId||w.cardId===i.cardId}):[];return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:o("Edit Debt Payment","Editar Pago de Deuda")}),r.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl",children:""})]}),r.jsxs("form",{onSubmit:c,className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[o("Credit Card","Tarjeta de Crdito")," *"]}),r.jsxs("select",{name:"cardId",value:i.cardId,onChange:d,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0,children:[r.jsx("option",{value:"",children:o("Select a card","Selecciona una tarjeta")}),t.map(w=>r.jsxs("option",{value:w._id,children:[w.cardName," - ",w.holder]},w._id))]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[o("Payment Date","Fecha de Pago")," *"]}),r.jsx("input",{type:"date",name:"paymentDate",value:i.paymentDate,onChange:d,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[o("Amount Paid","Cantidad Pagada")," *"]}),r.jsx("input",{type:"number",name:"amountPaid",value:i.amountPaid,onChange:d,step:"0.01",min:"0",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:o("Link to Statement (Optional)","Vincular a Estado (Opcional)")}),r.jsxs("select",{name:"cardStatementId",value:i.cardStatementId,onChange:d,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[r.jsx("option",{value:"",children:o("None","Ninguno")}),m.map(w=>r.jsx("option",{value:w._id,children:w.statementName},w._id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:o("Notes (Optional)","Notas (Opcional)")}),r.jsx("textarea",{name:"notes",value:i.notes,onChange:d,rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"submit",className:"flex-1 bg-indigo-600 dark:bg-indigo-700 text-white py-3 rounded-lg font-semibold hover:bg-indigo-700 dark:hover:bg-indigo-800 transition",children:o("Save Changes","Guardar Cambios")}),r.jsx("button",{type:"button",onClick:s,className:"flex-1 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-white py-3 rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-gray-700 transition",children:o("Cancel","Cancelar")})]})]})]})})}function rv(){var N;const{user:e}=_e(),{t}=ue(),[n,a]=g.useState([]),[s,o]=g.useState([]),[i,l]=g.useState({}),[d,c]=g.useState([]),[m,h]=g.useState([]),[u,w]=g.useState(!0),[p,f]=g.useState(!1),[k,x]=g.useState(null),b=g.useCallback(async()=>{if(e!=null&&e.householdId)try{w(!0);const E=await O.get(`/debt-payments/${e.householdId}`);a(E.data.payments||[]),o(E.data.byMonth||[]),l(E.data.summary||{})}catch(E){console.error("[DebtPayments] Error fetching:",E)}finally{w(!1)}},[e==null?void 0:e.householdId]),y=g.useCallback(async()=>{if(e!=null&&e.householdId)try{const E=await O.get(`/credit-cards/${e.householdId}`);c(E.data.cards||[])}catch(E){console.error("[DebtPayments] Error fetching cards:",E)}},[e==null?void 0:e.householdId]),v=g.useCallback(async()=>{if(e!=null&&e.householdId)try{const E=await O.get(`/card-statements/${e.householdId}`);h(E.data.statements||[])}catch(E){console.error("[DebtPayments] Error fetching statements:",E)}},[e==null?void 0:e.householdId]);g.useEffect(()=>{b(),y(),v()},[b,y,v]);const S=()=>{f(!1),b(),y(),v()},C=E=>{x(E)},P=async E=>{var L,D;if(k)try{await O.patch(`/debt-payments/${e.householdId}/${k._id}`,E),x(null),b(),y(),v()}catch(M){console.error("[DebtPayments] Update error:",M),alert(((D=(L=M.response)==null?void 0:L.data)==null?void 0:D.error)||t("Failed to update payment","Error al actualizar pago"))}},j=async E=>{var L,D;if(window.confirm(t("Delete this payment?","Eliminar este pago?")))try{await O.delete(`/debt-payments/${e.householdId}/${E._id}`),b(),y(),v()}catch(M){console.error("[DebtPayments] Delete error:",M),alert(((D=(L=M.response)==null?void 0:L.data)==null?void 0:D.error)||t("Failed to delete payment","Error al eliminar pago"))}};return u?r.jsx(Te,{children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500 mx-auto"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-4",children:t("Loading...","Cargando...")})]})}):r.jsx(Te,{children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:t("Debt Payments","Pagos de Deuda")}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:t("Record and track credit card payments","Registra y rastrea pagos de tarjetas")})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>Gb(n),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",title:"Download as CSV",children:t("Export","Exportar")}),r.jsx("button",{onClick:()=>f(!p),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:p?t("Cancel","Cancelar"):t("+ Add Payment","+ Agregar Pago")})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-750 rounded-xl p-4 shadow-md border border-gray-200 dark:border-gray-700",children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:t("Total Paid","Total Pagado")}),r.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:["$",((N=i.totalPaid)==null?void 0:N.toFixed(2))||"0.00"]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-750 rounded-xl p-4 shadow-md border border-gray-200 dark:border-gray-700",children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:t("Number of Payments","Nmero de Pagos")}),r.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:i.paymentCount||0})]})]}),p&&r.jsx("div",{className:"mb-6",children:r.jsx(ev,{householdId:e==null?void 0:e.householdId,creditCards:d,statements:m,onSuccess:S})}),s.length===0?r.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-750 rounded-xl border border-gray-200 dark:border-gray-700",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:t("No Payments Yet","Sin Pagos")}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t("Add your first payment to start tracking","Agrega tu primer pago para comenzar")})]}):r.jsx("div",{className:"space-y-6",children:s.map(E=>r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-md border border-gray-100 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4 pb-4 border-b border-gray-200 dark:border-gray-700",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:new Date(E.month+"-01").toLocaleDateString(void 0,{year:"numeric",month:"long"})}),r.jsxs("div",{className:"flex gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t("Total Paid","Total Pagado"),":"]}),r.jsxs("span",{className:"ml-2 font-bold text-green-600 dark:text-green-400",children:["$",E.totalPaid.toFixed(2)]})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t("Payments","Pagos"),":"]}),r.jsx("span",{className:"ml-2 font-bold text-gray-700 dark:text-gray-300",children:E.paymentCount})]})]})]}),r.jsx("div",{className:"space-y-3",children:E.payments.map(L=>r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[L.cardId&&r.jsxs("span",{className:"px-3 py-1 bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 rounded-full text-sm font-medium",children:[L.cardId.cardName," - ",L.cardId.holder]}),r.jsxs("span",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:["$",L.amountPaid.toFixed(2)]})]}),r.jsxs("div",{className:"flex gap-6 text-sm text-gray-600 dark:text-gray-400",children:[r.jsxs("div",{children:[r.jsxs("span",{className:"font-medium",children:[t("Payment Date","Fecha de Pago"),":"]})," ",new Date(L.paymentDate).toLocaleDateString()]}),L.cardStatementId&&r.jsxs("div",{children:[r.jsxs("span",{className:"font-medium",children:[t("Statement","Estado"),":"]})," ",L.cardStatementId.statementName]}),L.notes&&r.jsxs("div",{children:[r.jsxs("span",{className:"font-medium",children:[t("Notes","Notas"),":"]})," ",L.notes]})]})]}),r.jsxs("div",{className:"flex gap-2 ml-4",children:[r.jsx("button",{onClick:()=>C(L),className:"px-3 py-1 text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300",children:t("Edit","Editar")}),r.jsx("button",{onClick:()=>j(L),className:"px-3 py-1 text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300",children:t("Delete","Eliminar")})]})]},L._id))})]},E.month))}),k&&r.jsx(tv,{payment:k,creditCards:d,statements:m,onSave:P,onClose:()=>x(null)})]})})}function nv(){const{user:e}=_e(),{t}=ue(),n=lt(),[a,s]=g.useState([]),[o,i]=g.useState([]),[l,d]=g.useState(!0),[c,m]=g.useState(null),h=g.useCallback(async()=>{if(e!=null&&e.householdId)try{d(!0);const[u,w,p]=await Promise.all([O.get(`/income/${e.householdId}`),O.get(`/fixed-expenses/${e.householdId}`),O.get(`/income-splits/${e.householdId}`).catch(()=>({data:{splits:[]}}))]),f=u.data.incomes||[],k=w.data.expenses||[],x=p.data.splits||[];i(x);const b={};f.forEach(S=>{const C=S.month;if(!C||!/^\d{4}-\d{2}$/.test(C)||parseInt(C.substring(0,4))<2020)return;b[C]||(b[C]={month:C,totalIncome:0,totalExpenses:0,incomeItems:[],expenseItems:[]});const P=Number(S.weeklyTotal)||Number(S.amount)||0;b[C].totalIncome+=P,b[C].incomeItems.push({...S,amount:P})});const y=k.reduce((S,C)=>S+(Number(C.amount)||0),0);Object.keys(b).forEach(S=>{b[S].totalExpenses=y,b[S].expenseItems=k});const v=Object.values(b).map(S=>{const C=S.totalIncome-S.totalExpenses,j=C/4.33;return{...S,remaining:C,weeklyAllowance:j,perPersonSplit:x.map(N=>({name:N.userName,percentage:N.splitPercentage,amount:C*N.splitPercentage/100,weekly:j*N.splitPercentage/100}))}});v.sort((S,C)=>C.month.localeCompare(S.month)),s(v)}catch(u){console.error("[MonthlyOverview] Error fetching:",u)}finally{d(!1)}},[e==null?void 0:e.householdId]);return g.useEffect(()=>{h()},[h]),l?r.jsx(Te,{children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500 mx-auto"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-4",children:t("Loading...","Cargando...")})]})}):r.jsx(Te,{children:r.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:t("Monthly Overview","Resumen Mensual")}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:t("View income, expenses, and budget breakdown by month","Ver ingresos, gastos y presupuesto por mes")})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>{var u;return n(`/finance-report?month=${c||((u=a[0])==null?void 0:u.month)||""}`)},className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-sm flex items-center gap-1.5",title:"Open Finance Meeting Report",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),t("Finance Meeting Report","Reporte de Reunin")]}),r.jsx("button",{onClick:()=>Yb(a),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",title:"Download as CSV",children:t("Export","Exportar")})]})]}),a.length===0?r.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-750 rounded-xl border border-gray-200 dark:border-gray-700",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:t("No Data Yet","Sin Datos")}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t("Add income and expenses to see monthly overview","Agrega ingresos y gastos para ver resumen")})]}):r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-md border border-gray-100 dark:border-gray-700 overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 dark:text-gray-300",children:t("Month","Mes")}),r.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700 dark:text-gray-300",children:t("Total Income","Ingreso Total")}),r.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700 dark:text-gray-300",children:t("Fixed Expenses","Gastos Fijos")}),r.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700 dark:text-gray-300",children:t("Remaining","Restante")}),r.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-700 dark:text-gray-300",children:t("Weekly Allowance","Asignacin Semanal")}),r.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-gray-700 dark:text-gray-300",children:t("Actions","Acciones")})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:a.map(u=>r.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors cursor-pointer",onClick:()=>m(c===u.month?null:u.month),children:[r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-800 dark:text-gray-200",children:new Date(u.month+"-02T12:00:00").toLocaleDateString(void 0,{year:"numeric",month:"long"})}),r.jsxs("td",{className:"px-6 py-4 text-sm text-right font-semibold text-green-600 dark:text-green-400",children:["$",(Number(u.totalIncome)||0).toFixed(2)]}),r.jsxs("td",{className:"px-6 py-4 text-sm text-right font-semibold text-red-600 dark:text-red-400",children:["$",(Number(u.totalExpenses)||0).toFixed(2)]}),r.jsxs("td",{className:"px-6 py-4 text-sm text-right font-bold text-blue-600 dark:text-blue-400",children:["$",(Number(u.remaining)||0).toFixed(2)]}),r.jsxs("td",{className:"px-6 py-4 text-sm text-right font-semibold text-purple-600 dark:text-purple-400",children:["$",(Number(u.weeklyAllowance)||0).toFixed(2)]}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("button",{className:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 text-sm",onClick:w=>{w.stopPropagation(),m(c===u.month?null:u.month)},children:c===u.month?t("Hide","Ocultar"):t("Details","Detalles")})})]},u.month))})]})}),c&&a.find(u=>u.month===c)&&r.jsxs("div",{className:"mt-4 bg-white dark:bg-gray-800 rounded-2xl shadow-md border border-gray-100 dark:border-gray-700 overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between px-5 py-3 bg-gray-50 dark:bg-gray-750 border-b border-gray-200 dark:border-gray-600",children:[r.jsxs("h2",{className:"text-sm font-bold text-gray-700 dark:text-gray-200 uppercase tracking-wide",children:[new Date(c+"-02T12:00:00").toLocaleDateString(void 0,{year:"numeric",month:"long"}),r.jsx("span",{className:"ml-2 font-normal text-gray-400 normal-case tracking-normal",children:t(" Budget Breakdown"," Desglose de Presupuesto")})]}),r.jsx("button",{onClick:()=>m(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 text-xl leading-none px-1","aria-label":"Close",children:""})]}),(()=>{const u=a.find(k=>k.month===c),w=u.remaining||0,p=u.totalIncome>0?Math.min(100,Math.max(0,w/u.totalIncome*100)):0,f=p>=30?"bg-green-500":p>=10?"bg-yellow-400":"bg-red-500";return r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[r.jsxs("div",{className:"bg-green-50 dark:bg-green-900/25 rounded-xl px-3 py-2.5",children:[r.jsx("div",{className:"text-xs font-semibold text-green-600 dark:text-green-400 uppercase tracking-wide",children:t("Income","Ingresos")}),r.jsxs("div",{className:"text-xl font-bold text-green-700 dark:text-green-300",children:["$",(u.totalIncome||0).toFixed(2)]}),r.jsxs("div",{className:"text-xs text-gray-400 mt-0.5",children:[u.incomeItems.length," ",u.incomeItems.length===1?t("entry","registro"):t("entries","registros")]})]}),r.jsxs("div",{className:"bg-red-50 dark:bg-red-900/25 rounded-xl px-3 py-2.5",children:[r.jsx("div",{className:"text-xs font-semibold text-red-600 dark:text-red-400 uppercase tracking-wide",children:t("Fixed Exp.","Gastos Fijos")}),r.jsxs("div",{className:"text-xl font-bold text-red-700 dark:text-red-300",children:["$",(u.totalExpenses||0).toFixed(2)]}),r.jsxs("div",{className:"text-xs text-gray-400 mt-0.5",children:[u.expenseItems.length," ",u.expenseItems.length===1?t("item","tem"):t("items","tems")]})]}),r.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/25 rounded-xl px-3 py-2.5",children:[r.jsx("div",{className:"text-xs font-semibold text-blue-600 dark:text-blue-400 uppercase tracking-wide",children:t("Remaining","Restante")}),r.jsxs("div",{className:`text-xl font-bold ${w>=0?"text-blue-700 dark:text-blue-300":"text-red-600 dark:text-red-400"}`,children:["$",w.toFixed(2)]}),r.jsx("div",{className:"mt-1.5 h-1.5 bg-gray-200 dark:bg-gray-600 rounded-full overflow-hidden",children:r.jsx("div",{className:`h-full rounded-full ${f}`,style:{width:`${p}%`}})})]}),r.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/25 rounded-xl px-3 py-2.5",children:[r.jsx("div",{className:"text-xs font-semibold text-purple-600 dark:text-purple-400 uppercase tracking-wide",children:t("Wk Allowance","Asign. Semanal")}),r.jsxs("div",{className:"text-xl font-bold text-purple-700 dark:text-purple-300",children:["$",(u.weeklyAllowance||0).toFixed(2)]}),r.jsxs("div",{className:"text-xs text-gray-400 mt-0.5",children:[" 4.33 ",t("weeks","semanas")]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:[u.incomeItems.length>0&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[r.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 shrink-0"}),r.jsx("span",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:t("Income Sources","Fuentes de Ingreso")})]}),r.jsx("div",{className:"border border-gray-200 dark:border-gray-600 rounded-xl overflow-hidden",children:r.jsxs("table",{className:"w-full text-xs",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-500 dark:text-gray-400",children:t("Contributor","Contribuidor")}),r.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-500 dark:text-gray-400",children:t("Source","Fuente")}),r.jsx("th",{className:"px-3 py-2 text-center font-semibold text-gray-500 dark:text-gray-400",children:"Wk"}),r.jsx("th",{className:"px-3 py-2 text-right font-semibold text-gray-500 dark:text-gray-400",children:t("Amount","Monto")})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:u.incomeItems.map((k,x)=>{var b,y;return r.jsxs("tr",{className:"hover:bg-green-50 dark:hover:bg-green-900/20",children:[r.jsx("td",{className:"px-3 py-1.5 font-medium text-gray-700 dark:text-gray-300",children:k.contributorName||""}),r.jsx("td",{className:"px-3 py-1.5 text-gray-500 dark:text-gray-400",children:((y=(b=k.dailyBreakdown)==null?void 0:b[0])==null?void 0:y.source)||k.source||""}),r.jsx("td",{className:"px-3 py-1.5 text-center text-gray-400 dark:text-gray-500",children:k.week||""}),r.jsxs("td",{className:"px-3 py-1.5 text-right font-semibold text-green-600 dark:text-green-400",children:["$",(Number(k.weeklyTotal)||Number(k.amount)||0).toFixed(2)]})]},k._id||x)})}),r.jsx("tfoot",{children:r.jsxs("tr",{className:"bg-green-50 dark:bg-green-900/30",children:[r.jsx("td",{colSpan:3,className:"px-3 py-1.5 text-xs font-bold text-green-700 dark:text-green-300 uppercase",children:t("Total","Total")}),r.jsxs("td",{className:"px-3 py-1.5 text-right text-xs font-bold text-green-700 dark:text-green-300",children:["$",(u.totalIncome||0).toFixed(2)]})]})})]})})]}),u.expenseItems.length>0&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[r.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500 shrink-0"}),r.jsx("span",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:t("Fixed Expenses","Gastos Fijos")})]}),r.jsx("div",{className:"border border-gray-200 dark:border-gray-600 rounded-xl overflow-hidden",children:r.jsxs("table",{className:"w-full text-xs",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-500 dark:text-gray-400",children:t("Name","Nombre")}),r.jsx("th",{className:"px-3 py-2 text-center font-semibold text-gray-500 dark:text-gray-400",children:t("Freq","Frec.")}),r.jsx("th",{className:"px-3 py-2 text-right font-semibold text-gray-500 dark:text-gray-400",children:t("Amount","Monto")})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:u.expenseItems.map((k,x)=>r.jsxs("tr",{className:"hover:bg-red-50 dark:hover:bg-red-900/20",children:[r.jsx("td",{className:"px-3 py-1.5 font-medium text-gray-700 dark:text-gray-300",children:k.name||""}),r.jsx("td",{className:"px-3 py-1.5 text-center",children:r.jsx("span",{className:"inline-block px-1.5 py-0.5 rounded text-xs bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 capitalize",children:k.frequency||"monthly"})}),r.jsxs("td",{className:"px-3 py-1.5 text-right font-semibold text-red-600 dark:text-red-400",children:["$",(Number(k.amount)||0).toFixed(2)]})]},k._id||x))}),r.jsx("tfoot",{children:r.jsxs("tr",{className:"bg-red-50 dark:bg-red-900/30",children:[r.jsx("td",{colSpan:2,className:"px-3 py-1.5 text-xs font-bold text-red-700 dark:text-red-300 uppercase",children:t("Total","Total")}),r.jsxs("td",{className:"px-3 py-1.5 text-right text-xs font-bold text-red-700 dark:text-red-300",children:["$",(u.totalExpenses||0).toFixed(2)]})]})})]})})]})]}),u.perPersonSplit&&u.perPersonSplit.length>0&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[r.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500 shrink-0"}),r.jsx("span",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:t("Income Split","Divisin de Ingresos")})]}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2",children:u.perPersonSplit.map((k,x)=>r.jsxs("div",{className:"border border-indigo-100 dark:border-indigo-800 rounded-xl px-3 py-2.5 bg-indigo-50/40 dark:bg-indigo-900/20",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 truncate",children:k.name}),r.jsxs("span",{className:"text-xs text-indigo-500 dark:text-indigo-400 ml-1 shrink-0",children:[k.percentage,"%"]})]}),r.jsxs("div",{className:"flex justify-between items-end gap-1",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-gray-400",children:t("Month","Mes")}),r.jsxs("div",{className:"text-sm font-bold text-indigo-700 dark:text-indigo-300",children:["$",(Number(k.amount)||0).toFixed(0)]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-xs text-gray-400",children:t("Week","Sem.")}),r.jsxs("div",{className:"text-sm font-bold text-purple-600 dark:text-purple-400",children:["$",(Number(k.weekly)||0).toFixed(0)]})]})]})]},x))})]})]})})()]})]})})}function av(){const[e,t]=g.useState(!1),[n,a]=g.useState(null),s=g.useCallback(async l=>{var d,c;try{return t(!0),a(null),(await O.post(`/households/invite/accept/${l}`)).data}catch(m){const h=((c=(d=m==null?void 0:m.response)==null?void 0:d.data)==null?void 0:c.error)||"Failed to accept invite";throw a(h),m}finally{t(!1)}},[]),o=g.useCallback(async l=>{var d,c;try{return t(!0),a(null),(await O.post(`/households/invite/decline/${l}`)).data}catch(m){const h=((c=(d=m==null?void 0:m.response)==null?void 0:d.data)==null?void 0:c.error)||"Failed to decline invite";throw a(h),m}finally{t(!1)}},[]),i=g.useCallback(()=>{a(null)},[]);return{loading:e,error:n,acceptInvite:s,declineInvite:o,clearError:i}}function sv(){const{token:e}=Rm(),{user:t}=_e(),n=lt(),{t:a}=ue(),{loading:s,error:o,acceptInvite:i,declineInvite:l}=av(),[d,c]=g.useState(null);g.useEffect(()=>{t||n(`/register/${e}`,{replace:!0})},[t,n,e]);const m=async()=>{if(!e){c({type:"error",text:a("Invalid invite link","Enlace de invitacin invlido")});return}try{const u=await i(e);console.log("[InviteAccept] accepted:",u),c({type:"success",text:a("Successfully joined household!","Te uniste al hogar exitosamente!")}),setTimeout(()=>{n("/dashboard",{replace:!0})},2e3)}catch(u){console.error("[InviteAccept] error:",u),c({type:"error",text:o||a("Failed to join household","Error al unirse al hogar")})}},h=async()=>{if(e)try{await l(e),c({type:"info",text:a("Invite declined","Invitacin rechazada")}),setTimeout(()=>{n("/dashboard",{replace:!0})},2e3)}catch(u){console.error("[InviteDecline] error:",u),c({type:"error",text:o||a("Failed to decline invite","Error al rechazar invitacin")})}};return t?r.jsx(Te,{children:r.jsx("div",{className:"max-w-md mx-auto mt-12",children:r.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"text-5xl mb-3",children:""}),r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:a("Household Invitation","Invitacin del Hogar")})]}),d?r.jsxs("div",{className:`p-4 rounded-lg text-center ${d.type==="success"?"bg-green-50 text-green-700 border border-green-200":d.type==="error"?"bg-red-50 text-red-700 border border-red-200":"bg-blue-50 text-blue-700 border border-blue-200"}`,children:[r.jsx("div",{className:"text-sm font-medium",children:d.text}),d.type==="success"&&r.jsx("div",{className:"text-xs mt-2",children:a("Redirecting...","Redirigiendo...")})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-6 text-center text-gray-600",children:[r.jsx("p",{className:"text-sm",children:a("You have been invited to join a household!","Has sido invitado a unirte a un hogar!")}),r.jsxs("p",{className:"text-sm mt-2",children:[a("Email:","Email:")," ",r.jsx("span",{className:"font-medium",children:t==null?void 0:t.email})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:h,disabled:s,className:"flex-1 px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 disabled:opacity-60 transition-colors",children:a("Decline","Rechazar")}),r.jsx("button",{onClick:m,disabled:s,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-60 transition-colors",children:s?a("Joining...","Unindose..."):a("Accept","Aceptar")})]})]})]})})}):r.jsx("div",{className:"text-center py-12",children:a("Redirecting to login...","Redirigiendo a inicio de sesin...")})}function ov({householdId:e,onInviteSent:t}){const{t:n}=ue(),[a,s]=g.useState(""),[o,i]=g.useState(!1),[l,d]=g.useState(null),[c,m]=g.useState(null),h=async p=>{var f,k;if(p.preventDefault(),!a)return alert(n("Enter an email","Ingresa un email"));i(!0);try{const x=await O.post(`/households/${e}/invite`,{email:a});console.log("[HouseholdInviteForm] invite sent:",x.data),m(x.data.invite.inviteToken),d({type:"success",text:n("Invite sent! Share the link below.","Invitacin enviada! Comparte el enlace abajo.")}),s(""),t&&t()}catch(x){console.error("[HouseholdInviteForm] error:",x),d({type:"error",text:((k=(f=x==null?void 0:x.response)==null?void 0:f.data)==null?void 0:k.error)||n("Failed to send invite","Error al enviar invitacin")})}finally{i(!1)}},u=()=>c?`${window.location.origin}/invite/${c}`:"",w=()=>{const p=u();navigator.clipboard.writeText(p),alert(n("Link copied!","Enlace copiado!"))};return r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-md border border-gray-100 dark:border-gray-700",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:n("Invite Members to Household","Invitar Miembros al Hogar")}),r.jsxs("form",{onSubmit:h,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-2",children:n("Email Address","Direccin de Email")}),r.jsx("input",{type:"email",value:a,onChange:p=>s(p.target.value),placeholder:"member@example.com",className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400"})]}),r.jsx("button",{type:"submit",disabled:o,className:"w-full px-4 py-2 bg-indigo-600 dark:bg-indigo-700 text-white rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-800 disabled:opacity-60 transition-colors",children:o?n("Sending...","Enviando..."):n("Send Invite","Enviar Invitacin")})]}),l&&r.jsx("div",{className:`mt-4 p-4 rounded-lg transition-colors ${l.type==="success"?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-700":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 border border-red-200 dark:border-red-700"}`,children:r.jsx("div",{className:"text-sm font-medium",children:l.text})}),c&&r.jsxs("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:[r.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300 font-medium mb-2",children:[n("Invite Link","Enlace de Invitacin"),":"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"text",readOnly:!0,value:u(),className:"flex-1 p-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded text-xs dark:text-white"}),r.jsx("button",{onClick:w,className:"px-3 py-2 bg-blue-600 dark:bg-blue-700 text-white rounded text-xs hover:bg-blue-700 dark:hover:bg-blue-800 transition-colors",children:n("Copy","Copiar")})]}),r.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-300 mt-2",children:n("Link expires in 30 days","El enlace expira en 30 das")})]})]})}function iv(){var k,x,b;const{user:e}=_e(),{t}=ue(),[n,a]=g.useState(null),[s,o]=g.useState([]),[i,l]=g.useState(!0),[d,c]=g.useState(null),[m,h]=g.useState(null),u=async()=>{var y,v;if(e!=null&&e.householdId)try{l(!0);const[S,C]=await Promise.all([O.get(`/households/${e.householdId}`),O.get(`/households/${e.householdId}/invites`)]);a(S.data),o(C.data.invites||[]),c(null)}catch(S){console.error("[MemberManagement] Error fetching data:",S),c(((v=(y=S.response)==null?void 0:y.data)==null?void 0:v.error)||"Failed to load member data")}finally{l(!1)}};g.useEffect(()=>{u()},[e==null?void 0:e.householdId]);const w=async y=>{var v,S;if(confirm(t("Are you sure you want to cancel this invite?","Seguro que quieres cancelar esta invitacin?")))try{await O.delete(`/households/${e.householdId}/invites/${y}`),u()}catch(C){console.error("[MemberManagement] Error canceling invite:",C),alert(((S=(v=C.response)==null?void 0:v.data)==null?void 0:S.error)||t("Failed to cancel invite","Error al cancelar invitacin"))}},p=async y=>{var v,S;if(confirm(t("Are you sure you want to remove this member?","Seguro que quieres eliminar este miembro?")))try{await O.delete(`/households/${e.householdId}/members/${y}`),u()}catch(C){console.error("[MemberManagement] Error removing member:",C),alert(((S=(v=C.response)==null?void 0:v.data)==null?void 0:S.error)||t("Failed to remove member","Error al eliminar miembro"))}};(k=n==null?void 0:n.headOfHouseId)==null||k.toString(),(x=e==null?void 0:e.userId)==null||x.toString();const f=()=>{if(!(n!=null&&n.members)||!(e!=null&&e.userId))return console.log("[MemberManagement] Cannot manage: missing household.members or user.userId",{hasMembers:!!(n!=null&&n.members),userId:e==null?void 0:e.userId}),!1;const y=n.members.find(S=>S.userId===e.userId);console.log("[MemberManagement] User member found:",y);const v=y&&(y.role==="admin"||y.role==="owner");return console.log("[MemberManagement] Can manage members?",v,"User role:",y==null?void 0:y.role),v};return i?r.jsx(Te,{children:r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:t("Loading...","Cargando...")})]})})}):r.jsx(Te,{children:r.jsxs("div",{className:"max-w-5xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:t("Member Management","Gestin de Miembros")}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:t("Manage household members and invitations","Gestionar miembros e invitaciones del hogar")})]}),d&&r.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg",children:r.jsx("p",{className:"text-red-700 dark:text-red-300 text-sm",children:d})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-md border border-gray-100 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t("Household Members","Miembros del Hogar")}),r.jsx("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded-full text-sm font-medium",children:((b=n==null?void 0:n.members)==null?void 0:b.length)||0})]}),n!=null&&n.members&&n.members.length>0?r.jsx("div",{className:"space-y-3",children:n.members.map((y,v)=>{var S;return r.jsxs("button",{onClick:()=>f()&&h(y),className:`w-full flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg transition ${f()?"hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer hover:shadow-md":"cursor-default"}`,children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1 text-left",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-indigo-600 dark:text-indigo-300 font-semibold text-sm",children:((S=y.name)==null?void 0:S.charAt(0).toUpperCase())||"?"})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:y.name||"Member"}),r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:y.email||""}),y.incomePercentage>0&&r.jsxs("div",{className:"text-xs text-indigo-600 dark:text-indigo-400 mt-0.5",children:[t("Income Contribution","Contribucin de Ingresos"),": ",y.incomePercentage,"%"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[y.role&&r.jsx("span",{className:"px-2 py-1 bg-gray-200 text-gray-700 rounded text-xs font-medium",children:y.role}),f()?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:C=>{C.stopPropagation(),h(y)},className:"text-indigo-600 hover:text-indigo-800 text-sm px-2",title:t("Edit member","Editar miembro"),children:""}),r.jsx("button",{onClick:C=>{C.stopPropagation(),p(y.userId)},className:"text-red-600 hover:text-red-800 text-sm px-2",title:t("Remove member","Eliminar miembro"),children:""})]}):null]})]},v)})}):r.jsx("div",{className:"text-center py-8 text-gray-400",children:r.jsx("p",{children:t("No members yet","Sin miembros an")})})]}),r.jsx("div",{children:f()?r.jsx(ov,{householdId:e==null?void 0:e.householdId,onInviteSent:u}):r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-md border border-gray-100 dark:border-gray-700",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:t("Invite Members","Invitar Miembros")}),r.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-700 rounded-lg",children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx("svg",{className:"w-5 h-5 text-amber-600 dark:text-amber-500 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-amber-900 dark:text-amber-100 mb-1",children:t("Higher Access Privilege Required","Se Requiere Mayor Privilegio de Acceso")}),r.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:t("Only the household owner can invite members. Contact the household owner to add new members.","Solo el propietario del hogar puede invitar a miembros. Comunquese con el propietario del hogar para agregar nuevos miembros.")})]})]})})]})})]}),s.length>0&&r.jsxs("div",{className:"mt-6 bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-md border border-gray-100 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t("Pending Invitations","Invitaciones Pendientes")}),r.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm font-medium",children:s.length})]}),r.jsx("div",{className:"space-y-3",children:s.map(y=>r.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:y.email}),r.jsx("span",{className:"px-2 py-0.5 bg-yellow-200 text-yellow-800 rounded text-xs",children:t("Pending","Pendiente")})]}),r.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[t("Invited by","Invitado por"),": ",y.invitedByName||"Unknown"]}),r.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[t("Sent","Enviado"),": ",new Date(y.createdAt).toLocaleDateString(),"  ",t("Expires","Expira"),": ",new Date(y.expiresAt).toLocaleDateString()]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>{const v=`${window.location.origin}/invite/${y.inviteToken}`;navigator.clipboard.writeText(v),alert(t("Link copied!","Enlace copiado!"))},className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm",children:t("Copy Link","Copiar Enlace")}),f()&&r.jsx("button",{onClick:()=>w(y._id),className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-sm",children:t("Cancel","Cancelar")})]})]},y._id))})]}),m&&r.jsx(ph,{member:m,householdId:e==null?void 0:e.householdId,allMembers:n==null?void 0:n.members,onClose:()=>h(null),onSave:y=>{a(v=>({...v,members:v.members.map(S=>S.userId===y.userId?y:S)})),h(null)}})]})})}function lv(){return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:r.jsxs("div",{className:"max-w-xl w-full bg-white p-8 rounded-2xl shadow-md text-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Unauthorized Access"}),r.jsx("p",{className:"mt-3 text-gray-600",children:"You do not have permission to view that page. Please sign in with appropriate credentials."}),r.jsx("div",{className:"mt-6",children:r.jsx(fe,{to:"/login",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg",children:"Go to Login"})})]})})}/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=(...e)=>e.filter((t,n,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,a)=>a?a.toUpperCase():n.toLowerCase());/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=e=>{const t=cv(e);return t.charAt(0).toUpperCase()+t.slice(1)};/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var uv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:s="",children:o,iconNode:i,...l},d)=>g.createElement("svg",{ref:d,...uv,width:t,height:t,stroke:e,strokeWidth:a?Number(n)*24/Number(t):n,className:yh("lucide",s),...!o&&!mv(l)&&{"aria-hidden":"true"},...l},[...i.map(([c,m])=>g.createElement(c,m)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=(e,t)=>{const n=g.forwardRef(({className:a,...s},o)=>g.createElement(hv,{ref:o,iconNode:t,className:yh(`lucide-${dv(eu(e))}`,`lucide-${e}`,a),...s}));return n.displayName=eu(e),n};/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],xv=Vt("check",gv);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],fv=Vt("chevron-left",pv);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],bv=Vt("chevron-right",yv);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],bh=Vt("circle-alert",vv);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],kv=Vt("circle-check-big",jv);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Nv=Vt("circle",wv);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Cv=Vt("file-text",Sv);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Pv=Vt("funnel",Ev);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],al=Vt("refresh-cw",Iv);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Rv=Vt("tag",Lv);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Tv=Vt("trash-2",_v);function tu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Gs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tu(Object(n),!0).forEach(function(a){vh(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tu(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function vh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Av(e,t){if(e==null)return{};var n={},a=Object.keys(e),s,o;for(o=0;o<a.length;o++)s=a[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Mv(e,t){if(e==null)return{};var n=Av(e,t),a,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)a=o[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function kn(e,t){return Dv(e)||Fv(e,t)||Ov(e,t)||$v()}function Dv(e){if(Array.isArray(e))return e}function Fv(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a=[],s=!0,o=!1,i,l;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(a.push(i.value),!(t&&a.length===t));s=!0);}catch(d){o=!0,l=d}finally{try{!s&&n.return!=null&&n.return()}finally{if(o)throw l}}return a}}function Ov(e,t){if(e){if(typeof e=="string")return ru(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ru(e,t)}}function ru(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function $v(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Bv=["src","checkForExisting"],Jn={},nu=function(t){var n=document.querySelector('script[src="'.concat(t,'"]'));if(n)return Jn[t]={loading:!1,error:null,scriptEl:n}},au=typeof window<"u"&&typeof window.document<"u";function zv(e){var t=e.src,n=e.checkForExisting,a=n===void 0?!1:n,s=Mv(e,Bv),o=t?Jn[t]:void 0;!o&&a&&t&&au&&(o=nu(t));var i=g.useState(o?o.loading:!!t),l=kn(i,2),d=l[0],c=l[1],m=g.useState(o?o.error:null),h=kn(m,2),u=h[0],w=h[1],p=g.useState(!1),f=kn(p,2),k=f[0],x=f[1];return g.useEffect(function(){if(!(!au||!t||k||u)){o=Jn[t],!o&&a&&(o=nu(t));var b;o?b=o.scriptEl:(b=document.createElement("script"),b.src=t,Object.keys(s).forEach(function(S){b[S]===void 0?b.setAttribute(S,s[S]):b[S]=s[S]}),o=Jn[t]={loading:!0,error:null,scriptEl:b});var y=function(){o&&(o.loading=!1),c(!1),x(!0)},v=function(C){o&&(o.error=C),w(C)};return b.addEventListener("load",y),b.addEventListener("error",v),document.body.appendChild(b),function(){b.removeEventListener("load",y),b.removeEventListener("error",v),o&&o.loading&&(b.remove(),delete Jn[t])}}},[t]),[d,u]}var Uv=function(t,n,a){var s={};return delete Object.assign(s,t,vh({},a,t[n]))[n],s},Hv=function(t,n){var a={plaid:null,open:!1,onExitCallback:null};if(typeof window>"u"||!window.Plaid)throw new Error("Plaid not loaded");a.plaid=n(Gs(Gs({},t),{},{onExit:function(c,m){a.open=!1,t.onExit&&t.onExit(c,m),a.onExitCallback&&a.onExitCallback()}}));var s=function(){a.plaid&&(a.open=!0,a.onExitCallback=null,a.plaid.open())},o=function(c){a.plaid&&a.plaid.submit(c)},i=function(c,m){if(!a.open||!a.plaid){m&&m();return}a.onExitCallback=m,a.plaid.exit(c),c&&c.force&&(a.open=!1)},l=function(){a.plaid&&(a.plaid.destroy(),a.plaid=null)};return{open:s,submit:o,exit:i,destroy:l}},Wv=function(t,n){var a=Uv(t,"publicKey","key");return Hv(a,n)},Vv="https://cdn.plaid.com/link/v2/stable/link-initialize.js",su=function(){},qv=function(t){var n=zv({src:Vv,checkForExisting:!0}),a=kn(n,2),s=a[0],o=a[1],i=g.useState(null),l=kn(i,2),d=l[0],c=l[1],m=g.useState(!1),h=kn(m,2),u=h[0],w=h[1],p=(t.product||[]).slice().sort().join(",");g.useEffect(function(){if(!s&&!(!t.token&&!t.publicKey&&!t.receivedRedirectUri)){if(o||!window.Plaid){console.error("Error loading Plaid",o);return}d!=null&&d.exit({force:!0},function(){return d.destroy()});var x=Wv(Gs(Gs({},t),{},{onLoad:function(){w(!0),t.onLoad&&t.onLoad()}}),window.Plaid.create);return c(x),function(){return x.exit({force:!0},function(){return x.destroy()})}}},[s,o,t.publicKey,t.token,p]);var f=d!=null&&(!s||u),k=function(){t.token||console.warn("react-plaid-link: You cannot call open() without a valid token supplied to usePlaidLink. This is a no-op.")};return{error:o,ready:f,submit:d?d.submit:su,exit:d?d.exit:su,open:d?d.open:k}},ou;(function(e){e.OPEN="OPEN",e.EXIT="EXIT",e.HANDOFF="HANDOFF",e.SELECT_INSTITUTION="SELECT_INSTITUTION",e.ERROR="ERROR",e.BANK_INCOME_INSIGHTS_COMPLETED="BANK_INCOME_INSIGHTS_COMPLETED",e.IDENTITY_VERIFICATION_PASS_SESSION="IDENTITY_VERIFICATION_PASS_SESSION",e.IDENTITY_VERIFICATION_FAIL_SESSION="IDENTITY_VERIFICATION_FAIL_SESSION"})(ou||(ou={}));const jh=({onSuccess:e,onExit:t})=>{const{user:n}=_e(),[a,s]=g.useState(!1),[o,i]=g.useState(null),[l,d]=g.useState(null);if(!((n==null?void 0:n.passkeyCount)>0||(n==null?void 0:n.mfaEnabled)))return r.jsxs("div",{className:"rounded-xl border border-amber-200 bg-amber-50 px-5 py-4 space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2 text-amber-700 font-semibold text-sm",children:[r.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"2FA required to link a bank account"]}),r.jsxs("p",{className:"text-xs text-amber-600 leading-relaxed",children:["To protect your financial data, you must set up a ",r.jsx("strong",{children:"passkey"})," (Face ID / Touch ID / Windows Hello) or an ",r.jsx("strong",{children:"authenticator app"})," before connecting a bank account."]}),r.jsx(fe,{to:"/settings/profile",className:"inline-flex items-center gap-1 text-xs font-medium text-amber-700 underline underline-offset-2 hover:text-amber-900 transition-colors",children:"Set up security now "})]});const m=g.useCallback(async()=>{var k,x;try{s(!0),d(null);const b=await O.post("/plaid/create-link-token",{});b.data.linkToken&&(i(b.data.linkToken),console.log("[PlaidLink] Link token created successfully"))}catch(b){const y=((x=(k=b.response)==null?void 0:k.data)==null?void 0:x.error)||b.message||"Failed to create link token";console.error("[PlaidLink] Error creating link token:",y),d(y)}finally{s(!1)}},[]),h=g.useCallback(async(k,x)=>{var b,y,v,S;try{s(!0),d(null),console.log("[PlaidLink] Public token received, exchanging...",{institution:(b=x==null?void 0:x.institution)==null?void 0:b.name,accountsCount:(y=x==null?void 0:x.accounts)==null?void 0:y.length});const C=await O.post("/plaid/exchange-token",{publicToken:k,metadata:x});console.log("[PlaidLink] Token exchanged successfully",{linkedAccounts:C.data.linkedAccounts.length}),e&&e(C.data)}catch(C){const P=((S=(v=C.response)==null?void 0:v.data)==null?void 0:S.error)||C.message||"Failed to link account";console.error("[PlaidLink] Error exchanging token:",P),d(P)}finally{s(!1)}},[e]),u=g.useCallback((k,x)=>{k?(console.warn("[PlaidLink] Plaid Link exit with error:",{errorType:k.error_type,errorCode:k.error_code,errorMessage:k.error_message}),d(k.error_message||"Plaid Link encountered an error")):console.log("[PlaidLink] Plaid Link exited by user"),t&&t(k,x)},[t]),{open:w,ready:p}=qv({token:o,onSuccess:h,onExit:u});g.useEffect(()=>{p&&o&&w()},[p,o,w]);const f=()=>{!o&&!a?m():p&&o&&w()};return r.jsxs("div",{className:"plaid-link-container",children:[r.jsx("button",{onClick:f,disabled:a,className:`
          px-6 py-3 rounded-lg font-medium transition-all
          ${a?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 active:scale-95 cursor-pointer"}
        `,children:a?r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx("svg",{className:"w-5 h-5 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Preparing..."]}):" Connect Bank Account"}),l&&r.jsx("div",{className:"mt-3 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:r.jsx("p",{className:"text-sm",children:l})})]})},bo="/plaid",kh=async e=>{try{return(await O.get(`${bo}/linked-accounts`)).data}catch(t){throw console.error("[PlaidService] Error fetching linked accounts:",t),t}},Gv=async(e,t)=>{try{return(await O.get(`${bo}/account-balance/${e}`)).data}catch(n){throw console.error("[PlaidService] Error fetching account balance:",n),n}},Yv=async(e,t)=>{try{return(await O.delete(`${bo}/unlink/${e}`)).data}catch(n){throw console.error("[PlaidService] Error unlinking account:",n),n}},Kv=async(e,t)=>{try{return(await O.post(`${bo}/set-default/${e}`,{})).data}catch(n){throw console.error("[PlaidService] Error setting default account:",n),n}},Qv=()=>{const{token:e}=_e(),[t,n]=g.useState([]),[a,s]=g.useState(!1),[o,i]=g.useState(null),[l,d]=g.useState(null),[c,m]=g.useState(null),[h,u]=g.useState(null);g.useEffect(()=>{w()},[]),g.useEffect(()=>{if(l){const y=setTimeout(()=>d(null),5e3);return()=>clearTimeout(y)}},[l]);const w=async()=>{var y,v;try{s(!0),i(null);const S=await kh(e);n(S.linkedAccounts||[])}catch(S){const C=((v=(y=S.response)==null?void 0:y.data)==null?void 0:v.error)||S.message||"Failed to fetch linked accounts";console.error("[LinkedAccounts] Error:",C),i(C)}finally{s(!1)}},p=y=>{console.log("[LinkedAccounts] Account linked successfully:",y),d(` Successfully linked ${y.linkedAccounts.length} account(s)`),setTimeout(w,1e3)},f=(y,v)=>{y&&console.warn("[LinkedAccounts] Link error:",y)},k=async y=>{try{m(y);const v=await Gv(y,e);n(S=>S.map(C=>C._id===y?{...C,currentBalance:v.currentBalance,availableBalance:v.availableBalance}:C)),d(" Balance refreshed")}catch{i("Failed to refresh balance")}finally{m(null)}},x=async y=>{try{await Kv(y,e),n(v=>v.map(S=>({...S,isDefault:S._id===y}))),d(" Default account updated")}catch{i("Failed to set default account")}},b=async y=>{if(window.confirm("Are you sure you want to unlink this account? This will stop syncing transactions."))try{s(!0),await Yv(y,e),n(v=>v.filter(S=>S._id!==y)),d(" Account unlinked successfully")}catch{i("Failed to unlink account")}finally{s(!1)}};return r.jsx(Te,{children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:" Bank Accounts"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage linked bank accounts and transactions"})]}),o&&r.jsxs("div",{className:"mb-6 p-4 bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-400 rounded-lg flex items-start gap-3",children:[r.jsx(bh,{size:20,className:"mt-0.5 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold",children:"Error"}),r.jsx("p",{className:"text-sm",children:o})]})]}),l&&r.jsx("div",{className:"mb-6 p-4 bg-green-100 dark:bg-green-900/30 border border-green-400 dark:border-green-700 text-green-700 dark:text-green-400 rounded-lg",children:l}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Add New Account"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Connect your bank account to automatically sync transactions"}),r.jsx(jh,{onSuccess:p,onExit:f})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Your Linked Accounts"}),a?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"inline-block",children:r.jsx("svg",{className:"w-12 h-12 animate-spin text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-4",children:"Loading accounts..."})]}):t.length===0?r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-12 text-center",children:r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:"No linked accounts yet. Connect your bank above to get started."})}):t.map(y=>{var v,S,C;return r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:y.accountName}),y.isDefault&&r.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded",children:"DEFAULT"})]}),r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[y.accountType,"  ",y.accountMask&&`ends in ${y.accountMask}`]})]}),r.jsx("div",{className:`px-3 py-1 rounded text-xs font-semibold ${y.syncStatus==="active"?"bg-green-100 text-green-700":y.syncStatus==="pending"?"bg-yellow-100 text-yellow-700":y.syncStatus==="error"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:y.syncStatus==="active"?" Syncing":y.syncStatus})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4 py-4 border-t border-b border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Current Balance"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:["$",((v=y.currentBalance)==null?void 0:v.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]}),y.availableBalance!==void 0&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Available Balance"}),r.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",((S=y.availableBalance)==null?void 0:S.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]}),y.creditLimit&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Credit Limit"}),r.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["$",((C=y.creditLimit)==null?void 0:C.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]})]}),y.lastSyncedAt&&r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-4",children:["Last synced: ",new Date(y.lastSyncedAt).toLocaleString()]}),y.lastSyncError&&r.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 text-sm rounded",children:y.lastSyncError}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>k(y._id),disabled:c===y._id,className:"flex items-center gap-2 px-4 py-2 bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-400 rounded hover:bg-blue-200 dark:hover:bg-blue-900/60 transition-colors disabled:opacity-50",title:"Refresh balance",children:[r.jsx(al,{size:16,className:c===y._id?"animate-spin":""}),c===y._id?"Syncing...":"Refresh"]}),!y.isDefault&&r.jsxs("button",{onClick:()=>x(y._id),className:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",title:"Set as default",children:[r.jsx(xv,{size:16}),"Set Default"]}),r.jsxs("button",{onClick:()=>b(y._id),disabled:a,className:"flex items-center gap-2 px-4 py-2 bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-400 rounded hover:bg-red-200 dark:hover:bg-red-900/60 transition-colors disabled:opacity-50 ml-auto",title:"Unlink account",children:[r.jsx(Tv,{size:16}),"Unlink"]})]})]})},y._id)})]}),r.jsxs("div",{className:"mt-8 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-6",children:[r.jsx("h3",{className:"font-bold text-blue-900 dark:text-blue-300 mb-2",children:" About Bank Account Linking"}),r.jsxs("ul",{className:"text-sm text-blue-800 dark:text-blue-400 space-y-1",children:[r.jsx("li",{children:" Secure connection using Plaid - your credentials are never shared"}),r.jsx("li",{children:" Transactions are synced automatically in real-time"}),r.jsx("li",{children:" Set a default account for quick access"}),r.jsx("li",{children:" Unlink anytime - no ongoing fees or commitments"})]})]})]})})},ud="/plaid",Jv=async(e,t)=>{try{return(await O.get(`${ud}/transactions`,{params:e})).data}catch(n){throw console.error("[TransactionService] Error fetching transactions:",n),n}},iu=async(e,t,n)=>{try{return(await O.patch(`${ud}/transactions/${e}`,t)).data}catch(a){throw console.error("[TransactionService] Error updating transaction:",a),a}},Xv=async(e,t)=>{try{return(await O.get(`${ud}/transactions-summary`,{params:e})).data}catch(n){throw console.error("[TransactionService] Error fetching summary:",n),n}},Zv=["Groceries","Gas","Dining Out","Medical","Entertainment","Shopping","Utilities","Transportation","Travel","Business Services","Personal","Other"],Xo=25,ej=()=>{const{token:e}=_e(),[t,n]=g.useState([]),[a,s]=g.useState([]),[o,i]=g.useState([]),[l,d]=g.useState(0),[c,m]=g.useState(""),[h,u]=g.useState(()=>{const _=new Date;return`${_.getFullYear()}-${String(_.getMonth()+1).padStart(2,"0")}`}),[w,p]=g.useState("all"),[f,k]=g.useState(0),[x,b]=g.useState(!1),[y,v]=g.useState(!1),[S,C]=g.useState(null),[P,j]=g.useState(null),[N,E]=g.useState(new Set);g.useEffect(()=>{kh().then(_=>i(_.linkedAccounts||[])).catch(()=>{})},[e]);const L=g.useCallback(async()=>{var _,T,F;try{b(!0),C(null);const B={month:h,limit:Xo,offset:f*Xo};c&&(B.accountId=c),w==="yes"&&(B.isReconciled=!0),w==="no"&&(B.isReconciled=!1);const U=await Jv(B,e);n(U.transactions||[]),d(((_=U.pagination)==null?void 0:_.total)||0)}catch(B){C(((F=(T=B.response)==null?void 0:T.data)==null?void 0:F.error)||B.message||"Failed to load transactions")}finally{b(!1)}},[e,c,h,w,f]),D=g.useCallback(async()=>{try{v(!0);const _={month:h};c&&(_.accountId=c);const T=await Xv(_,e);s(T.summary||[])}catch{}finally{v(!1)}},[e,c,h]);g.useEffect(()=>{L(),D()},[L,D]),g.useEffect(()=>{k(0)},[c,h,w]);const M=async(_,T)=>{try{E(F=>new Set(F).add(_)),await iu(_,{userCategory:T},e),n(F=>F.map(B=>B._id===_?{...B,userCategory:T}:B)),j(null)}catch{C("Failed to update category")}finally{E(F=>{const B=new Set(F);return B.delete(_),B})}},K=async _=>{const T=!_.isReconciled;try{E(F=>new Set(F).add(_._id)),await iu(_._id,{isReconciled:T},e),n(F=>F.map(B=>B._id===_._id?{...B,isReconciled:T}:B)),D()}catch{C("Failed to update reconciliation status")}finally{E(F=>{const B=new Set(F);return B.delete(_._id),B})}},ae=Math.ceil(l/Xo),Z=t.filter(_=>_.isReconciled).length;return r.jsx(Te,{children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsxs("div",{className:"mb-6 flex items-center justify-between flex-wrap gap-3",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:" Review Transactions"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Review, categorize, and reconcile synced bank transactions"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(fe,{to:"/linked-accounts",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:" Manage Accounts"}),r.jsxs("button",{onClick:()=>{L(),D()},disabled:x,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors text-sm",children:[r.jsx(al,{size:15,className:x?"animate-spin":""}),"Refresh"]})]})]}),S&&r.jsxs("div",{className:"mb-4 p-4 bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-400 rounded-lg flex items-start gap-3",children:[r.jsx(bh,{size:18,className:"mt-0.5 flex-shrink-0"}),r.jsx("p",{className:"text-sm",children:S})]}),o.length===0&&!x&&r.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-8 text-center mb-6",children:[r.jsx("p",{className:"text-blue-700 dark:text-blue-300 font-semibold text-lg mb-2",children:"No linked accounts yet"}),r.jsx("p",{className:"text-blue-600 dark:text-blue-400 text-sm mb-4",children:"Connect a bank account to start syncing transactions automatically."}),r.jsx(fe,{to:"/linked-accounts",className:"inline-block px-5 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Link Bank Account "})]}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 mb-6",children:r.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[r.jsx(Pv,{size:16,className:"text-gray-500"}),r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Filters:"}),r.jsx("input",{type:"month",value:h,onChange:_=>u(_.target.value),className:"px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500"}),r.jsxs("select",{value:c,onChange:_=>m(_.target.value),className:"px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"All Accounts"}),o.map(_=>r.jsxs("option",{value:_._id,children:[_.accountName," ",_.accountMask]},_._id))]}),r.jsxs("select",{value:w,onChange:_=>p(_.target.value),className:"px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"no",children:"Unreconciled"}),r.jsx("option",{value:"yes",children:"Reconciled"})]}),r.jsxs("span",{className:"ml-auto text-sm text-gray-500 dark:text-gray-400",children:[l," transaction",l!==1?"s":"",t.length>0&&`  ${Z} reconciled`]})]})}),a.length>0&&r.jsxs("div",{className:"mb-6",children:[r.jsxs("h2",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wide mb-3",children:["Spending by Category  ",h]}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:a.slice(0,8).map(_=>r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 shadow-sm border border-gray-200 dark:border-gray-700",children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:_._id||"Uncategorized"}),r.jsxs("p",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mt-0.5",children:["$",Math.abs(_.total).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[_.count," txn",_.count!==1?"s":""]})]},_._id||"uncategorized"))})]}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:x?r.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[r.jsx(al,{size:36,className:"animate-spin text-blue-600 mb-3"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading transactions..."})]}):t.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center px-4",children:[r.jsx(Cv,{size:40,className:"text-gray-300 dark:text-gray-600 mb-3"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"No transactions found"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-500 text-sm mt-1",children:o.length>0?"Try adjusting your filters or wait for the next sync.":"Link a bank account to start syncing."})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"hidden sm:grid grid-cols-12 gap-2 px-4 py-2 bg-gray-50 dark:bg-gray-700/50 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide border-b border-gray-200 dark:border-gray-700",children:[r.jsx("div",{className:"col-span-1 text-center",children:""}),r.jsx("div",{className:"col-span-2",children:"Date"}),r.jsx("div",{className:"col-span-4",children:"Merchant / Description"}),r.jsx("div",{className:"col-span-3",children:"Category"}),r.jsx("div",{className:"col-span-2 text-right",children:"Amount"})]}),t.map(_=>{const T=N.has(_._id),F=P===_._id,B=_.amount||0,U=B>0,q=_.userCategory||_.primaryCategory||"";return r.jsxs("div",{className:`grid grid-cols-12 gap-2 px-4 py-3 items-center border-b border-gray-100 dark:border-gray-700 last:border-0 transition-colors ${_.isReconciled?"bg-green-50/30 dark:bg-green-900/10":"hover:bg-gray-50 dark:hover:bg-gray-700/30"} ${T?"opacity-60":""}`,children:[r.jsx("div",{className:"col-span-1 flex justify-center",children:r.jsx("button",{onClick:()=>K(_),disabled:T,title:_.isReconciled?"Mark as unreconciled":"Mark as reconciled",className:"transition-transform hover:scale-110",children:_.isReconciled?r.jsx(kv,{size:18,className:"text-green-500"}):r.jsx(Nv,{size:18,className:"text-gray-300 dark:text-gray-600"})})}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:new Date(_.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),_.isPending&&r.jsx("span",{className:"text-xs text-amber-600 dark:text-amber-400 font-medium",children:"Pending"})]}),r.jsxs("div",{className:"col-span-4 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:_.merchant||_.name}),_.merchant&&_.name!==_.merchant&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:_.name})]}),r.jsx("div",{className:"col-span-3",children:F?r.jsxs("select",{autoFocus:!0,defaultValue:_.userCategory||_.primaryCategory||"",onChange:R=>M(_._id,R.target.value),onBlur:()=>j(null),className:"w-full text-xs border border-blue-400 rounded px-2 py-1 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none",children:[r.jsx("option",{value:"",children:" Select "}),Zv.map(R=>r.jsx("option",{value:R,children:R},R))]}):r.jsxs("button",{onClick:()=>j(_._id),className:"flex items-center gap-1.5 group text-left",title:"Click to change category",disabled:T,children:[r.jsx(Rv,{size:13,className:"text-gray-400 group-hover:text-blue-500 flex-shrink-0"}),r.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 group-hover:text-blue-600 dark:group-hover:text-blue-400 truncate",children:q})]})}),r.jsx("div",{className:"col-span-2 text-right",children:r.jsxs("p",{className:`text-sm font-semibold ${U?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:[U?"-":"+","$",Math.abs(B).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})})]},_._id)})]})}),ae>1&&r.jsxs("div",{className:"flex items-center justify-between mt-4 px-1",children:[r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Page ",f+1," of ",ae,"  ",l," total"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>k(_=>_-1),disabled:f===0||x,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-40 transition-colors",children:[r.jsx(fv,{size:14})," Prev"]}),r.jsxs("button",{onClick:()=>k(_=>_+1),disabled:f>=ae-1||x,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-40 transition-colors",children:["Next ",r.jsx(bv,{size:14})]})]})]}),r.jsxs("div",{className:"mt-8 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-5",children:[r.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-300 mb-2",children:" How Reconciliation Works"}),r.jsxs("ul",{className:"text-sm text-blue-800 dark:text-blue-400 space-y-1",children:[r.jsx("li",{children:" Transactions sync automatically every 15 minutes from linked accounts"}),r.jsxs("li",{children:[" Click the ",r.jsx("strong",{children:"circle icon"})," to mark a transaction as reconciled"]}),r.jsxs("li",{children:[" Click a ",r.jsx("strong",{children:"category label"})," to change the category for better insights"]}),r.jsx("li",{children:" Pending transactions are highlighted  they'll post within 1-3 business days"})]})]})]})})},tj={free:["2 household members","3 months history","50 expenses/month","2 goals","Manual entry only"],basic:["3 household members","12 months history","200 expenses/month","5 goals","1 linked bank account"],plus:["6 household members","24 months history","Unlimited expenses","20 goals","3 linked accounts","AI financial insights","Spending forecasts"],pro:["Unlimited members","Unlimited history","Unlimited everything","AI insights","Custom reports","API access","Priority support"]},rj={free:"border-gray-200 dark:border-gray-700",basic:"border-blue-300 dark:border-blue-700",plus:"border-purple-500 dark:border-purple-500 ring-2 ring-purple-500",pro:"border-indigo-400 dark:border-indigo-600"},nj={free:"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 cursor-default",basic:"bg-blue-600 hover:bg-blue-700 text-white",plus:"bg-purple-600 hover:bg-purple-700 text-white",pro:"bg-indigo-600 hover:bg-indigo-700 text-white"};function aj(){const{user:e}=_e(),t=lt(),[n]=mo(),[a,s]=g.useState([]),[o,i]=g.useState("free"),[l,d]=g.useState(null),[c,m]=g.useState(null),h=n.get("canceled");g.useEffect(()=>{O.get("/subscription").then(f=>{var k,x;s(f.data.plans||[]),i(((x=(k=f.data.subscription)==null?void 0:k.plan)==null?void 0:x.type)||"free")}).catch(()=>{})},[]);const u=async f=>{var k,x;if(!(f==="free"||f===o)){d(f),m(null);try{const b=await O.post("/subscription/checkout",{planId:f});window.location.href=b.data.url}catch(b){m(((x=(k=b.response)==null?void 0:k.data)==null?void 0:x.error)||"Failed to start checkout. Please try again."),d(null)}}},p=["free","basic","plus","pro"].map(f=>a.find(k=>k.id===f)).filter(Boolean);return r.jsx(Te,{children:r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-gray-100 mb-3",children:"Choose Your Plan"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"All paid plans include a 14-day free trial. No credit card required to start."}),h&&r.jsx("div",{className:"mt-4 inline-block bg-yellow-100 dark:bg-yellow-900/30 border border-yellow-300 dark:border-yellow-700 text-yellow-800 dark:text-yellow-300 px-4 py-2 rounded-lg text-sm",children:"Checkout was canceled  no charge was made."})]}),c&&r.jsx("div",{className:"mb-6 p-4 bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-400 rounded-lg text-center",children:c}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:p.map(f=>{const k=f.id===o,x=f.highlight,b=tj[f.id]||[];return r.jsxs("div",{className:`relative bg-white dark:bg-gray-800 rounded-2xl border-2 p-6 flex flex-col ${rj[f.id]} transition-shadow hover:shadow-lg`,children:[x&&r.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-purple-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:"MOST POPULAR"}),k&&r.jsx("div",{className:"absolute -top-3 right-4 bg-green-500 text-white text-xs font-bold px-3 py-1 rounded-full",children:"CURRENT"}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-1",children:f.name}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:f.description}),r.jsxs("div",{className:"flex items-baseline gap-1",children:[r.jsx("span",{className:"text-4xl font-extrabold text-gray-900 dark:text-gray-100",children:f.price===0?"Free":`$${f.price}`}),f.price>0&&r.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"/month"})]})]}),r.jsx("ul",{className:"flex-1 space-y-2 mb-6",children:b.map(y=>r.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"text-green-500 font-bold mt-0.5",children:""}),y]},y))}),r.jsx("button",{onClick:()=>u(f.id),disabled:k||f.id==="free"||l===f.id,className:`w-full py-2.5 rounded-lg font-semibold text-sm transition-all ${k?"bg-green-100 dark:bg-green-900/40 text-green-700 dark:text-green-400 cursor-default":nj[f.id]} disabled:opacity-60`,children:l===f.id?"Redirecting...":k?"Current Plan":f.id==="free"?"Free Forever":`Start ${f.name} Trial`})]},f.id)})}),r.jsxs("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400 mt-8",children:["Prices in USD. Cancel anytime. Secure payments via Stripe.",o!=="free"&&r.jsx("button",{onClick:()=>t("/subscription"),className:"ml-2 underline text-blue-600 dark:text-blue-400",children:"Manage your subscription "})]})]})})}const lu={active:"bg-green-100 dark:bg-green-900/40 text-green-700 dark:text-green-400",past_due:"bg-yellow-100 dark:bg-yellow-900/40 text-yellow-700 dark:text-yellow-400",canceled:"bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-400"},sj={free:"text-gray-600 dark:text-gray-400",basic:"text-blue-600 dark:text-blue-400",plus:"text-purple-600 dark:text-purple-400",pro:"text-indigo-600 dark:text-indigo-400"};function oj(){var P,j,N,E,L,D,M,K,ae,Z,_;const{user:e}=_e(),t=lt(),[n]=mo(),[a,s]=g.useState(null),[o,i]=g.useState(null),[l,d]=g.useState(!0),[c,m]=g.useState(null),[h,u]=g.useState(null),[w,p]=g.useState(null),f=n.get("success");g.useEffect(()=>{f&&p(" Subscription activated! Welcome to your new plan."),k()},[]);const k=async()=>{try{const T=await O.get("/subscription");s(T.data.subscription),i(T.data.plan)}catch{u("Failed to load subscription details.")}finally{d(!1)}},x=async()=>{m("portal");try{const T=await O.post("/subscription/portal");window.location.href=T.data.url}catch{u("No billing portal available. Please subscribe first."),m(null)}},b=async()=>{var T,F;if(window.confirm("Cancel your subscription? You'll keep access until the end of your billing period.")){m("cancel");try{await O.post("/subscription/cancel"),p("Subscription will cancel at end of billing period."),await k()}catch(B){u(((F=(T=B.response)==null?void 0:T.data)==null?void 0:F.error)||"Failed to cancel subscription.")}finally{m(null)}}},y=async()=>{var T,F;m("reactivate");try{await O.post("/subscription/reactivate"),p(" Subscription reactivated!"),await k()}catch(B){u(((F=(T=B.response)==null?void 0:T.data)==null?void 0:F.error)||"Failed to reactivate subscription.")}finally{m(null)}};if(l)return r.jsx(Te,{children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"w-8 h-8 border-4 border-purple-600 border-t-transparent rounded-full animate-spin"})})});const v=!a||((P=a.plan)==null?void 0:P.type)==="free",S=a&&!((j=a.billing)!=null&&j.autoRenew)&&((N=a.plan)==null?void 0:N.type)!=="free",C=(E=a==null?void 0:a.billing)!=null&&E.currentPeriodEnd?new Date(a.billing.currentPeriodEnd).toLocaleDateString("en-US",{dateStyle:"long"}):null;return r.jsx(Te,{children:r.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-1",children:"Subscription"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage your plan and billing"})]}),h&&r.jsx("div",{className:"mb-4 p-4 bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-400 rounded-lg",children:h}),w&&r.jsx("div",{className:"mb-4 p-4 bg-green-100 dark:bg-green-900/30 border border-green-400 dark:border-green-700 text-green-700 dark:text-green-400 rounded-lg",children:w}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:"Current Plan"}),((L=a==null?void 0:a.billing)==null?void 0:L.status)&&r.jsx("span",{className:`text-xs font-bold px-3 py-1 rounded-full ${lu[a.billing.status]||lu.active}`,children:a.billing.status.replace("_"," ").toUpperCase()})]}),r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsx("div",{className:`text-5xl font-extrabold ${sj[(o==null?void 0:o.id)||"free"]}`,children:(o==null?void 0:o.name)||"Free"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:o==null?void 0:o.description}),(o==null?void 0:o.price)>0&&r.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:["$",o.price,r.jsx("span",{className:"text-sm font-normal text-gray-500",children:"/month"})]})]})]}),r.jsx("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[["Members",((D=o==null?void 0:o.features)==null?void 0:D.maxMembers)===-1?"Unlimited":`Up to ${(M=o==null?void 0:o.features)==null?void 0:M.maxMembers}`],["History",((K=o==null?void 0:o.features)==null?void 0:K.historyMonths)===-1?"Unlimited":`${(ae=o==null?void 0:o.features)==null?void 0:ae.historyMonths} months`],["AI Insights",(Z=o==null?void 0:o.features)!=null&&Z.aiInsightsEnabled?" Included":" Not included"],["Forecasting",(_=o==null?void 0:o.features)!=null&&_.forecastingEnabled?" Included":" Not included"]].map(([T,F])=>r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3",children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:T}),r.jsx("p",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:F})]},T))}),S&&C&&r.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg text-sm text-yellow-800 dark:text-yellow-300",children:[" Your subscription will cancel on ",C,". You can reactivate before then."]}),C&&!S&&(o==null?void 0:o.price)>0&&r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:["Next billing date: ",r.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:C})]}),r.jsx("div",{className:"flex flex-wrap gap-3",children:v?r.jsx("button",{onClick:()=>t("/pricing"),className:"px-6 py-2.5 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold text-sm transition-colors",children:"Upgrade Plan"}):r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:x,disabled:c==="portal",className:"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold text-sm transition-colors disabled:opacity-60",children:c==="portal"?"Opening...":" Manage Billing & Payment"}),S?r.jsx("button",{onClick:y,disabled:c==="reactivate",className:"px-6 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg font-semibold text-sm transition-colors disabled:opacity-60",children:c==="reactivate"?"Reactivating...":" Reactivate"}):r.jsx("button",{onClick:b,disabled:c==="cancel",className:"px-6 py-2.5 bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/60 rounded-lg font-semibold text-sm transition-colors disabled:opacity-60",children:c==="cancel"?"Canceling...":"Cancel Subscription"}),r.jsx("button",{onClick:()=>t("/pricing"),className:"px-6 py-2.5 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg font-semibold text-sm transition-colors",children:"Change Plan"})]})})]}),r.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-2xl p-6",children:[r.jsx("h3",{className:"font-bold text-blue-900 dark:text-blue-300 mb-3",children:" Billing FAQ"}),r.jsxs("ul",{className:"space-y-2 text-sm text-blue-800 dark:text-blue-400",children:[r.jsxs("li",{children:[" All paid plans start with a ",r.jsx("strong",{children:"14-day free trial"})]}),r.jsx("li",{children:" You can cancel anytime  access continues until period end"}),r.jsx("li",{children:" Upgrade or downgrade at any time, prorated billing applies"}),r.jsx("li",{children:" Payment is processed securely by Stripe"})]})]})]})})}const du={warning:"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800 text-yellow-800 dark:text-yellow-300",success:"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 text-green-800 dark:text-green-300",info:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-400",danger:"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-400"},ij={warning:"",success:"",info:"",danger:""};function rs({label:e,value:t,subtitle:n,color:a="purple"}){const s={purple:"text-purple-600 dark:text-purple-400",green:"text-green-600 dark:text-green-400",red:"text-red-600 dark:text-red-400",blue:"text-blue-600 dark:text-blue-400"};return r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-5",children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:e}),r.jsx("p",{className:`text-2xl font-extrabold ${s[a]}`,children:t}),n&&r.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:n})]})}function lj({category:e,amount:t,percentage:n}){const a=s=>"$"+Math.abs(s).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});return r.jsxs("div",{className:"mb-3",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[r.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:e}),r.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[a(t)," ",r.jsxs("span",{className:"text-xs text-gray-400",children:["(",n.toFixed(1),"%)"]})]})]}),r.jsx("div",{className:"h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-purple-500 rounded-full",style:{width:`${Math.min(n,100)}%`}})})]})}function dj(){var C,P;const[e,t]=g.useState(null),[n,a]=g.useState(!0),[s,o]=g.useState(!1),[i,l]=g.useState(null);g.useEffect(()=>{d()},[]);const d=async()=>{var j,N,E;l(null),a(!0);try{const L=await O.get("/insights");t(L.data)}catch(L){((j=L.response)==null?void 0:j.status)===403?l("upgrade_required"):l(((E=(N=L.response)==null?void 0:N.data)==null?void 0:E.error)||"Failed to load insights.")}finally{a(!1)}},c=async()=>{var j,N,E;o(!0);try{await O.post("/insights/refresh"),await d()}catch(L){((j=L.response)==null?void 0:j.status)===403?l("upgrade_required"):l(((E=(N=L.response)==null?void 0:N.data)==null?void 0:E.error)||"Failed to refresh insights.")}finally{o(!1)}},m=()=>{if(!e)return;const j=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),N=URL.createObjectURL(j),E=document.createElement("a");E.href=N,E.download=`insights-${new Date().toISOString().slice(0,10)}.json`,E.click(),URL.revokeObjectURL(N)};if(n)return r.jsx(Te,{children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"w-8 h-8 border-4 border-purple-600 border-t-transparent rounded-full animate-spin"})})});if(i==="upgrade_required")return r.jsx(Te,{children:r.jsxs("div",{className:"max-w-lg mx-auto px-4 py-20 text-center",children:[r.jsx("div",{className:"text-5xl mb-4",children:""}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"AI Insights Require a Paid Plan"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Unlock spending analysis, budget recommendations, and anomaly detection with a Basic plan or higher."}),r.jsx("a",{href:"/pricing",className:"inline-block px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors",children:"View Plans"})]})});if(i)return r.jsx(Te,{children:r.jsxs("div",{className:"max-w-lg mx-auto px-4 py-16 text-center",children:[r.jsx("p",{className:"text-red-600 dark:text-red-400 mb-4",children:i}),r.jsx("button",{onClick:d,className:"px-4 py-2 bg-purple-600 text-white rounded-lg text-sm font-semibold",children:"Try Again"})]})});const h=(e==null?void 0:e.insights)||{},u=h.metrics||{},w=h.spendingPatterns||{},p=h.budgetRecommendations||[],f=h.anomalies||[],k=h.aiSummary,x=h.generatedAt?new Date(h.generatedAt).toLocaleString():null,b=w.topCategories||[],y=j=>j==null?"":"$"+Math.abs(j).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}),v=u.savingsRate!=null?`${u.savingsRate.toFixed(1)}%`:"",S=(u.savingsRate??0)>=20?"green":(u.savingsRate??0)>=10?"blue":"red";return r.jsx(Te,{children:r.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-1",children:"Financial Insights"}),r.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:[x?`Last updated ${x}`:"Powered by Smart Analysis",h.aiEnhanced&&r.jsx("span",{className:"ml-2 px-2 py-0.5 bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-400 rounded-full text-xs font-medium",children:" AI Enhanced"}),h.aiEnabled&&!h.aiEnhanced&&r.jsx("span",{className:"ml-2 px-2 py-0.5 bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-400 rounded-full text-xs font-medium",children:" Smart Analysis"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:m,className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg text-sm font-medium transition-colors",children:"Export"}),r.jsx("button",{onClick:c,disabled:s,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg text-sm font-semibold transition-colors disabled:opacity-60",children:s?"Refreshing...":" Refresh"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[r.jsx(rs,{label:"Total Income",value:y(u.totalIncome),color:"green"}),r.jsx(rs,{label:"Total Expenses",value:y(u.totalExpenses),color:"red"}),r.jsx(rs,{label:"Net Savings",value:y(u.netSavings),color:(u.netSavings??0)>=0?"green":"red"}),r.jsx(rs,{label:"Savings Rate",value:v,subtitle:"Target: 20%+",color:S})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-6",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Top Spending Categories"}),b.length===0?r.jsx("p",{className:"text-gray-400 text-sm",children:"No category data yet. Add some transactions to see your spending breakdown."}):b.slice(0,6).map(j=>r.jsx(lj,{category:j.category,amount:j.total,percentage:j.percentage},j.category))]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-6",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Monthly Trend"}),(C=w.monthlyTrend)!=null&&C.length?r.jsx("div",{className:"space-y-2",children:w.monthlyTrend.slice(0,6).map(j=>{const N=(j.income||0)-(j.expenses||0);return r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400 w-20",children:j.month}),r.jsxs("div",{className:"flex gap-4 text-xs",children:[r.jsx("span",{className:"text-green-600 dark:text-green-400",children:y(j.income)}),r.jsxs("span",{className:"text-red-500 dark:text-red-400",children:["-",y(j.expenses)]})]}),r.jsxs("span",{className:`font-semibold text-xs ${N>=0?"text-green-600 dark:text-green-400":"text-red-500 dark:text-red-400"}`,children:[N>=0?"+":"",y(N)]})]},j.month)})}):r.jsx("p",{className:"text-gray-400 text-sm",children:"Not enough transaction history to show trends yet."})]})]}),k&&r.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 border border-purple-200 dark:border-purple-800 rounded-2xl p-6 mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("span",{className:"text-xl",children:h.aiEnhanced?"":""}),r.jsx("h2",{className:"text-lg font-bold text-purple-900 dark:text-purple-300",children:h.aiEnhanced?"AI Financial Summary":"Smart Financial Summary"})]}),k.summary&&r.jsx("p",{className:"text-purple-900 dark:text-purple-200 text-sm leading-relaxed mb-4",children:k.summary}),((P=k.insights)==null?void 0:P.length)>0&&r.jsx("div",{className:"space-y-2",children:k.insights.map((j,N)=>r.jsxs("div",{className:"flex items-start gap-2 text-sm text-purple-800 dark:text-purple-300",children:[r.jsx("span",{children:j.emoji||""}),r.jsxs("div",{children:[r.jsxs("span",{className:"font-semibold",children:[j.title,": "]}),j.insight]})]},N))})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Budget Recommendations"}),p.length===0?r.jsx("p",{className:"text-gray-400 text-sm",children:"No recommendations yet. Link accounts and add transactions to get personalized advice."}):r.jsx("div",{className:"space-y-3",children:p.slice(0,8).map((j,N)=>r.jsxs("div",{className:`flex items-start gap-3 p-3 border rounded-lg text-sm ${du[j.type]||du.info}`,children:[r.jsx("span",{children:ij[j.type]||""}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold",children:j.message}),j.category&&r.jsxs("p",{className:"text-xs opacity-75 mt-0.5",children:["Category: ",j.category]})]})]},N))})]}),f.length>0&&r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-6",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-4",children:" Unusual Transactions"}),r.jsx("div",{className:"space-y-3",children:f.map((j,N)=>r.jsxs("div",{className:"flex items-start gap-3 p-3 border border-orange-200 dark:border-orange-800 bg-orange-50 dark:bg-orange-900/20 rounded-lg text-sm",children:[r.jsx("span",{children:""}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-orange-900 dark:text-orange-300",children:j.description}),j.amount&&r.jsxs("p",{className:"text-xs text-orange-700 dark:text-orange-400 mt-0.5",children:["Amount: ",y(j.amount),"  ",j.category]})]})]},N))})]}),!h.aiEnabled&&!u.totalIncome&&!u.totalExpenses&&p.length===0&&r.jsxs("div",{className:"text-center py-16 text-gray-400 dark:text-gray-500",children:[r.jsx("div",{className:"text-5xl mb-4",children:""}),r.jsx("p",{className:"text-lg font-medium text-gray-600 dark:text-gray-400",children:"No data to analyze yet"}),r.jsx("p",{className:"text-sm mt-2",children:"Link your bank accounts and add transactions to get started."}),r.jsx("a",{href:"/linked-accounts",className:"inline-block mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg text-sm font-semibold hover:bg-purple-700 transition-colors",children:"Link an Account"})]})]})})}function cj(){var qt;const{user:e,updateUser:t,logout:n}=_e(),a=lt(),[s,o]=g.useState((e==null?void 0:e.name)||""),[i,l]=g.useState(""),[d,c]=g.useState(""),[m,h]=g.useState(!1),[u,w]=g.useState(""),[p,f]=g.useState(""),[k,x]=g.useState(""),[b,y]=g.useState(""),[v,S]=g.useState(""),[C,P]=g.useState(!1),[j,N]=g.useState(!1),[E,L]=g.useState(!1),[D,M]=g.useState(!1),[K,ae]=g.useState("idle"),[Z,_]=g.useState(""),[T,F]=g.useState(""),[B,U]=g.useState(""),[q,R]=g.useState(""),[H,W]=g.useState(""),[ee,ge]=g.useState(!1);g.useEffect(()=>{O.get("/auth/mfa/status").then(({data:te})=>M(te.mfaEnabled)).catch(()=>{}),O.get("/auth/passkey/list").then(({data:te})=>ne(te)).catch(()=>{})},[]);const[G,ne]=g.useState([]),[ve,de]=g.useState(""),[ke,V]=g.useState("idle"),[ce,re]=g.useState(""),[le,we]=g.useState(""),[I,$]=g.useState(!1),[Y,se]=g.useState("idle"),[Ne,me]=g.useState(""),[xe,pe]=g.useState(""),[oe,be]=g.useState(!1),[Ee,Ie]=g.useState(""),Q=async te=>{var Se,Ce,He,ur;if(te.preventDefault(),xe!=="DELETE"){Ie("Please type DELETE exactly to confirm.");return}Ie(""),be(!0);try{await O.delete("/auth/account",{data:{password:Ne}}),n(),a("/register")}catch(md){Ie(((Ce=(Se=md.response)==null?void 0:Se.data)==null?void 0:Ce.message)||((ur=(He=md.response)==null?void 0:He.data)==null?void 0:ur.error)||"Failed to delete account. Please try again.")}finally{be(!1)}},J=async te=>{var Se,Ce;if(te.preventDefault(),l(""),c(""),!s.trim()){c("Name cannot be empty");return}h(!0);try{await O.patch("/auth/profile",{name:s.trim()}),t({name:s.trim()}),l("Name updated successfully.")}catch(He){c(((Ce=(Se=He.response)==null?void 0:Se.data)==null?void 0:Ce.error)||"Failed to update profile")}finally{h(!1)}},he=async te=>{var Se,Ce;if(te.preventDefault(),y(""),S(""),p!==k){S("New passwords do not match");return}if(p.length<8){S("New password must be at least 8 characters");return}P(!0);try{await O.patch("/auth/change-password",{currentPassword:u,newPassword:p}),y("Password changed. You will be logged out now."),w(""),f(""),x(""),setTimeout(()=>{n(),a("/login")},1800)}catch(He){S(((Ce=(Se=He.response)==null?void 0:Se.data)==null?void 0:Ce.error)||"Failed to change password")}finally{P(!1)}},Ae=async()=>{var te,Se;W(""),R(""),ge(!0);try{const{data:Ce}=await O.post("/auth/mfa/setup");_(Ce.qrCode),ae("setup")}catch(Ce){W(((Se=(te=Ce.response)==null?void 0:te.data)==null?void 0:Se.error)||"Failed to start MFA setup")}finally{ge(!1)}},Oe=async te=>{var Se,Ce;te.preventDefault(),W(""),ge(!0);try{await O.post("/auth/mfa/verify",{token:T}),M(!0),ae("idle"),_(""),F(""),R("Two-factor authentication is now enabled.")}catch(He){W(((Ce=(Se=He.response)==null?void 0:Se.data)==null?void 0:Ce.error)||"Invalid code, please try again")}finally{ge(!1)}},It=async te=>{var Se,Ce;te.preventDefault(),W(""),ge(!0);try{await O.post("/auth/mfa/disable",{password:B}),M(!1),ae("idle"),U(""),R("Two-factor authentication has been disabled.")}catch(He){W(((Ce=(Se=He.response)==null?void 0:Se.data)==null?void 0:Ce.error)||"Failed to disable MFA")}finally{ge(!1)}},dt=async()=>{var te,Se;we(""),re(""),$(!0);try{const{data:Ce}=await O.post("/auth/passkey/register/start"),He=await Vm({optionsJSON:Ce});await O.post("/auth/passkey/register/finish",{...He,name:ve||"Passkey"});const{data:ur}=await O.get("/auth/passkey/list");ne(ur),V("idle"),de(""),re("Passkey registered successfully.")}catch(Ce){we(((Se=(te=Ce.response)==null?void 0:te.data)==null?void 0:Se.error)||Ce.message||"Registration failed")}finally{$(!1)}},gt=async te=>{var Se,Ce;we(""),re("");try{await O.delete(`/auth/passkey/${encodeURIComponent(te)}`),ne(He=>He.filter(ur=>ur.credentialID!==te)),re("Passkey removed.")}catch(He){we(((Ce=(Se=He.response)==null?void 0:Se.data)==null?void 0:Ce.error)||"Failed to remove passkey")}},xt=((e==null?void 0:e.name)||"U").split(" ").map(te=>te[0]).join("").toUpperCase().slice(0,2);return r.jsx(Te,{children:r.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Account Settings"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Manage your profile and security preferences"})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 p-6 flex items-center gap-5",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-pink-500 to-yellow-400 flex items-center justify-center text-white text-2xl font-bold flex-shrink-0",children:xt}),r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e==null?void 0:e.name}),r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e==null?void 0:e.email}),r.jsxs("div",{className:"mt-1 flex gap-2 flex-wrap",children:[r.jsx("span",{className:"text-xs bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 px-2 py-0.5 rounded-full capitalize",children:(e==null?void 0:e.role)||"member"}),r.jsxs("span",{className:"text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-2 py-0.5 rounded-full",children:[" ",(e==null?void 0:e.householdName)||"Household"]})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 p-6",children:[r.jsxs("h2",{className:"text-base font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-indigo-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Profile Information"]}),r.jsxs("form",{onSubmit:J,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Display Name"}),r.jsx("input",{type:"text",value:s,onChange:te=>o(te.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-400",placeholder:"Your name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email Address"}),r.jsx("input",{type:"email",value:(e==null?void 0:e.email)||"",readOnly:!0,className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-900 text-gray-500 dark:text-gray-400 cursor-not-allowed"}),r.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:"Email cannot be changed."})]}),i&&r.jsx("div",{className:"text-sm text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20 px-3 py-2 rounded-lg",children:i}),d&&r.jsx("div",{className:"text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 px-3 py-2 rounded-lg",children:d}),r.jsx("button",{type:"submit",disabled:m,className:"px-5 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-medium rounded-lg transition-colors disabled:opacity-50",children:m?"Saving":"Save Changes"})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 p-6",children:[r.jsxs("h2",{className:"text-base font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Change Password"]}),r.jsxs("form",{onSubmit:he,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Current Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:j?"text":"password",value:u,onChange:te=>w(te.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-amber-400 pr-10",placeholder:"Enter current password"}),r.jsx("button",{type:"button",onClick:()=>N(te=>!te),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:j?r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:E?"text":"password",value:p,onChange:te=>f(te.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-amber-400 pr-10",placeholder:"At least 8 characters"}),r.jsx("button",{type:"button",onClick:()=>L(te=>!te),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:E?r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),p&&r.jsxs("div",{className:"mt-1.5 flex gap-1",children:[[...Array(4)].map((te,Se)=>r.jsx("div",{className:`h-1 flex-1 rounded-full transition-colors ${p.length>=(Se+1)*2?p.length<8?"bg-red-400":p.length<12?"bg-yellow-400":"bg-green-500":"bg-gray-200 dark:bg-gray-600"}`},Se)),r.jsx("span",{className:"text-xs text-gray-400 ml-1",children:p.length<8?"Too short":p.length<12?"Good":"Strong"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Confirm New Password"}),r.jsx("input",{type:"password",value:k,onChange:te=>x(te.target.value),className:`w-full px-3 py-2 rounded-lg border bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-amber-400 ${k&&k!==p?"border-red-400 dark:border-red-500":"border-gray-200 dark:border-gray-600"}`,placeholder:"Repeat new password"}),k&&k!==p&&r.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Passwords don't match"})]}),b&&r.jsx("div",{className:"text-sm text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20 px-3 py-2 rounded-lg",children:b}),v&&r.jsx("div",{className:"text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 px-3 py-2 rounded-lg",children:v}),r.jsx("button",{type:"submit",disabled:C||!u||!p||!k,className:"px-5 py-2 bg-amber-500 hover:bg-amber-600 text-white text-sm font-medium rounded-lg transition-colors disabled:opacity-50",children:C?"Changing":"Change Password"})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 p-6",children:[r.jsxs("h2",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1 flex items-center gap-2",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Two-Factor Authentication"]}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Use an authenticator app (Google Authenticator, Authy, etc.) to add an extra layer of security."}),q&&r.jsx("div",{className:"text-sm text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20 px-3 py-2 rounded-lg mb-3",children:q}),H&&r.jsx("div",{className:"text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 px-3 py-2 rounded-lg mb-3",children:H}),D?r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:[r.jsx("svg",{className:"h-3 w-3",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"MFA Active"]})}),K!=="disable"?r.jsx("button",{type:"button",onClick:()=>{ae("disable"),W(""),R("")},className:"px-4 py-2 text-sm font-medium text-red-600 dark:text-red-400 border border-red-200 dark:border-red-800 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30 transition-colors",children:"Disable MFA"}):r.jsxs("form",{onSubmit:It,className:"space-y-3",children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enter your password to confirm disabling MFA:"}),r.jsx("input",{type:"password",value:B,onChange:te=>U(te.target.value),placeholder:"Current password",required:!0,className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-amber-400"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"submit",disabled:ee||!B,className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white text-sm font-medium rounded-lg transition-colors disabled:opacity-50",children:ee?"Disabling":"Confirm Disable"}),r.jsx("button",{type:"button",onClick:()=>{ae("idle"),W(""),U("")},className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Cancel"})]})]})]}):r.jsxs("div",{className:"space-y-4",children:[K==="idle"&&r.jsx("button",{type:"button",onClick:Ae,disabled:ee,className:"px-5 py-2 bg-amber-500 hover:bg-amber-600 text-white text-sm font-medium rounded-lg transition-colors disabled:opacity-50",children:ee?"Loading":"Enable MFA"}),K==="setup"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Scan this QR code with your authenticator app, then enter the 6-digit code to confirm."}),r.jsx("img",{src:Z,alt:"MFA QR Code",className:"w-40 h-40 border border-gray-200 dark:border-gray-600 rounded-lg"}),r.jsxs("form",{onSubmit:Oe,className:"space-y-3",children:[r.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]{6}",maxLength:6,value:T,onChange:te=>F(te.target.value.replace(/\D/g,"")),placeholder:"6-digit code",required:!0,autoFocus:!0,className:"w-40 px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white text-center text-lg tracking-widest focus:outline-none focus:ring-2 focus:ring-amber-400"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"submit",disabled:ee||T.length!==6,className:"px-5 py-2 bg-amber-500 hover:bg-amber-600 text-white text-sm font-medium rounded-lg transition-colors disabled:opacity-50",children:ee?"Verifying":"Verify & Enable"}),r.jsx("button",{type:"button",onClick:()=>{ae("idle"),_(""),F(""),W("")},className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Cancel"})]})]})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 p-6",children:[r.jsxs("h2",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1 flex items-center gap-2",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),"Passkeys"]}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Sign in with Face ID, Touch ID, or Windows Hello  no password needed."}),ce&&r.jsx("div",{className:"text-sm text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20 px-3 py-2 rounded-lg mb-3",children:ce}),le&&r.jsx("div",{className:"text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 px-3 py-2 rounded-lg mb-3",children:le}),G.length>0&&r.jsx("ul",{className:"space-y-2 mb-4",children:G.map(te=>r.jsxs("li",{className:"flex items-center justify-between px-3 py-2 rounded-lg bg-gray-50 dark:bg-gray-700/50 border border-gray-100 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:te.name}),r.jsxs("p",{className:"text-xs text-gray-400",children:[te.deviceType==="multiDevice"?"Synced (iCloud/Google)":"Device-bound","  Added ",new Date(te.createdAt).toLocaleDateString()]})]})]}),r.jsx("button",{type:"button",onClick:()=>gt(te.credentialID),className:"text-xs text-red-500 hover:text-red-700 dark:hover:text-red-400 transition-colors",children:"Remove"})]},te.credentialID))}),ke==="idle"?r.jsx("button",{type:"button",onClick:()=>{V("naming"),we(""),re("")},className:"px-5 py-2 bg-amber-500 hover:bg-amber-600 text-white text-sm font-medium rounded-lg transition-colors",children:"Add Passkey"}):r.jsxs("div",{className:"space-y-3",children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:'Give this passkey a name (e.g. "MacBook", "iPhone"):'}),r.jsx("input",{type:"text",value:ve,onChange:te=>de(te.target.value),placeholder:"My Passkey",maxLength:40,className:"w-full sm:w-64 px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-amber-400"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:dt,disabled:I,className:"px-5 py-2 bg-amber-500 hover:bg-amber-600 text-white text-sm font-medium rounded-lg transition-colors disabled:opacity-50",children:I?"Waiting for device":"Register Passkey"}),r.jsx("button",{type:"button",onClick:()=>{V("idle"),de(""),we("")},className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Cancel"})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 p-6",children:[r.jsxs("h2",{className:"text-base font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Account Info"]}),r.jsxs("dl",{className:"space-y-3 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("dt",{className:"text-gray-500 dark:text-gray-400",children:"User ID"}),r.jsxs("dd",{className:"text-gray-700 dark:text-gray-300 font-mono text-xs",children:[(qt=e==null?void 0:e.userId)==null?void 0:qt.slice(0,16),""]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("dt",{className:"text-gray-500 dark:text-gray-400",children:"Household"}),r.jsx("dd",{className:"text-gray-700 dark:text-gray-300",children:(e==null?void 0:e.householdName)||""})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("dt",{className:"text-gray-500 dark:text-gray-400",children:"Role"}),r.jsx("dd",{className:"text-gray-700 dark:text-gray-300 capitalize",children:(e==null?void 0:e.role)||"member"})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-red-100 dark:border-red-900/40 p-6 space-y-6",children:[r.jsx("h2",{className:"text-base font-semibold text-red-600 dark:text-red-400",children:"Danger Zone"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sign Out"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"This will clear your session on this device."}),r.jsx("button",{onClick:()=>{n(),a("/login")},className:"px-5 py-2 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 border border-red-200 dark:border-red-800 text-sm font-medium rounded-lg hover:bg-red-100 dark:hover:bg-red-900/50 transition-colors",children:"Sign Out"})]}),r.jsx("hr",{className:"border-red-100 dark:border-red-900/40"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Delete Account"}),r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:["Permanently deletes your account, all your data, and revokes linked bank connections.",(e==null?void 0:e.role)==="owner"&&" As the household owner, this will also delete the household and cancel any active subscription."," ","This action ",r.jsx("strong",{children:"cannot be undone"}),"."]}),Y==="idle"?r.jsx("button",{type:"button",onClick:()=>{se("confirm"),Ie("")},className:"px-5 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-lg transition-colors",children:"Delete My Account"}):r.jsxs("form",{onSubmit:Q,className:"space-y-4 max-w-sm",children:[r.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg px-4 py-3 text-sm text-red-700 dark:text-red-400",children:" This will immediately and permanently delete all your data. There is no recovery."}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Your password"}),r.jsx("input",{type:"password",value:Ne,onChange:te=>me(te.target.value),placeholder:"Enter your password",required:!0,className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-400"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Type ",r.jsx("span",{className:"font-mono font-bold",children:"DELETE"})," to confirm"]}),r.jsx("input",{type:"text",value:xe,onChange:te=>pe(te.target.value),placeholder:"DELETE",required:!0,className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-400 font-mono"})]}),Ee&&r.jsx("div",{className:"text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 px-3 py-2 rounded-lg",children:Ee}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"submit",disabled:oe||xe!=="DELETE"||!Ne,className:"px-5 py-2 bg-red-600 hover:bg-red-700 disabled:opacity-50 text-white text-sm font-semibold rounded-lg transition-colors",children:oe?"Deleting":"Permanently Delete Account"}),r.jsx("button",{type:"button",onClick:()=>{se("idle"),me(""),pe(""),Ie("")},className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Cancel"})]})]})]})]})]})})}function uj(){return r.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:r.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-xl shadow-sm p-8 md:p-12",children:[r.jsxs("div",{className:"mb-8 border-b border-gray-200 pb-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-1",children:"Privacy Policy"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Effective Date: February 25, 2026"})]}),r.jsxs("div",{className:"space-y-8 text-gray-700 leading-relaxed",children:[r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"1. Introduction"}),r.jsx("p",{children:"ACED Division LLC (we, our, or us) operates the Household Budget application (the Service). We are committed to protecting your privacy and ensuring the security of your personal and financial information. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our Service."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"2. Information We Collect"}),r.jsx("p",{className:"mb-3",children:"To provide our tools, we collect the following types of information:"}),r.jsxs("ul",{className:"space-y-3 list-none",children:[r.jsxs("li",{className:"pl-4 border-l-4 border-blue-200",children:[r.jsx("span",{className:"font-medium text-gray-800",children:"Account Information:"})," Name, email address, and password when you register for an account."]}),r.jsxs("li",{className:"pl-4 border-l-4 border-blue-200",children:[r.jsx("span",{className:"font-medium text-gray-800",children:"Financial Information:"})," We use Plaid Inc. (Plaid) to connect your account with your bank accounts. We receive read-only access to data such as transaction history, account balances, and masked account details (e.g., the last four digits). We do not receive, collect, or store your full bank account numbers, routing numbers, or your banking login credentials."]}),r.jsxs("li",{className:"pl-4 border-l-4 border-blue-200",children:[r.jsx("span",{className:"font-medium text-gray-800",children:"Usage Data:"})," Basic log data regarding how you interact with our application, which is used strictly for troubleshooting and improving the Service."]})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"3. How We Use Your Information"}),r.jsx("p",{className:"mb-3",children:"We use the information we collect strictly to operate the Service, specifically to:"}),r.jsxs("ul",{className:"space-y-2 list-disc list-inside text-gray-700",children:[r.jsx("li",{children:"Categorize transactions and provide household budgeting insights."}),r.jsx("li",{children:"Maintain and secure your account."}),r.jsx("li",{children:"Provide customer support and respond to inquiries."})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"4. How We Share Your Information"}),r.jsx("p",{className:"mb-3",children:"We do not sell, rent, or trade your personal or financial information. We only share your data with trusted third-party service providers who assist us in operating our application, strictly under obligations of confidentiality:"}),r.jsxs("ul",{className:"space-y-3 list-none",children:[r.jsxs("li",{className:"pl-4 border-l-4 border-green-200",children:[r.jsx("span",{className:"font-medium text-gray-800",children:"Financial Data Partners:"})," We share necessary connection data with Plaid to facilitate the secure transfer of your financial information. Plaid's use of your data is governed by the"," ",r.jsx("a",{href:"https://plaid.com/legal/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Plaid End User Privacy Policy"}),"."]}),r.jsxs("li",{className:"pl-4 border-l-4 border-green-200",children:[r.jsx("span",{className:"font-medium text-gray-800",children:"Infrastructure Providers:"})," Your data is hosted and secured utilizing Namecheap for web hosting and MongoDB for encrypted database services."]})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"5. Data Security and Retention"}),r.jsx("p",{children:"We implement industry-standard security measures to protect your data. All sensitive financial data retrieved via Plaid is encrypted at rest using volume-level storage encryption provided by our database host. We retain your personal and financial information only for as long as your account is active or as needed to provide you with the Service."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"6. Your Rights and Choices"}),r.jsx("p",{className:"mb-3",children:"You have full control over your data:"}),r.jsxs("ul",{className:"space-y-3 list-none",children:[r.jsxs("li",{className:"pl-4 border-l-4 border-purple-200",children:[r.jsx("span",{className:"font-medium text-gray-800",children:"Disconnecting Accounts:"})," You can revoke Household Budget's access to your financial institutions at any time within the application settings, which severs the connection through Plaid."]}),r.jsxs("li",{className:"pl-4 border-l-4 border-purple-200",children:[r.jsx("span",{className:"font-medium text-gray-800",children:"Account Deletion:"})," You may request the complete deletion of your account and all associated personal and financial data by contacting us."]}),r.jsxs("li",{className:"pl-4 border-l-4 border-purple-200",children:[r.jsx("span",{className:"font-medium text-gray-800",children:"Access and Correction:"})," You may review and update your account information at any time within your profile settings."]})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"7. Changes to This Privacy Policy"}),r.jsx("p",{children:"We may update this Privacy Policy periodically. We will notify you of any significant changes by posting the new Privacy Policy on this page and updating the Effective Date at the top."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"8. Contact Us"}),r.jsx("p",{className:"mb-3",children:"If you have any questions about this Privacy Policy or our data practices, please contact us at:"}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-sm space-y-1",children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Email:"})," ",r.jsx("a",{href:"mailto:support@aceddivision.com",className:"text-blue-600 hover:underline",children:"support@aceddivision.com"})]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Entity:"})," ACED Division LLC"]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Location:"})," Cumming, Georgia, USA"]})]})]})]}),r.jsxs("div",{className:"mt-10 pt-6 border-t border-gray-200 flex flex-wrap gap-4 justify-between items-center text-sm text-gray-500",children:[r.jsx(fe,{to:"/terms",className:"text-blue-600 hover:underline",children:"Terms & Conditions"}),r.jsx(fe,{to:"/register",className:"text-blue-600 hover:underline",children:" Back to Sign Up"})]})]})})}function mj(){return r.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:r.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-xl shadow-sm p-8 md:p-12",children:[r.jsxs("div",{className:"mb-8 border-b border-gray-200 pb-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-1",children:"Terms and Conditions"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Effective Date: February 27, 2026"})]}),r.jsxs("div",{className:"space-y-8 text-gray-700 leading-relaxed",children:[r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"1. Acceptance of Terms"}),r.jsx("p",{children:"By downloading, accessing, or using the Household Budget application (the Service), provided by ACED Division LLC (we, us, or our), you agree to be bound by these Terms and Conditions. If you do not agree to these terms, please do not use the Service."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"2. Description of Service"}),r.jsx("p",{children:"Household Budget is a personal finance management tool designed to help users track and categorize their expenses. The Service provides read-only access to your financial transaction history via third-party integrations to assist in personal budgeting."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"3. Third-Party Services and Plaid Integration"}),r.jsxs("p",{children:["Our Service utilizes Plaid Inc. (Plaid) to connect to your financial institutions. By using our Service, you grant us and Plaid the right, power, and authority to act on your behalf to access and transmit your personal and financial information from the relevant financial institution. You agree to your personal and financial information being transferred, stored, and processed by Plaid in accordance with the"," ",r.jsx("a",{href:"https://plaid.com/legal/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Plaid End User Privacy Policy"}),"."]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"4. User Responsibilities"}),r.jsx("p",{children:"You are responsible for maintaining the confidentiality of your account login information and are fully responsible for all activities that occur under your account. You agree to provide accurate, current, and complete information when creating your account and connecting financial institutions."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"5. Limitation of Liability and Disclaimer of Warranties"}),r.jsx("p",{className:"mb-3",children:"The Service is provided as is and as available without warranties of any kind. ACED Division LLC is not a financial planner, broker, or tax advisor. The Service is intended only to assist you in your financial organization and decision-making and is broad in scope. Your personal financial situation is unique, and any information and advice obtained through the Service may not be appropriate for your situation."}),r.jsx("p",{children:"To the maximum extent permitted by law, ACED Division LLC shall not be liable for any indirect, incidental, special, consequential, or punitive damages, or any loss of profits or revenues, whether incurred directly or indirectly, or any loss of data, use, goodwill, or other intangible losses resulting from your use of the Service."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"6. Intellectual Property"}),r.jsx("p",{children:"All code, design, graphics, and text included in the Service are the intellectual property of ACED Division LLC and are protected by applicable copyright and trademark laws. You may not copy, modify, distribute, or reverse-engineer any part of the Service."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"7. Termination"}),r.jsx("p",{children:"We reserve the right to suspend or terminate your account and access to the Service at our sole discretion, without notice, for conduct that we believe violates these Terms and Conditions or is harmful to other users of the Service, us, or third parties, or for any other reason."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"8. Governing Law"}),r.jsx("p",{children:"These Terms and Conditions shall be governed by and construed in accordance with the laws of the State of Georgia, United States, without regard to its conflict of law provisions."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"9. Contact Information"}),r.jsx("p",{className:"mb-3",children:"If you have any questions or concerns about these Terms, please contact us at:"}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-sm space-y-1",children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Email:"})," ",r.jsx("a",{href:"mailto:support@aceddivision.com",className:"text-blue-600 hover:underline",children:"support@aceddivision.com"})]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Entity:"})," ACED Division LLC"]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Location:"})," Cumming, Georgia, USA"]})]})]})]}),r.jsxs("div",{className:"mt-10 pt-6 border-t border-gray-200 flex flex-wrap gap-4 justify-between items-center text-sm text-gray-500",children:[r.jsx(fe,{to:"/privacy-policy",className:"text-blue-600 hover:underline",children:"Privacy Policy"}),r.jsx(fe,{to:"/register",className:"text-blue-600 hover:underline",children:" Back to Sign Up"})]})]})})}const hr=[{id:"welcome",title:"Welcome",emoji:""},{id:"income",title:"Your Income",emoji:""},{id:"fixed-expenses",title:"Fixed Bills",emoji:""},{id:"goals",title:"Savings Goals",emoji:""},{id:"passkey",title:"Set up Passkey",emoji:""},{id:"bank",title:"Link Bank",emoji:""},{id:"done",title:"You're set!",emoji:""}],hj=[{value:"weekly",label:"Weekly"},{value:"biweekly",label:"Every 2 weeks (bi-weekly)"},{value:"semimonthly",label:"Twice a month (1st & 15th)"},{value:"monthly",label:"Monthly"}],Zo=[{name:"Rent / Mortgage",group:"Housing",frequency:"monthly",dueDay:1},{name:"Electric",group:"Utilities",frequency:"monthly",dueDay:15},{name:"Water",group:"Utilities",frequency:"monthly",dueDay:15},{name:"Internet",group:"Utilities",frequency:"monthly",dueDay:15},{name:"Phone",group:"Bills",frequency:"monthly",dueDay:20},{name:"Car Payment",group:"Auto",frequency:"monthly",dueDay:1},{name:"Car Insurance",group:"Insurance",frequency:"monthly",dueDay:1},{name:"Health Insurance",group:"Insurance",frequency:"monthly",dueDay:1},{name:"Groceries",group:"Food",frequency:"weekly",dueDay:1},{name:"Streaming (Netflix/etc)",group:"Entertainment",frequency:"monthly",dueDay:1},{name:"Student Loan",group:"Debt",frequency:"monthly",dueDay:1},{name:"Gym",group:"Other",frequency:"monthly",dueDay:1}],gj=["Emergency","Project","Investment","Other"];function ei({label:e,hint:t,children:n}){return r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),t&&r.jsx("p",{className:"text-xs text-gray-400",children:t}),n]})}function xj({step:e,total:t}){return r.jsx("div",{className:"w-full bg-gray-100 rounded-full h-1.5 mb-6",children:r.jsx("div",{className:"bg-indigo-500 h-1.5 rounded-full transition-all duration-500",style:{width:`${Math.round(e/(t-1)*100)}%`}})})}function pj(){var q;const e=lt(),{user:t,updateUser:n,isAuthenticated:a}=_e();if(!a)return r.jsx(Ws,{to:"/login",replace:!0});if((t==null?void 0:t.onboardingCompleted)===!0)return r.jsx(Ws,{to:"/dashboard",replace:!0});const[s,o]=g.useState(0),[i,l]=g.useState(!1),[d,c]=g.useState(""),[m,h]=g.useState({contributorName:(t==null?void 0:t.name)||"",amount:"",frequency:"biweekly"}),[u,w]=g.useState(Object.fromEntries(Zo.map(R=>[R.name,{enabled:!1,amount:""}]))),[p,f]=g.useState([]),[k,x]=g.useState([{name:"",target:"",monthlyContribution:"",type:"Emergency",currentBalance:""}]),[b,y]=g.useState(!1),[v,S]=g.useState(!1),[C,P]=g.useState(!1),[j,N]=g.useState(""),E=async()=>{var R,H;N(""),P(!0);try{const{data:W}=await O.post("/auth/passkey/register/start"),ee=await Vm({optionsJSON:W});await O.post("/auth/passkey/register/finish",{...ee,name:"My Passkey"}),n&&n({passkeyCount:1}),S(!0)}catch(W){N(((H=(R=W.response)==null?void 0:R.data)==null?void 0:H.error)||W.message||"Registration failed. Please try again.")}finally{P(!1)}},L=hr[s],D=s===hr.length-1,M=()=>o(R=>Math.min(R+1,hr.length-1)),K=()=>o(R=>Math.max(R-1,0)),ae=()=>x(R=>[...R,{name:"",target:"",monthlyContribution:"",type:"Other",currentBalance:""}]),Z=(R,H,W)=>x(ee=>ee.map((ge,G)=>G===R?{...ge,[H]:W}:ge)),_=R=>x(H=>H.filter((W,ee)=>ee!==R)),T=()=>f(R=>[...R,{name:"",amount:"",group:"Other",frequency:"monthly",dueDay:1}]),F=(R,H,W)=>f(ee=>ee.map((ge,G)=>G===R?{...ge,[H]:W}:ge)),B=R=>f(H=>H.filter((W,ee)=>ee!==R)),U=async(R=!1)=>{var H,W;l(!0),c("");try{if(R)await O.patch("/onboarding/skip");else{const ee=[...Zo.filter(G=>{var ne;return(ne=u[G.name])==null?void 0:ne.enabled}).map(G=>({...G,amount:parseFloat(u[G.name].amount)||0})),...p.filter(G=>G.name&&G.amount)],ge=k.filter(G=>G.name).map(G=>({...G,target:parseFloat(G.target)||0,monthlyContribution:parseFloat(G.monthlyContribution)||0,currentBalance:parseFloat(G.currentBalance)||0}));await O.post("/onboarding/complete",{income:m.amount?{...m,amount:parseFloat(m.amount)}:null,fixedExpenses:ee,goals:ge})}n&&n({onboardingCompleted:!0}),e("/dashboard",{replace:!0})}catch(ee){c(((W=(H=ee.response)==null?void 0:H.data)==null?void 0:W.error)||"Something went wrong. Please try again.")}finally{l(!1)}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-400 flex items-center justify-center p-4",children:r.jsxs("div",{className:"w-full max-w-xl",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden",children:[r.jsxs("div",{className:"px-8 pt-8 pb-0",children:[r.jsx(xj,{step:s,total:hr.length-1}),r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsxs("span",{className:"text-xs text-gray-400 font-medium",children:["Step ",Math.min(s+1,hr.length-1)," of ",hr.length-1]}),s>0&&!D&&r.jsx("button",{onClick:()=>U(!0),className:"text-xs text-gray-400 hover:text-gray-600 transition",children:"Skip setup "})]})]}),r.jsxs("div",{className:"px-8 py-6 min-h-[420px] flex flex-col",children:[L.id==="welcome"&&r.jsxs("div",{className:"flex flex-col items-center text-center flex-1 justify-center gap-4",children:[r.jsx("div",{className:"text-6xl animate-bounce",children:""}),r.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome, ",((q=t==null?void 0:t.name)==null?void 0:q.split(" ")[0])||"there","!"]}),r.jsx("p",{className:"text-gray-500 max-w-sm",children:"Let's set up your household budget in about 2 minutes. We'll walk you through your income, your regular bills, your savings goals, and optionally link your bank account  so your dashboard is ready to go from day one."}),r.jsx("div",{className:"flex flex-wrap justify-center gap-2 mt-2",children:hr.slice(1,-1).map(R=>r.jsxs("span",{className:"flex items-center gap-1 bg-indigo-50 text-indigo-700 text-xs font-medium px-3 py-1.5 rounded-full",children:[R.emoji," ",R.title]},R.id))})]}),L.id==="income"&&r.jsxs("div",{className:"flex flex-col gap-5 flex-1",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-3xl mb-1",children:""}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Your Income"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Tell us your take-home pay and how often you get paid."})]}),r.jsx(ei,{label:"Your name (as it appears on income)",children:r.jsx("input",{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-400",placeholder:"e.g. John",value:m.contributorName,onChange:R=>h(H=>({...H,contributorName:R.target.value}))})}),r.jsx(ei,{label:"Take-home pay per paycheck",hint:"After taxes and deductions",children:r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-2.5 text-gray-400 font-medium",children:"$"}),r.jsx("input",{type:"number",min:"0",className:"w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-400",placeholder:"0.00",value:m.amount,onChange:R=>h(H=>({...H,amount:R.target.value}))})]})}),r.jsx(ei,{label:"Pay frequency",children:r.jsx("select",{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-400",value:m.frequency,onChange:R=>h(H=>({...H,frequency:R.target.value})),children:hj.map(R=>r.jsx("option",{value:R.value,children:R.label},R.value))})}),m.amount&&r.jsxs("div",{className:"bg-indigo-50 rounded-lg px-4 py-3 text-sm text-indigo-700",children:[" That's approximately"," ",r.jsxs("strong",{children:["$",(m.frequency==="weekly"?parseFloat(m.amount)*52/12:m.frequency==="biweekly"?parseFloat(m.amount)*26/12:m.frequency==="semimonthly"?parseFloat(m.amount)*2:parseFloat(m.amount)).toFixed(0),"/mo"]})," ","in take-home pay."]})]}),L.id==="fixed-expenses"&&r.jsxs("div",{className:"flex flex-col gap-4 flex-1",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-3xl mb-1",children:""}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Fixed Bills"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Check off your regular bills and enter the amounts. Leave blank to skip."})]}),r.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto pr-1",children:Zo.map(R=>{var H,W,ee,ge;return r.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border transition cursor-pointer ${(H=u[R.name])!=null&&H.enabled?"border-indigo-300 bg-indigo-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>w(G=>{var ne;return{...G,[R.name]:{...G[R.name],enabled:!((ne=G[R.name])!=null&&ne.enabled)}}}),children:[r.jsx("input",{type:"checkbox",checked:((W=u[R.name])==null?void 0:W.enabled)||!1,onChange:()=>{},className:"h-4 w-4 text-indigo-600 rounded flex-shrink-0",onClick:G=>G.stopPropagation()}),r.jsx("span",{className:"flex-1 text-sm font-medium text-gray-700",children:R.name}),((ee=u[R.name])==null?void 0:ee.enabled)&&r.jsxs("div",{className:"flex items-center gap-1",onClick:G=>G.stopPropagation(),children:[r.jsx("span",{className:"text-gray-400 text-sm",children:"$"}),r.jsx("input",{type:"number",min:"0",className:"w-24 px-2 py-1 border border-gray-300 rounded text-sm focus:ring-1 focus:ring-indigo-400",placeholder:"Amount",value:((ge=u[R.name])==null?void 0:ge.amount)||"",onChange:G=>w(ne=>({...ne,[R.name]:{...ne[R.name],amount:G.target.value}}))})]})]},R.name)})}),p.map((R,H)=>r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsx("input",{className:"flex-1 min-w-0 px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Bill name",value:R.name,onChange:W=>F(H,"name",W.target.value)}),r.jsx("span",{className:"text-gray-400 text-sm",children:"$"}),r.jsx("input",{type:"number",min:"0",className:"w-24 px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Amount",value:R.amount,onChange:W=>F(H,"amount",W.target.value)}),r.jsx("button",{onClick:()=>B(H),className:"text-red-400 hover:text-red-600 text-lg leading-none",children:""})]},H)),r.jsx("button",{type:"button",onClick:T,className:"text-sm text-indigo-600 hover:text-indigo-800 font-medium self-start",children:"+ Add another bill"})]}),L.id==="goals"&&r.jsxs("div",{className:"flex flex-col gap-4 flex-1",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-3xl mb-1",children:""}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Savings Goals"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Add any savings goals  emergency fund, vacation, car, etc. You can always add more later."})]}),r.jsx("div",{className:"space-y-4 max-h-72 overflow-y-auto pr-1",children:k.map((R,H)=>r.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl border border-gray-200 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:["Goal ",H+1]}),k.length>1&&r.jsx("button",{onClick:()=>_(H),className:"text-red-400 hover:text-red-600 text-sm",children:"Remove"})]}),r.jsx("input",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-400",placeholder:"Goal name (e.g. Emergency Fund)",value:R.name,onChange:W=>Z(H,"name",W.target.value)}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Target amount"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-2 top-2 text-gray-400 text-sm",children:"$"}),r.jsx("input",{type:"number",min:"0",className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 rounded-lg text-sm focus:ring-1 focus:ring-indigo-400",placeholder:"5,000",value:R.target,onChange:W=>Z(H,"target",W.target.value)})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Monthly contribution"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-2 top-2 text-gray-400 text-sm",children:"$"}),r.jsx("input",{type:"number",min:"0",className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 rounded-lg text-sm focus:ring-1 focus:ring-indigo-400",placeholder:"200",value:R.monthlyContribution,onChange:W=>Z(H,"monthlyContribution",W.target.value)})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Type"}),r.jsx("select",{className:"w-full px-2 py-1.5 border border-gray-300 rounded-lg text-sm focus:ring-1 focus:ring-indigo-400",value:R.type,onChange:W=>Z(H,"type",W.target.value),children:gj.map(W=>r.jsx("option",{value:W,children:W},W))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Current balance"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-2 top-2 text-gray-400 text-sm",children:"$"}),r.jsx("input",{type:"number",min:"0",className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 rounded-lg text-sm focus:ring-1 focus:ring-indigo-400",placeholder:"0",value:R.currentBalance,onChange:W=>Z(H,"currentBalance",W.target.value)})]})]})]})]},H))}),r.jsx("button",{type:"button",onClick:ae,className:"text-sm text-indigo-600 hover:text-indigo-800 font-medium self-start",children:"+ Add another goal"})]}),L.id==="passkey"&&r.jsxs("div",{className:"flex flex-col items-center text-center flex-1 justify-center gap-5",children:[r.jsx("div",{className:"text-5xl",children:""}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Secure your account"}),r.jsxs("p",{className:"text-gray-500 max-w-sm text-sm",children:["Create a ",r.jsx("strong",{children:"passkey"})," using Face ID, Touch ID, or Windows Hello. Passkeys replace passwords entirely  no app needed  and are required to link a bank account."]}),v?r.jsx("div",{className:"flex items-center gap-2 bg-green-50 border border-green-200 text-green-700 px-5 py-3 rounded-xl font-medium",children:" Passkey created! Your account is secured."}):r.jsxs("div",{className:"flex flex-col items-center gap-3 w-full",children:[j&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm px-4 py-2 rounded-lg w-full max-w-sm",children:j}),r.jsx("button",{type:"button",onClick:E,disabled:C,className:"w-full max-w-xs bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 text-white font-semibold py-3 px-6 rounded-xl transition flex items-center justify-center gap-2",children:C?r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Waiting for device"]}):" Create Passkey"}),r.jsx("button",{type:"button",onClick:M,className:"text-sm text-gray-400 hover:text-gray-600 transition",children:"Skip for now  I'll set this up later"})]})]}),L.id==="bank"&&r.jsxs("div",{className:"flex flex-col items-center text-center flex-1 justify-center gap-5",children:[r.jsx("div",{className:"text-5xl",children:""}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Link Your Bank Account"}),r.jsx("p",{className:"text-gray-500 max-w-sm text-sm",children:"Connect your bank so your transactions sync automatically. We use Plaid  read-only access, and your banking credentials are never stored by us."}),b?r.jsx("div",{className:"flex items-center gap-2 bg-green-50 border border-green-200 text-green-700 px-5 py-3 rounded-xl font-medium",children:" Bank account linked successfully!"}):r.jsxs("div",{className:"flex flex-col items-center gap-3 w-full",children:[r.jsx(jh,{onSuccess:()=>y(!0)}),r.jsx("button",{onClick:M,className:"text-sm text-gray-400 hover:text-gray-600 transition",children:"Skip for now  I'll link it later"})]})]}),L.id==="done"&&r.jsxs("div",{className:"flex flex-col items-center text-center flex-1 justify-center gap-5",children:[r.jsx("div",{className:"text-6xl animate-bounce",children:""}),r.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"You're all set!"}),r.jsx("p",{className:"text-gray-500 max-w-sm",children:"Your budget foundation is ready. Head to your dashboard to see your numbers and start tracking your spending."}),[m.amount&&" Income recorded",Object.values(u).some(R=>R.enabled)&&" Fixed bills added",k.some(R=>R.name)&&" Savings goals created",v&&" Passkey created",b&&" Bank account linked"].filter(Boolean).map(R=>r.jsx("div",{className:"text-sm font-medium text-indigo-700 bg-indigo-50 px-4 py-2 rounded-full",children:R},R)),d&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm w-full max-w-sm",children:d})]})]}),r.jsxs("div",{className:"px-8 pb-8 flex items-center justify-between gap-3",children:[s>0&&!D?r.jsx("button",{onClick:K,className:"px-5 py-2.5 text-sm font-medium text-gray-600 border border-gray-300 rounded-xl hover:bg-gray-50 transition",children:" Back"}):r.jsx("div",{}),D?r.jsx("button",{onClick:()=>U(!1),disabled:i,className:"flex-1 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 text-white font-bold py-3 rounded-xl transition text-base",children:i?"Saving...":"Go to my Dashboard "}):L.id==="bank"?b?r.jsx("button",{onClick:M,className:"ml-auto px-8 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-xl transition",children:"Next "}):null:r.jsx("button",{onClick:M,className:"ml-auto px-8 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-xl transition",children:L.id==="welcome"?"Let's go ":"Next "})]})]}),r.jsx("div",{className:"flex justify-center gap-2 mt-5",children:hr.map((R,H)=>r.jsx("div",{className:`rounded-full transition-all duration-300 ${H===s?"w-6 h-2.5 bg-white":H<s?"w-2.5 h-2.5 bg-white/60":"w-2.5 h-2.5 bg-white/30"}`},R.id))})]})})}function Dr(e=.12){const t=g.useRef(null),[n,a]=g.useState(!1);return g.useEffect(()=>{const s=new IntersectionObserver(([o])=>{o.isIntersecting&&a(!0)},{threshold:e});return t.current&&s.observe(t.current),()=>s.disconnect()},[]),[t,n]}function fj(e,t,n=1800){const[a,s]=g.useState(0);return g.useEffect(()=>{if(!t)return;let o=0;const i=e/(n/16),l=setInterval(()=>{o+=i,o>=e?(s(e),clearInterval(l)):s(Math.floor(o))},16);return()=>clearInterval(l)},[t,e,n]),a}function ns({target:e,suffix:t,label:n,inView:a}){const s=fj(e,a);return r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-4xl font-extrabold text-white tracking-tight",children:[s.toLocaleString(),t]}),r.jsx("div",{className:"text-indigo-200 text-sm mt-1 font-medium",children:n})]})}function yj({icon:e,title:t,desc:n,delay:a,inView:s}){return r.jsxs("div",{className:"group bg-white rounded-2xl p-6 shadow-sm border border-gray-100 hover:shadow-xl hover:-translate-y-1 transition-all duration-300",style:{opacity:s?1:0,transform:s?"translateY(0)":"translateY(28px)",transition:`opacity 0.6s ease ${a}ms, transform 0.6s ease ${a}ms, box-shadow 0.3s, translate 0.3s`},children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-50 flex items-center justify-center mb-4 group-hover:bg-indigo-100 transition-colors",children:e}),r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:t}),r.jsx("p",{className:"text-sm text-gray-500 leading-relaxed",children:n})]})}function bj({num:e,title:t,desc:n,inView:a,delay:s}){return r.jsxs("div",{className:"flex gap-5",style:{opacity:a?1:0,transform:a?"translateX(0)":"translateX(-24px)",transition:`opacity 0.6s ease ${s}ms, transform 0.6s ease ${s}ms`},children:[r.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-bold text-sm shadow-lg shadow-indigo-200",children:e}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:t}),r.jsx("p",{className:"text-sm text-gray-500 leading-relaxed",children:n})]})]})}function vj(){return r.jsxs("div",{className:"relative w-full max-w-lg mx-auto lg:mx-0",style:{animation:"float 5s ease-in-out infinite"},children:[r.jsx("div",{className:"absolute inset-0 rounded-3xl bg-gradient-to-br from-indigo-500/30 to-purple-500/30 blur-2xl scale-105 -z-10"}),r.jsxs("div",{className:"bg-gray-900 rounded-2xl overflow-hidden shadow-2xl border border-white/10",children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-800/80 border-b border-white/5",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-6 h-6 rounded-md bg-indigo-500 flex items-center justify-center text-white text-xs font-bold",children:"H"}),r.jsx("span",{className:"text-white text-xs font-semibold",children:"Household Budget"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-5 h-5 rounded-full bg-indigo-400/30"}),r.jsx("div",{className:"text-[10px] text-gray-400",children:"Johnson Family"})]})]}),r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{label:"Income",value:"$6,240",color:"from-green-500/20 to-emerald-500/10",text:"text-green-400",dot:"bg-green-400"},{label:"Fixed Exp.",value:"$2,150",color:"from-red-500/20 to-rose-500/10",text:"text-red-400",dot:"bg-red-400"},{label:"Variable",value:"$843",color:"from-orange-500/20 to-amber-500/10",text:"text-orange-400",dot:"bg-orange-400"},{label:"Available",value:"$3,247",color:"from-blue-500/20 to-indigo-500/10",text:"text-blue-400",dot:"bg-blue-400"}].map(e=>r.jsxs("div",{className:`rounded-xl p-3 bg-gradient-to-br ${e.color} border border-white/5`,children:[r.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[r.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${e.dot}`}),r.jsx("span",{className:"text-[10px] text-gray-400",children:e.label})]}),r.jsx("div",{className:`text-sm font-bold ${e.text}`,children:e.value})]},e.label))}),r.jsxs("div",{className:"bg-gray-800/60 rounded-xl p-3 border border-white/5",children:[r.jsx("div",{className:"text-[10px] text-gray-400 mb-2",children:"Spending by Category"}),r.jsx("div",{className:"flex items-end gap-1 h-12",children:[65,40,80,55,90,35,70,45,60,85,50,75].map((e,t)=>r.jsx("div",{className:"flex-1 rounded-sm",style:{height:`${e}%`,background:`hsl(${220+t*5}, 80%, ${50+t*2}%)`,opacity:.8,animation:`barGrow 0.6s ease ${t*60}ms both`}},t))})]}),r.jsxs("div",{className:"bg-gray-800/60 rounded-xl overflow-hidden border border-white/5",children:[r.jsx("div",{className:"text-[10px] text-gray-400 px-3 py-2 border-b border-white/5",children:"Recent Activity"}),[{name:"Netflix",cat:"Entertainment",amt:"-$15.99",color:"bg-rose-400"},{name:"Whole Foods",cat:"Groceries",amt:"-$124.50",color:"bg-orange-400"},{name:"Payroll Deposit",cat:"Income",amt:"+$3,120",color:"bg-green-400",pos:!0}].map((e,t)=>r.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-white/5 last:border-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${e.color}`}),r.jsxs("div",{children:[r.jsx("div",{className:"text-[10px] text-gray-200 font-medium",children:e.name}),r.jsx("div",{className:"text-[9px] text-gray-500",children:e.cat})]})]}),r.jsx("span",{className:`text-[10px] font-semibold ${e.pos?"text-green-400":"text-gray-400"}`,children:e.amt})]},t))]})]})]})]})}function jj(){const{isAuthenticated:e}=_e(),[t,n]=g.useState(!1),[a,s]=g.useState(!1),[o,i]=Dr(),[l,d]=Dr(),[c,m]=Dr(),[h,u]=Dr(),[w,p]=Dr(),[f,k]=Dr(),[x,b]=Dr();g.useEffect(()=>{const v=()=>n(window.scrollY>20);return window.addEventListener("scroll",v,{passive:!0}),()=>window.removeEventListener("scroll",v)},[]);const y=[{icon:r.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),title:"Budget Tracking",desc:"Track income, fixed bills, and variable spending all in one clean dashboard. Know exactly where every dollar goes."},{icon:r.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),title:"Bank Sync via Plaid",desc:"Securely connect your bank accounts and credit cards. Transactions flow in automatically  no manual entry needed."},{icon:r.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),title:"Household Members",desc:"Invite your partner or family. Share the budget, split responsibilities, and stay aligned on your financial goals."},{icon:r.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),title:"Goals & Savings",desc:"Set savings goals  vacation fund, emergency fund, down payment. Watch your progress grow with visual trackers."},{icon:r.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m1.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),title:"AI Financial Insights",desc:"Get smart recommendations tailored to your spending patterns. Spot waste, find savings opportunities, plan ahead."},{icon:r.jsxs("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),title:"Receipt Scanning",desc:"Snap a photo of any receipt and we'll read it for you. Log expenses in seconds without typing a single digit."}];return r.jsxs(r.Fragment,{children:[r.jsx("style",{children:`
        @keyframes float {
          0%, 100% { transform: translateY(0px) rotate(0deg); }
          33%       { transform: translateY(-12px) rotate(0.5deg); }
          66%       { transform: translateY(-6px) rotate(-0.5deg); }
        }
        @keyframes orb1 {
          0%, 100% { transform: translate(0,0) scale(1); }
          50%       { transform: translate(40px,-30px) scale(1.1); }
        }
        @keyframes orb2 {
          0%, 100% { transform: translate(0,0) scale(1); }
          50%       { transform: translate(-30px,20px) scale(0.95); }
        }
        @keyframes orb3 {
          0%, 100% { transform: translate(0,0) scale(1); }
          50%       { transform: translate(20px,40px) scale(1.05); }
        }
        @keyframes shimmer {
          0%   { background-position: -200% center; }
          100% { background-position:  200% center; }
        }
        @keyframes fadeUp {
          from { opacity: 0; transform: translateY(32px); }
          to   { opacity: 1; transform: translateY(0); }
        }
        @keyframes barGrow {
          from { transform: scaleY(0); transform-origin: bottom; }
          to   { transform: scaleY(1); transform-origin: bottom; }
        }
        @keyframes gradShift {
          0%,100% { background-position: 0% 50%; }
          50%      { background-position: 100% 50%; }
        }
        .gradient-text {
          background: linear-gradient(135deg, #818cf8 0%, #a78bfa 35%, #60a5fa 65%, #818cf8 100%);
          background-size: 200% auto;
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
          animation: shimmer 4s linear infinite;
        }
        .btn-shimmer {
          background: linear-gradient(90deg, #4f46e5, #7c3aed, #2563eb, #4f46e5);
          background-size: 300% auto;
          animation: gradShift 3s ease infinite;
        }
        .hero-grad {
          background: linear-gradient(135deg, #0f0c29 0%, #1a1060 30%, #24243e 60%, #0d0d2b 100%);
        }
        .card-hover { transition: transform 0.25s ease, box-shadow 0.25s ease; }
        .card-hover:hover { transform: translateY(-4px); box-shadow: 0 20px 40px rgba(0,0,0,0.12); }
        .step-line::after {
          content: '';
          position: absolute;
          left: 19px;
          top: 40px;
          width: 2px;
          height: calc(100% - 8px);
          background: linear-gradient(to bottom, #6366f1, transparent);
        }
      `}),r.jsxs("div",{className:"min-h-screen bg-white text-gray-900 overflow-x-hidden",children:[r.jsxs("nav",{className:`fixed top-0 inset-x-0 z-50 transition-all duration-300 ${t?"bg-white/90 backdrop-blur-md shadow-sm border-b border-gray-100":"bg-transparent"}`,children:[r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-16",children:[r.jsxs(fe,{to:"/",className:"flex items-center gap-2 group",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-md group-hover:shadow-indigo-300 transition-shadow",children:r.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),r.jsx("span",{className:`font-bold text-lg ${t?"text-gray-900":"text-white"}`,children:"Household Budget"})]}),r.jsx("div",{className:"hidden md:flex items-center gap-8",children:["Features","How It Works","Pricing"].map(v=>r.jsx("a",{href:`#${v.toLowerCase().replace(/\s+/g,"-")}`,className:`text-sm font-medium transition-colors hover:text-indigo-500 ${t?"text-gray-600":"text-white/80"}`,children:v},v))}),r.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[r.jsx(fe,{to:"/login",className:`text-sm font-medium px-4 py-2 rounded-lg transition-colors ${t?"text-gray-700 hover:text-indigo-600":"text-white/90 hover:text-white"}`,children:"Sign in"}),r.jsx(fe,{to:e?"/dashboard":"/register",className:"btn-shimmer text-white text-sm font-semibold px-5 py-2 rounded-xl shadow-lg shadow-indigo-300 hover:shadow-indigo-400 transition-shadow",children:e?"Go to Dashboard ":"Get Started Free"})]}),r.jsx("button",{className:`md:hidden p-2 rounded-lg ${t?"text-gray-700":"text-white"}`,onClick:()=>s(v=>!v),children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a?r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),a&&r.jsxs("div",{className:"md:hidden bg-white border-t border-gray-100 px-4 py-4 space-y-3 shadow-lg",children:[["Features","How It Works","Pricing"].map(v=>r.jsx("a",{href:`#${v.toLowerCase().replace(/\s+/g,"-")}`,className:"block text-gray-700 font-medium py-1",onClick:()=>s(!1),children:v},v)),r.jsxs("div",{className:"pt-2 flex flex-col gap-2",children:[r.jsx(fe,{to:"/login",className:"text-center py-2 text-gray-700 border border-gray-200 rounded-xl font-medium",onClick:()=>s(!1),children:"Sign in"}),r.jsx(fe,{to:e?"/dashboard":"/register",className:"text-center py-2 btn-shimmer text-white rounded-xl font-semibold",onClick:()=>s(!1),children:e?"Dashboard ":"Get Started Free"})]})]})]}),r.jsxs("section",{className:"hero-grad relative min-h-screen flex items-center overflow-hidden pt-16",children:[r.jsx("div",{className:"absolute top-1/4 left-1/4 w-72 h-72 rounded-full bg-indigo-600/20 blur-3xl pointer-events-none",style:{animation:"orb1 8s ease-in-out infinite"}}),r.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 rounded-full bg-purple-600/15 blur-3xl pointer-events-none",style:{animation:"orb2 10s ease-in-out infinite"}}),r.jsx("div",{className:"absolute top-1/2 right-1/3 w-56 h-56 rounded-full bg-blue-500/20 blur-3xl pointer-events-none",style:{animation:"orb3 12s ease-in-out infinite"}}),r.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"radial-gradient(circle, rgba(255,255,255,0.15) 1px, transparent 1px)",backgroundSize:"28px 28px"}}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 lg:py-32 relative z-10",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/10 border border-white/20 text-white/80 text-xs font-medium mb-8 backdrop-blur-sm",style:{animation:"fadeUp 0.6s ease both"},children:[r.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-400 animate-pulse"}),"Trusted by families across the US"]}),r.jsxs("h1",{className:"text-5xl sm:text-6xl font-extrabold text-white leading-tight mb-6",style:{animation:"fadeUp 0.6s ease 100ms both"},children:["Your family's"," ",r.jsx("span",{className:"gradient-text",children:"money"}),",",r.jsx("br",{}),"finally organized."]}),r.jsx("p",{className:"text-lg text-white/65 mb-10 leading-relaxed max-w-lg",style:{animation:"fadeUp 0.6s ease 200ms both"},children:"Household Budget brings all your income, bills, goals, and bank transactions into one shared space  so your whole household is always on the same page."}),r.jsxs("div",{className:"flex flex-wrap gap-4",style:{animation:"fadeUp 0.6s ease 300ms both"},children:[r.jsx(fe,{to:e?"/dashboard":"/register",className:"btn-shimmer text-white font-semibold px-7 py-3.5 rounded-xl shadow-xl shadow-indigo-500/30 hover:shadow-indigo-500/50 transition-shadow text-sm",children:e?"Go to Dashboard ":"Start for free "}),r.jsxs("a",{href:"#how-it-works",className:"flex items-center gap-2 px-7 py-3.5 rounded-xl border border-white/20 text-white/80 hover:bg-white/10 transition-colors text-sm font-medium backdrop-blur-sm",children:["See how it works",r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),r.jsx("div",{className:"flex items-center gap-6 mt-10 pt-8 border-t border-white/10",style:{animation:"fadeUp 0.6s ease 400ms both"},children:[{val:"Free",lbl:"to get started"},{val:"256-bit",lbl:"encryption"},{val:"Plaid",lbl:"bank security"}].map(v=>r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-white font-bold text-sm",children:v.val}),r.jsx("div",{className:"text-white/50 text-xs",children:v.lbl})]},v.val))})]}),r.jsx("div",{style:{animation:"fadeUp 0.8s ease 200ms both"},children:r.jsx(vj,{})})]})}),r.jsx("div",{className:"absolute bottom-0 inset-x-0 pointer-events-none",children:r.jsx("svg",{viewBox:"0 0 1440 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",className:"w-full h-16",children:r.jsx("path",{d:"M0 80L1440 80L1440 20C1200 70 960 0 720 30C480 60 240 10 0 40L0 80Z",fill:"white"})})})]}),r.jsx("section",{ref:o,className:"bg-gradient-to-r from-indigo-600 to-purple-700 py-14",children:r.jsxs("div",{className:"max-w-5xl mx-auto px-4 grid grid-cols-2 md:grid-cols-4 gap-8",children:[r.jsx(ns,{target:12e3,suffix:"+",label:"Households enrolled",inView:i}),r.jsx(ns,{target:48,suffix:"M+",label:"Transactions tracked",inView:i}),r.jsx(ns,{target:99,suffix:"%",label:"Uptime guarantee",inView:i}),r.jsx(ns,{target:4,suffix:".9",label:"Average rating",inView:i})]})}),r.jsx("section",{id:"features",ref:l,className:"py-24 bg-gray-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-14",style:{opacity:d?1:0,transform:d?"none":"translateY(20px)",transition:"opacity 0.6s ease, transform 0.6s ease"},children:[r.jsx("span",{className:"inline-block text-xs font-semibold text-indigo-600 bg-indigo-50 px-3 py-1 rounded-full uppercase tracking-wide mb-4",children:"Features"}),r.jsx("h2",{className:"text-4xl font-extrabold text-gray-900 mb-4",children:"Everything your household needs"}),r.jsx("p",{className:"text-gray-500 max-w-xl mx-auto",children:"One app for budgeting, bill tracking, bank sync, family sharing, and financial insights."})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map((v,S)=>r.jsx(yj,{...v,delay:S*80,inView:d},v.title))})]})}),r.jsx("section",{id:"how-it-works",ref:c,className:"py-24 bg-white",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[r.jsx("div",{className:"relative order-2 lg:order-1",style:{opacity:m?1:0,transform:m?"none":"translateX(-24px)",transition:"opacity 0.7s ease, transform 0.7s ease"},children:r.jsxs("div",{className:"relative w-full aspect-square max-w-sm mx-auto",children:[r.jsx("div",{className:"absolute inset-4 bg-indigo-100 rounded-3xl transform rotate-3"}),r.jsx("div",{className:"absolute inset-2 bg-purple-100 rounded-3xl transform -rotate-2"}),r.jsx("div",{className:"relative bg-white rounded-3xl shadow-xl border border-gray-100 p-8 flex flex-col justify-center gap-6",children:[{icon:"",title:"Connect your bank",desc:"Securely link accounts with Plaid in 60 seconds",done:!0},{icon:"",title:"Set your budget",desc:"Enter income, bills, and savings targets",done:!0},{icon:"",title:"See your picture",desc:"Live dashboard shows where you stand",done:!1}].map((v,S)=>r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-lg flex-shrink-0 ${v.done?"bg-green-100":"bg-indigo-50"}`,children:v.done?"":v.icon}),r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:v.title}),r.jsx("div",{className:"text-xs text-gray-500",children:v.desc})]})]},S))})]})}),r.jsxs("div",{className:"order-1 lg:order-2",children:[r.jsx("span",{className:"inline-block text-xs font-semibold text-indigo-600 bg-indigo-50 px-3 py-1 rounded-full uppercase tracking-wide mb-4",children:"How It Works"}),r.jsx("h2",{className:"text-4xl font-extrabold text-gray-900 mb-10",children:"Up and running in minutes"}),r.jsx("div",{className:"relative space-y-8 step-line",children:[{num:"1",title:"Create your household",desc:"Sign up free, name your household, and invite your partner or family members. Everyone gets their own secure login."},{num:"2",title:"Connect your accounts",desc:"Link your bank and credit cards via Plaid. Transactions sync automatically  no CSV uploads, no manual entry."},{num:"3",title:"Set up your budget",desc:"Enter your income and fixed expenses. We calculate what's available and show you a clear monthly picture."},{num:"4",title:"Watch your goals grow",desc:"Create savings goals, log receipts, and track progress. Your AI insights get smarter the more you use it."}].map((v,S)=>r.jsx(bj,{...v,inView:m,delay:S*100},S))})]})]})})}),r.jsxs("section",{ref:h,className:"py-24 bg-gradient-to-br from-slate-900 to-indigo-950 relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px)",backgroundSize:"32px 32px"}}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[r.jsxs("div",{style:{opacity:u?1:0,transform:u?"none":"translateY(24px)",transition:"opacity 0.7s ease, transform 0.7s ease"},children:[r.jsx("span",{className:"inline-block text-xs font-semibold text-indigo-300 bg-indigo-900/60 px-3 py-1 rounded-full uppercase tracking-wide mb-4 border border-indigo-700",children:"Bank Security"}),r.jsx("h2",{className:"text-4xl font-extrabold text-white mb-6",children:"Bank-grade security, powered by Plaid"}),r.jsx("p",{className:"text-white/60 mb-8 leading-relaxed",children:"We never store your banking credentials. Plaid connects directly to your bank using the same security standards used by the largest financial institutions in the world."}),r.jsx("div",{className:"space-y-4",children:["256-bit AES encryption in transit and at rest","Passkey & two-factor authentication required for bank linking","Read-only access  we can never move your money","Revoke bank access at any time from your profile"].map(v=>r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-5 h-5 rounded-full bg-green-500/20 border border-green-500/40 flex items-center justify-center flex-shrink-0 mt-0.5",children:r.jsx("svg",{className:"w-3 h-3 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),r.jsx("span",{className:"text-white/75 text-sm",children:v})]},v))})]}),r.jsx("div",{className:"flex justify-center",style:{opacity:u?1:0,transform:u?"none":"translateX(24px)",transition:"opacity 0.7s ease 150ms, transform 0.7s ease 150ms"},children:r.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-8 backdrop-blur-sm max-w-sm w-full",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"w-16 h-16 rounded-2xl bg-indigo-500/20 border border-indigo-500/30 flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),r.jsx("div",{className:"text-white font-semibold",children:"Secure Connection"}),r.jsx("div",{className:"text-white/50 text-xs mt-1",children:"Your bank credentials never touch our servers"})]}),r.jsx("div",{className:"space-y-3",children:["Chase Bank","Bank of America","Wells Fargo","Citibank","+ 12,000 more institutions"].map((v,S)=>r.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-white/5 rounded-xl border border-white/10",children:[r.jsx("span",{className:"text-white/70 text-sm",children:v}),S<4&&r.jsx("span",{className:"text-green-400 text-xs",children:"Connected "})]},v))})]})})]})})]}),r.jsx("section",{ref:w,className:"py-24 bg-white",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsx("div",{className:"bg-gradient-to-br from-violet-50 to-indigo-50 rounded-3xl p-10 lg:p-14 border border-indigo-100",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[r.jsxs("div",{style:{opacity:p?1:0,transform:p?"none":"translateY(24px)",transition:"opacity 0.7s ease, transform 0.7s ease"},children:[r.jsx("span",{className:"inline-block text-xs font-semibold text-purple-600 bg-purple-100 px-3 py-1 rounded-full uppercase tracking-wide mb-4",children:"AI Powered"}),r.jsx("h2",{className:"text-4xl font-extrabold text-gray-900 mb-4",children:"Insights that actually help"}),r.jsx("p",{className:"text-gray-500 leading-relaxed mb-6",children:"Our AI analyses your spending patterns and delivers plain-English recommendations  not generic tips. Understand overspend categories, predict month-end balance, and find subscriptions you forgot about."}),r.jsxs(fe,{to:e?"/insights":"/register",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-violet-600 to-indigo-600 text-white rounded-xl font-semibold text-sm shadow-lg shadow-violet-200 hover:shadow-xl hover:shadow-violet-300 transition-shadow",children:["Try insights free",r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]}),r.jsx("div",{className:"space-y-3",style:{opacity:p?1:0,transform:p?"none":"translateX(24px)",transition:"opacity 0.7s ease 150ms, transform 0.7s ease 150ms"},children:[{icon:"",title:"You overspent on dining by 34% this month",desc:"Based on your 3-month average of $340/mo, you're trending $116 over.",color:"border-l-amber-400 bg-amber-50"},{icon:"",title:"3 recurring charges you might not need",desc:"Hulu, Adobe CC, and a gym you haven't visited since January.",color:"border-l-blue-400 bg-blue-50"},{icon:"",title:"On track to hit Emergency Fund goal",desc:"You'll reach your $5,000 goal in approximately 2.4 months.",color:"border-l-green-400 bg-green-50"}].map(v=>r.jsx("div",{className:`rounded-xl p-4 border-l-4 ${v.color}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"text-xl flex-shrink-0",children:v.icon}),r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-gray-900 text-sm mb-0.5",children:v.title}),r.jsx("div",{className:"text-xs text-gray-500",children:v.desc})]})]})},v.title))})]})})})}),r.jsx("section",{id:"pricing",ref:f,className:"py-24 bg-gray-50",children:r.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-14",style:{opacity:k?1:0,transform:k?"none":"translateY(20px)",transition:"opacity 0.6s ease, transform 0.6s ease"},children:[r.jsx("span",{className:"inline-block text-xs font-semibold text-indigo-600 bg-indigo-50 px-3 py-1 rounded-full uppercase tracking-wide mb-4",children:"Pricing"}),r.jsx("h2",{className:"text-4xl font-extrabold text-gray-900 mb-4",children:"Simple, honest pricing"}),r.jsx("p",{className:"text-gray-500",children:"Start free. Upgrade when you're ready for the full picture."})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"bg-white rounded-2xl p-8 border border-gray-200 shadow-sm card-hover",style:{opacity:k?1:0,transform:k?"none":"translateY(24px)",transition:"opacity 0.6s ease 100ms, transform 0.6s ease 100ms"},children:[r.jsx("div",{className:"text-indigo-600 font-semibold text-sm mb-2",children:"Free"}),r.jsx("div",{className:"text-5xl font-extrabold text-gray-900 mb-1",children:"$0"}),r.jsx("div",{className:"text-gray-400 text-sm mb-8",children:"Forever"}),r.jsx("ul",{className:"space-y-3 mb-8",children:["Income & expense tracking","Fixed expenses & bill calendar","Up to 3 savings goals","1 household member","30-day transaction history","Basic monthly overview"].map(v=>r.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-600",children:[r.jsx("svg",{className:"w-4 h-4 text-green-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})}),v]},v))}),r.jsx(fe,{to:"/register",className:"w-full block text-center py-3 rounded-xl border-2 border-indigo-200 text-indigo-600 font-semibold hover:bg-indigo-50 transition-colors text-sm",children:"Start for free"})]}),r.jsxs("div",{className:"relative bg-gradient-to-br from-indigo-600 to-purple-700 rounded-2xl p-8 shadow-xl shadow-indigo-200 card-hover",style:{opacity:k?1:0,transform:k?"none":"translateY(24px)",transition:"opacity 0.6s ease 200ms, transform 0.6s ease 200ms"},children:[r.jsx("div",{className:"absolute top-6 right-6 bg-amber-400 text-amber-900 text-xs font-bold px-3 py-1 rounded-full",children:"Most Popular"}),r.jsx("div",{className:"text-indigo-200 font-semibold text-sm mb-2",children:"Pro"}),r.jsxs("div",{className:"text-5xl font-extrabold text-white mb-1",children:["$7",r.jsx("span",{className:"text-2xl font-medium text-indigo-200",children:".99"})]}),r.jsx("div",{className:"text-indigo-200 text-sm mb-8",children:"per month, per household"}),r.jsx("ul",{className:"space-y-3 mb-8",children:["Everything in Free","Plaid bank & credit card sync","Unlimited savings goals","Unlimited household members","Full transaction history","AI financial insights","Receipt OCR scanning","Income split management","Priority support"].map(v=>r.jsxs("li",{className:"flex items-center gap-3 text-sm text-indigo-100",children:[r.jsx("svg",{className:"w-4 h-4 text-green-300 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})}),v]},v))}),r.jsx(fe,{to:"/register",className:"w-full block text-center py-3 rounded-xl bg-white text-indigo-700 font-bold hover:bg-indigo-50 transition-colors text-sm shadow-md",children:"Get started free "})]})]})]})}),r.jsx("section",{ref:x,className:"py-24 bg-white",children:r.jsx("div",{className:"max-w-4xl mx-auto px-4 text-center",children:r.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 via-purple-600 to-blue-700 rounded-3xl px-8 py-16 shadow-2xl shadow-indigo-200 relative overflow-hidden",style:{opacity:b?1:0,transform:b?"none":"translateY(24px)",transition:"opacity 0.7s ease, transform 0.7s ease"},children:[r.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle, rgba(255,255,255,0.2) 1px, transparent 1px)",backgroundSize:"24px 24px"}}),r.jsxs("div",{className:"relative z-10",children:[r.jsx("h2",{className:"text-4xl font-extrabold text-white mb-4",children:"Ready to take control?"}),r.jsx("p",{className:"text-indigo-200 mb-10 max-w-lg mx-auto",children:"Join thousands of households who already know exactly where their money goes every month."}),r.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[r.jsx(fe,{to:e?"/dashboard":"/register",className:"px-8 py-4 bg-white text-indigo-700 font-bold rounded-xl shadow-xl hover:shadow-2xl hover:bg-indigo-50 transition-all text-sm",children:e?"Open Dashboard ":"Create free account "}),r.jsx(fe,{to:"/login",className:"px-8 py-4 border-2 border-white/30 text-white font-semibold rounded-xl hover:bg-white/10 transition-colors text-sm backdrop-blur-sm",children:"Sign in"})]})]})]})})}),r.jsx("footer",{className:"bg-gray-900 text-white py-16",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-10 mb-12",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-md",children:r.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),r.jsx("span",{className:"font-bold text-lg",children:"Household Budget"})]}),r.jsx("p",{className:"text-gray-400 text-sm leading-relaxed max-w-xs",children:"The all-in-one budget app built for real households. Track, plan, and grow together."}),r.jsxs("p",{className:"text-gray-500 text-xs mt-4",children:[" ",new Date().getFullYear()," ACED Division LLC. All rights reserved."]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-sm mb-4",children:"Product"}),r.jsx("ul",{className:"space-y-2",children:["Features","Pricing","How It Works","Security"].map(v=>r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-gray-400 text-sm hover:text-white transition-colors",children:v})},v))})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-sm mb-4",children:"Legal"}),r.jsxs("ul",{className:"space-y-2",children:[r.jsx("li",{children:r.jsx(fe,{to:"/privacy-policy",className:"text-gray-400 text-sm hover:text-white transition-colors",children:"Privacy Policy"})}),r.jsx("li",{children:r.jsx(fe,{to:"/terms",className:"text-gray-400 text-sm hover:text-white transition-colors",children:"Terms of Service"})}),r.jsx("li",{children:r.jsx(fe,{to:"/login",className:"text-gray-400 text-sm hover:text-white transition-colors",children:"Sign In"})}),r.jsx("li",{children:r.jsx(fe,{to:"/register",className:"text-gray-400 text-sm hover:text-white transition-colors",children:"Create Account"})})]})]})]}),r.jsxs("div",{className:"border-t border-gray-800 pt-8 flex flex-col sm:flex-row items-center justify-between gap-4",children:[r.jsx("p",{className:"text-gray-500 text-xs",children:"Built with  for households that want to do better."}),r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-xs",children:[r.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-400 animate-pulse"}),"All systems operational"]})]}),r.jsx("div",{className:"mt-6 pt-4 border-t border-gray-800/60 text-center",children:r.jsxs("p",{className:"text-gray-600 text-xs tracking-wide",children:[r.jsx("span",{className:"font-semibold text-gray-500",children:"HouseholdBudget"})," ","by"," ",r.jsx("span",{className:"text-indigo-400 font-medium",children:"ACED Devops"}),"  ",r.jsx("a",{href:"https://aceddivision.com/householdbudget",className:"text-gray-600 hover:text-gray-400 transition-colors",children:"aceddivision.com/householdbudget"})]})})]})})]})]})}var wh={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){((n,a)=>{e.exports=a()})(Eh,function n(){var a=typeof self<"u"?self:typeof window<"u"?window:a!==void 0?a:{},s,o=!a.document&&!!a.postMessage,i=a.IS_PAPA_WORKER||!1,l={},d=0,c={};function m(j){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(N){var E=S(N);E.chunkSize=parseInt(E.chunkSize),N.step||N.chunk||(E.chunkSize=null),this._handle=new f(E),(this._handle.streamer=this)._config=E}).call(this,j),this.parseChunk=function(N,E){var L=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<L){let M=this._config.newline;M||(D=this._config.quoteChar||'"',M=this._handle.guessLineEndings(N,D)),N=[...N.split(M).slice(L)].join(M)}this.isFirstChunk&&P(this._config.beforeFirstChunk)&&(D=this._config.beforeFirstChunk(N))!==void 0&&(N=D),this.isFirstChunk=!1,this._halted=!1;var L=this._partialLine+N,D=(this._partialLine="",this._handle.parse(L,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(N=D.meta.cursor,L=(this._finished||(this._partialLine=L.substring(N-this._baseIndex),this._baseIndex=N),D&&D.data&&(this._rowCount+=D.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),i)a.postMessage({results:D,workerId:c.WORKER_ID,finished:L});else if(P(this._config.chunk)&&!E){if(this._config.chunk(D,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=D=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(D.data),this._completeResults.errors=this._completeResults.errors.concat(D.errors),this._completeResults.meta=D.meta),this._completed||!L||!P(this._config.complete)||D&&D.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),L||D&&D.meta.paused||this._nextChunk(),D}this._halted=!0},this._sendError=function(N){P(this._config.error)?this._config.error(N):i&&this._config.error&&a.postMessage({workerId:c.WORKER_ID,error:N,finished:!1})}}function h(j){var N;(j=j||{}).chunkSize||(j.chunkSize=c.RemoteChunkSize),m.call(this,j),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(E){this._input=E,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(N=new XMLHttpRequest,this._config.withCredentials&&(N.withCredentials=this._config.withCredentials),o||(N.onload=C(this._chunkLoaded,this),N.onerror=C(this._chunkError,this)),N.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var E,L=this._config.downloadRequestHeaders;for(E in L)N.setRequestHeader(E,L[E])}var D;this._config.chunkSize&&(D=this._start+this._config.chunkSize-1,N.setRequestHeader("Range","bytes="+this._start+"-"+D));try{N.send(this._config.downloadRequestBody)}catch(M){this._chunkError(M.message)}o&&N.status===0&&this._chunkError()}},this._chunkLoaded=function(){N.readyState===4&&(N.status<200||400<=N.status?this._chunkError():(this._start+=this._config.chunkSize||N.responseText.length,this._finished=!this._config.chunkSize||this._start>=(E=>(E=E.getResponseHeader("Content-Range"))!==null?parseInt(E.substring(E.lastIndexOf("/")+1)):-1)(N),this.parseChunk(N.responseText)))},this._chunkError=function(E){E=N.statusText||E,this._sendError(new Error(E))}}function u(j){(j=j||{}).chunkSize||(j.chunkSize=c.LocalChunkSize),m.call(this,j);var N,E,L=typeof FileReader<"u";this.stream=function(D){this._input=D,E=D.slice||D.webkitSlice||D.mozSlice,L?((N=new FileReader).onload=C(this._chunkLoaded,this),N.onerror=C(this._chunkError,this)):N=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var D=this._input,M=(this._config.chunkSize&&(M=Math.min(this._start+this._config.chunkSize,this._input.size),D=E.call(D,this._start,M)),N.readAsText(D,this._config.encoding));L||this._chunkLoaded({target:{result:M}})},this._chunkLoaded=function(D){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(D.target.result)},this._chunkError=function(){this._sendError(N.error)}}function w(j){var N;m.call(this,j=j||{}),this.stream=function(E){return N=E,this._nextChunk()},this._nextChunk=function(){var E,L;if(!this._finished)return E=this._config.chunkSize,N=E?(L=N.substring(0,E),N.substring(E)):(L=N,""),this._finished=!N,this.parseChunk(L)}}function p(j){m.call(this,j=j||{});var N=[],E=!0,L=!1;this.pause=function(){m.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){m.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(D){this._input=D,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){L&&N.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),N.length?this.parseChunk(N.shift()):E=!0},this._streamData=C(function(D){try{N.push(typeof D=="string"?D:D.toString(this._config.encoding)),E&&(E=!1,this._checkIsFinished(),this.parseChunk(N.shift()))}catch(M){this._streamError(M)}},this),this._streamError=C(function(D){this._streamCleanUp(),this._sendError(D)},this),this._streamEnd=C(function(){this._streamCleanUp(),L=!0,this._streamData("")},this),this._streamCleanUp=C(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function f(j){var N,E,L,D,M=Math.pow(2,53),K=-M,ae=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Z=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,_=this,T=0,F=0,B=!1,U=!1,q=[],R={data:[],errors:[],meta:{}};function H(G){return j.skipEmptyLines==="greedy"?G.join("").trim()==="":G.length===1&&G[0].length===0}function W(){if(R&&L&&(ge("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),L=!1),j.skipEmptyLines&&(R.data=R.data.filter(function(ke){return!H(ke)})),ee()){let ke=function(V,ce){P(j.transformHeader)&&(V=j.transformHeader(V,ce)),q.push(V)};var de=ke;if(R)if(Array.isArray(R.data[0])){for(var G=0;ee()&&G<R.data.length;G++)R.data[G].forEach(ke);R.data.splice(0,1)}else R.data.forEach(ke)}function ne(ke,V){for(var ce=j.header?{}:[],re=0;re<ke.length;re++){var le=re,we=ke[re],we=((I,$)=>(Y=>(j.dynamicTypingFunction&&j.dynamicTyping[Y]===void 0&&(j.dynamicTyping[Y]=j.dynamicTypingFunction(Y)),(j.dynamicTyping[Y]||j.dynamicTyping)===!0))(I)?$==="true"||$==="TRUE"||$!=="false"&&$!=="FALSE"&&((Y=>{if(ae.test(Y)&&(Y=parseFloat(Y),K<Y&&Y<M))return 1})($)?parseFloat($):Z.test($)?new Date($):$===""?null:$):$)(le=j.header?re>=q.length?"__parsed_extra":q[re]:le,we=j.transform?j.transform(we,le):we);le==="__parsed_extra"?(ce[le]=ce[le]||[],ce[le].push(we)):ce[le]=we}return j.header&&(re>q.length?ge("FieldMismatch","TooManyFields","Too many fields: expected "+q.length+" fields but parsed "+re,F+V):re<q.length&&ge("FieldMismatch","TooFewFields","Too few fields: expected "+q.length+" fields but parsed "+re,F+V)),ce}var ve;R&&(j.header||j.dynamicTyping||j.transform)&&(ve=1,!R.data.length||Array.isArray(R.data[0])?(R.data=R.data.map(ne),ve=R.data.length):R.data=ne(R.data,0),j.header&&R.meta&&(R.meta.fields=q),F+=ve)}function ee(){return j.header&&q.length===0}function ge(G,ne,ve,de){G={type:G,code:ne,message:ve},de!==void 0&&(G.row=de),R.errors.push(G)}P(j.step)&&(D=j.step,j.step=function(G){R=G,ee()?W():(W(),R.data.length!==0&&(T+=G.data.length,j.preview&&T>j.preview?E.abort():(R.data=R.data[0],D(R,_))))}),this.parse=function(G,ne,ve){var de=j.quoteChar||'"',de=(j.newline||(j.newline=this.guessLineEndings(G,de)),L=!1,j.delimiter?P(j.delimiter)&&(j.delimiter=j.delimiter(G),R.meta.delimiter=j.delimiter):((de=((ke,V,ce,re,le)=>{var we,I,$,Y;le=le||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var se=0;se<le.length;se++){for(var Ne,me=le[se],xe=0,pe=0,oe=0,be=($=void 0,new x({comments:re,delimiter:me,newline:V,preview:10}).parse(ke)),Ee=0;Ee<be.data.length;Ee++)ce&&H(be.data[Ee])?oe++:(Ne=be.data[Ee].length,pe+=Ne,$===void 0?$=Ne:0<Ne&&(xe+=Math.abs(Ne-$),$=Ne));0<be.data.length&&(pe/=be.data.length-oe),(I===void 0||xe<=I)&&(Y===void 0||Y<pe)&&1.99<pe&&(I=xe,we=me,Y=pe)}return{successful:!!(j.delimiter=we),bestDelimiter:we}})(G,j.newline,j.skipEmptyLines,j.comments,j.delimitersToGuess)).successful?j.delimiter=de.bestDelimiter:(L=!0,j.delimiter=c.DefaultDelimiter),R.meta.delimiter=j.delimiter),S(j));return j.preview&&j.header&&de.preview++,N=G,E=new x(de),R=E.parse(N,ne,ve),W(),B?{meta:{paused:!0}}:R||{meta:{paused:!1}}},this.paused=function(){return B},this.pause=function(){B=!0,E.abort(),N=P(j.chunk)?"":N.substring(E.getCharIndex())},this.resume=function(){_.streamer._halted?(B=!1,_.streamer.parseChunk(N,!0)):setTimeout(_.resume,3)},this.aborted=function(){return U},this.abort=function(){U=!0,E.abort(),R.meta.aborted=!0,P(j.complete)&&j.complete(R),N=""},this.guessLineEndings=function(ke,de){ke=ke.substring(0,1048576);var de=new RegExp(k(de)+"([^]*?)"+k(de),"gm"),ve=(ke=ke.replace(de,"")).split("\r"),de=ke.split(`
`),ke=1<de.length&&de[0].length<ve[0].length;if(ve.length===1||ke)return`
`;for(var V=0,ce=0;ce<ve.length;ce++)ve[ce][0]===`
`&&V++;return V>=ve.length/2?`\r
`:"\r"}}function k(j){return j.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function x(j){var N=(j=j||{}).delimiter,E=j.newline,L=j.comments,D=j.step,M=j.preview,K=j.fastMode,ae=null,Z=!1,_=j.quoteChar==null?'"':j.quoteChar,T=_;if(j.escapeChar!==void 0&&(T=j.escapeChar),(typeof N!="string"||-1<c.BAD_DELIMITERS.indexOf(N))&&(N=","),L===N)throw new Error("Comment character same as delimiter");L===!0?L="#":(typeof L!="string"||-1<c.BAD_DELIMITERS.indexOf(L))&&(L=!1),E!==`
`&&E!=="\r"&&E!==`\r
`&&(E=`
`);var F=0,B=!1;this.parse=function(U,q,R){if(typeof U!="string")throw new Error("Input must be a string");var H=U.length,W=N.length,ee=E.length,ge=L.length,G=P(D),ne=[],ve=[],de=[],ke=F=0;if(!U)return xe();if(K||K!==!1&&U.indexOf(_)===-1){for(var V=U.split(E),ce=0;ce<V.length;ce++){if(de=V[ce],F+=de.length,ce!==V.length-1)F+=E.length;else if(R)return xe();if(!L||de.substring(0,ge)!==L){if(G){if(ne=[],Y(de.split(N)),pe(),B)return xe()}else Y(de.split(N));if(M&&M<=ce)return ne=ne.slice(0,M),xe(!0)}}return xe()}for(var re=U.indexOf(N,F),le=U.indexOf(E,F),we=new RegExp(k(T)+k(_),"g"),I=U.indexOf(_,F);;)if(U[F]===_)for(I=F,F++;;){if((I=U.indexOf(_,I+1))===-1)return R||ve.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ne.length,index:F}),Ne();if(I===H-1)return Ne(U.substring(F,I).replace(we,_));if(_===T&&U[I+1]===T)I++;else if(_===T||I===0||U[I-1]!==T){re!==-1&&re<I+1&&(re=U.indexOf(N,I+1));var $=se((le=le!==-1&&le<I+1?U.indexOf(E,I+1):le)===-1?re:Math.min(re,le));if(U.substr(I+1+$,W)===N){de.push(U.substring(F,I).replace(we,_)),U[F=I+1+$+W]!==_&&(I=U.indexOf(_,F)),re=U.indexOf(N,F),le=U.indexOf(E,F);break}if($=se(le),U.substring(I+1+$,I+1+$+ee)===E){if(de.push(U.substring(F,I).replace(we,_)),me(I+1+$+ee),re=U.indexOf(N,F),I=U.indexOf(_,F),G&&(pe(),B))return xe();if(M&&ne.length>=M)return xe(!0);break}ve.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ne.length,index:F}),I++}}else if(L&&de.length===0&&U.substring(F,F+ge)===L){if(le===-1)return xe();F=le+ee,le=U.indexOf(E,F),re=U.indexOf(N,F)}else if(re!==-1&&(re<le||le===-1))de.push(U.substring(F,re)),F=re+W,re=U.indexOf(N,F);else{if(le===-1)break;if(de.push(U.substring(F,le)),me(le+ee),G&&(pe(),B))return xe();if(M&&ne.length>=M)return xe(!0)}return Ne();function Y(oe){ne.push(oe),ke=F}function se(oe){var be=0;return be=oe!==-1&&(oe=U.substring(I+1,oe))&&oe.trim()===""?oe.length:be}function Ne(oe){return R||(oe===void 0&&(oe=U.substring(F)),de.push(oe),F=H,Y(de),G&&pe()),xe()}function me(oe){F=oe,Y(de),de=[],le=U.indexOf(E,F)}function xe(oe){if(j.header&&!q&&ne.length&&!Z){var be=ne[0],Ee=Object.create(null),Ie=new Set(be);let Q=!1;for(let J=0;J<be.length;J++){let he=be[J];if(Ee[he=P(j.transformHeader)?j.transformHeader(he,J):he]){let Ae,Oe=Ee[he];for(;Ae=he+"_"+Oe,Oe++,Ie.has(Ae););Ie.add(Ae),be[J]=Ae,Ee[he]++,Q=!0,(ae=ae===null?{}:ae)[Ae]=he}else Ee[he]=1,be[J]=he;Ie.add(he)}Q&&console.warn("Duplicate headers found and renamed."),Z=!0}return{data:ne,errors:ve,meta:{delimiter:N,linebreak:E,aborted:B,truncated:!!oe,cursor:ke+(q||0),renamedHeaders:ae}}}function pe(){D(xe()),ne=[],ve=[]}},this.abort=function(){B=!0},this.getCharIndex=function(){return F}}function b(j){var N=j.data,E=l[N.workerId],L=!1;if(N.error)E.userError(N.error,N.file);else if(N.results&&N.results.data){var D={abort:function(){L=!0,y(N.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:v,resume:v};if(P(E.userStep)){for(var M=0;M<N.results.data.length&&(E.userStep({data:N.results.data[M],errors:N.results.errors,meta:N.results.meta},D),!L);M++);delete N.results}else P(E.userChunk)&&(E.userChunk(N.results,D,N.file),delete N.results)}N.finished&&!L&&y(N.workerId,N.results)}function y(j,N){var E=l[j];P(E.userComplete)&&E.userComplete(N),E.terminate(),delete l[j]}function v(){throw new Error("Not implemented.")}function S(j){if(typeof j!="object"||j===null)return j;var N,E=Array.isArray(j)?[]:{};for(N in j)E[N]=S(j[N]);return E}function C(j,N){return function(){j.apply(N,arguments)}}function P(j){return typeof j=="function"}return c.parse=function(j,N){var E=(N=N||{}).dynamicTyping||!1;if(P(E)&&(N.dynamicTypingFunction=E,E={}),N.dynamicTyping=E,N.transform=!!P(N.transform)&&N.transform,!N.worker||!c.WORKERS_SUPPORTED)return E=null,c.NODE_STREAM_INPUT,typeof j=="string"?(j=(L=>L.charCodeAt(0)!==65279?L:L.slice(1))(j),E=new(N.download?h:w)(N)):j.readable===!0&&P(j.read)&&P(j.on)?E=new p(N):(a.File&&j instanceof File||j instanceof Object)&&(E=new u(N)),E.stream(j);(E=(()=>{var L;return!!c.WORKERS_SUPPORTED&&(L=(()=>{var D=a.URL||a.webkitURL||null,M=n.toString();return c.BLOB_URL||(c.BLOB_URL=D.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",M,")();"],{type:"text/javascript"})))})(),(L=new a.Worker(L)).onmessage=b,L.id=d++,l[L.id]=L)})()).userStep=N.step,E.userChunk=N.chunk,E.userComplete=N.complete,E.userError=N.error,N.step=P(N.step),N.chunk=P(N.chunk),N.complete=P(N.complete),N.error=P(N.error),delete N.worker,E.postMessage({input:j,config:N,workerId:E.id})},c.unparse=function(j,N){var E=!1,L=!0,D=",",M=`\r
`,K='"',ae=K+K,Z=!1,_=null,T=!1,F=((()=>{if(typeof N=="object"){if(typeof N.delimiter!="string"||c.BAD_DELIMITERS.filter(function(q){return N.delimiter.indexOf(q)!==-1}).length||(D=N.delimiter),typeof N.quotes!="boolean"&&typeof N.quotes!="function"&&!Array.isArray(N.quotes)||(E=N.quotes),typeof N.skipEmptyLines!="boolean"&&typeof N.skipEmptyLines!="string"||(Z=N.skipEmptyLines),typeof N.newline=="string"&&(M=N.newline),typeof N.quoteChar=="string"&&(K=N.quoteChar),typeof N.header=="boolean"&&(L=N.header),Array.isArray(N.columns)){if(N.columns.length===0)throw new Error("Option columns is empty");_=N.columns}N.escapeChar!==void 0&&(ae=N.escapeChar+K),N.escapeFormulae instanceof RegExp?T=N.escapeFormulae:typeof N.escapeFormulae=="boolean"&&N.escapeFormulae&&(T=/^[=+\-@\t\r].*$/)}})(),new RegExp(k(K),"g"));if(typeof j=="string"&&(j=JSON.parse(j)),Array.isArray(j)){if(!j.length||Array.isArray(j[0]))return B(null,j,Z);if(typeof j[0]=="object")return B(_||Object.keys(j[0]),j,Z)}else if(typeof j=="object")return typeof j.data=="string"&&(j.data=JSON.parse(j.data)),Array.isArray(j.data)&&(j.fields||(j.fields=j.meta&&j.meta.fields||_),j.fields||(j.fields=Array.isArray(j.data[0])?j.fields:typeof j.data[0]=="object"?Object.keys(j.data[0]):[]),Array.isArray(j.data[0])||typeof j.data[0]=="object"||(j.data=[j.data])),B(j.fields||[],j.data||[],Z);throw new Error("Unable to serialize unrecognized input");function B(q,R,H){var W="",ee=(typeof q=="string"&&(q=JSON.parse(q)),typeof R=="string"&&(R=JSON.parse(R)),Array.isArray(q)&&0<q.length),ge=!Array.isArray(R[0]);if(ee&&L){for(var G=0;G<q.length;G++)0<G&&(W+=D),W+=U(q[G],G);0<R.length&&(W+=M)}for(var ne=0;ne<R.length;ne++){var ve=(ee?q:R[ne]).length,de=!1,ke=ee?Object.keys(R[ne]).length===0:R[ne].length===0;if(H&&!ee&&(de=H==="greedy"?R[ne].join("").trim()==="":R[ne].length===1&&R[ne][0].length===0),H==="greedy"&&ee){for(var V=[],ce=0;ce<ve;ce++){var re=ge?q[ce]:ce;V.push(R[ne][re])}de=V.join("").trim()===""}if(!de){for(var le=0;le<ve;le++){0<le&&!ke&&(W+=D);var we=ee&&ge?q[le]:le;W+=U(R[ne][we],le)}ne<R.length-1&&(!H||0<ve&&!ke)&&(W+=M)}}return W}function U(q,R){var H,W;return q==null?"":q.constructor===Date?JSON.stringify(q).slice(1,25):(W=!1,T&&typeof q=="string"&&T.test(q)&&(q="'"+q,W=!0),H=q.toString().replace(F,ae),(W=W||E===!0||typeof E=="function"&&E(q,R)||Array.isArray(E)&&E[R]||((ee,ge)=>{for(var G=0;G<ge.length;G++)if(-1<ee.indexOf(ge[G]))return!0;return!1})(H,c.BAD_DELIMITERS)||-1<H.indexOf(D)||H.charAt(0)===" "||H.charAt(H.length-1)===" ")?K+H+K:H)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!o&&!!a.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=x,c.ParserHandle=f,c.NetworkStreamer=h,c.FileStreamer=u,c.StringStreamer=w,c.ReadableStreamStreamer=p,a.jQuery&&((s=a.jQuery).fn.parse=function(j){var N=j.config||{},E=[];return this.each(function(M){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&a.FileReader)||!this.files||this.files.length===0)return!0;for(var K=0;K<this.files.length;K++)E.push({file:this.files[K],inputElem:this,instanceConfig:s.extend({},N)})}),L(),this;function L(){if(E.length===0)P(j.complete)&&j.complete();else{var M,K,ae,Z,_=E[0];if(P(j.before)){var T=j.before(_.file,_.inputElem);if(typeof T=="object"){if(T.action==="abort")return M="AbortError",K=_.file,ae=_.inputElem,Z=T.reason,void(P(j.error)&&j.error({name:M},K,ae,Z));if(T.action==="skip")return void D();typeof T.config=="object"&&(_.instanceConfig=s.extend(_.instanceConfig,T.config))}else if(T==="skip")return void D()}var F=_.instanceConfig.complete;_.instanceConfig.complete=function(B){P(F)&&F(B,_.file,_.inputElem),D()},c.parse(_.file,_.instanceConfig)}}function D(){E.splice(0,1),L()}}),i&&(a.onmessage=function(j){j=j.data,c.WORKER_ID===void 0&&j&&(c.WORKER_ID=j.workerId),typeof j.input=="string"?a.postMessage({workerId:c.WORKER_ID,results:c.parse(j.input,j.config),finished:!0}):(a.File&&j.input instanceof File||j.input instanceof Object)&&(j=c.parse(j.input,j.config))&&a.postMessage({workerId:c.WORKER_ID,results:j,finished:!0})}),(h.prototype=Object.create(m.prototype)).constructor=h,(u.prototype=Object.create(m.prototype)).constructor=u,(w.prototype=Object.create(w.prototype)).constructor=w,(p.prototype=Object.create(m.prototype)).constructor=p,c})})(wh);var kj=wh.exports;const wj=mu(kj),Pe=e=>`$${(Number(e)||0).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")}`,qn=e=>{if(!e)return"";const[t,n]=e.split("-");return new Date(Number(t),Number(n)-1,1).toLocaleDateString(void 0,{year:"numeric",month:"long"})},Nj=()=>{const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`};function cu(e){const t=(e||"").toLowerCase();return/grocery|grocer|supermarket|whole foods|walmart|target|kroger|publix|aldi|trader joe|food lion/i.test(t)?"Groceries":/restaurant|cafe|coffee|starbucks|mcdonald|burger|pizza|taco|subway|diner|doordash|grubhub|uber eats/i.test(t)?"Dining":/shell|bp |exxon|chevron|gas station|fuel/i.test(t)?"Gas":/pharmacy|cvs|walgreen|rite aid|hospital|medical|dental/i.test(t)?"Medical":/amazon|ebay|best buy|costco|shop|retail|clothing/i.test(t)?"Shopping":/uber|lyft|transit|bus|taxi|parking|toll/i.test(t)?"Transportation":/netflix|spotify|hulu|disney|subscription|streaming/i.test(t)?"Subscriptions":/electric|water|gas bill|utility|internet|cable|at&t|verizon|comcast/i.test(t)?"Utilities":/mortgage|rent|hoa|lease/i.test(t)?"Housing":/payroll|direct deposit|salary|ach credit/i.test(t)?"Income":"Other"}const Sj=["Groceries","Dining","Gas","Medical","Shopping","Transportation","Subscriptions","Utilities","Housing","Transfer","Income","Other"];function Cj(){const e=[],t=new Date;for(let n=0;n<24;n++){const a=new Date(t.getFullYear(),t.getMonth()-n,1),s=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`;e.push(s)}return e}function tn({title:e,subtitle:t}){return r.jsxs("div",{className:"flex items-baseline justify-between mb-3 print:mb-2",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 print:text-black",children:e}),t&&r.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 print:text-gray-500",children:t})]})}function rn({children:e,className:t=""}){return r.jsx("div",{className:`bg-white dark:bg-gray-800 rounded-xl border border-gray-100 dark:border-gray-700 p-5 print:rounded-none print:border-gray-200 print:bg-white print:p-0 print:border-0 print:border-b print:pb-4 print:mb-4 ${t}`,children:e})}function Ej({paid:e}){return e?r.jsx("span",{className:"inline-flex items-center gap-1 text-xs font-medium text-green-700 bg-green-50 px-2 py-0.5 rounded-full print:bg-transparent print:text-green-700",children:" Paid"}):r.jsx("span",{className:"inline-flex items-center gap-1 text-xs font-medium text-red-700 bg-red-50 px-2 py-0.5 rounded-full print:bg-transparent print:text-red-700",children:" Unpaid"})}function Pj(){const{user:e}=_e(),[t]=mo();lt();const[n,a]=g.useState(t.get("month")||Nj()),[s,o]=g.useState(!0),[i,l]=g.useState(null),[d,c]=g.useState([]),[m,h]=g.useState([]),[u,w]=g.useState([]),[p,f]=g.useState([]),[k,x]=g.useState([]),[b,y]=g.useState([]),[v,S]=g.useState(null),[C,P]=g.useState([]),[j,N]=g.useState([]),[E,L]=g.useState(!1),[D,M]=g.useState(!1),[K,ae]=g.useState(!1),Z=g.useRef(null),_=g.useCallback(async()=>{if(e!=null&&e.householdId){o(!0),l(null);try{const I=e.householdId,[$,Y,se,Ne,me,xe,pe]=await Promise.all([O.get(`/income/${I}`).catch(()=>({data:{incomes:[]}})),O.get(`/expenses/${I}`).catch(()=>({data:{expenses:[]}})),O.get(`/fixed-expenses/${I}`).catch(()=>({data:{expenses:[]}})),O.get(`/fixed-expense-payments/${I}?month=${n}`).catch(()=>({data:{payments:[]}})),O.get(`/goals/${I}`).catch(()=>({data:{goals:[]}})),O.get(`/income-splits/${I}`).catch(()=>({data:{splits:[]}})),O.get(`/households/${I}/summary`).catch(()=>({data:{}}))]),oe=$.data.incomes||[],be=Y.data.expenses||[],Ee=se.data.expenses||[],Ie=Ne.data.payments||[],Q=me.data.goals||[],J=xe.data.splits||[];c(oe.filter(he=>he.month===n)),f(be.filter(he=>(he.month||(he.date||"").substring(0,7))===n)),h(Ee),w(Ie.filter(he=>(he.month||(he.paymentDate||"").substring(0,7))===n)),x(Q),y(J),S(pe.data)}catch(I){console.error("[FinanceMeeting] fetch error:",I),l("Failed to load report data. Please try again.")}finally{o(!1)}}},[e==null?void 0:e.householdId,n]);g.useEffect(()=>{_()},[_]);const T=d.reduce((I,$)=>I+(Number($.weeklyTotal)||Number($.amount)||0),0),F=m.map(I=>{var $;return{...I,paid:u.some(Y=>String(Y.fixedExpenseId)===String(I._id)),paymentAmount:($=u.find(Y=>String(Y.fixedExpenseId)===String(I._id)))==null?void 0:$.amount}}),B=F.filter(I=>I.paid).reduce((I,$)=>I+(Number($.amount)||0),0),U=F.filter(I=>!I.paid).reduce((I,$)=>I+(Number($.amount)||0),0),q=B+U,R={};p.forEach(I=>{const $=I.category||"Other";R[$]||(R[$]={total:0,items:[]}),R[$].total+=Number(I.amount)||0,R[$].items.push(I)});const H=p.reduce((I,$)=>I+(Number($.amount)||0),0),W=j.filter(I=>I.included&&I.type!=="credit"),ee={};W.forEach(I=>{const $=I.category||"Other";ee[$]||(ee[$]=0),ee[$]+=Number(I.amount)||0});const ge=W.reduce((I,$)=>I+(Number($.amount)||0),0),G=q+H+ge,ne=T-G,ve=k.reduce((I,$)=>I+(Number($.monthlyContribution)||0),0),de=I=>new Promise($=>{wj.parse(I,{header:!1,skipEmptyLines:!0,complete:Y=>{const se=Y.data;if(!se||se.length===0){$([]);return}const Ne=Q=>String(Q||"").replace(/"/g,"").trim(),me=se[0].map(Ne),xe=/^\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}$/,pe=/^-?\$?\d[\d,.]*$/,oe=xe.test(me[0]),be=pe.test(me[0]),Ee=oe||be;let Ie=[];if(Ee){let Q=-1,J=-1,he=-1;me.forEach((Ae,Oe)=>{if(Q<0&&xe.test(Ae)){Q=Oe;return}if(J<0&&pe.test(Ae)&&Ae!=="*"){J=Oe;return}}),me.forEach((Ae,Oe)=>{Oe===Q||Oe===J||Ae==="*"||Ae===""||Ae.length>3&&(he<0||Ae.length>me[he].length)&&(he=Oe)}),he<0&&se.forEach(Ae=>{Ae.forEach((Oe,It)=>{const dt=Ne(Oe);It===Q||It===J||dt.length>5&&!/^\*+$/.test(dt)&&!/^\d/.test(dt)&&(he<0||dt.length>Ne((se[0]||[])[he]||"").length)&&(he=It)})}),Ie=se.map(Ae=>{const Oe=Ae.map(Ne),It=Q>=0?Oe[Q]:"",dt=he>=0?Oe[he]:Oe.find(qt=>qt.length>5&&!/^[\d\*]/.test(qt))||"",gt=J>=0?Oe[J].replace(/[$,\s]/g,""):"0",xt=parseFloat(gt)||0;return{date:It,description:dt,amount:Math.abs(xt),type:xt<0?"debit":"credit",category:cu(dt),bank:I.name}}).filter(Ae=>Ae.amount>0&&Ae.date)}else{const Q=me.map(gt=>gt.toLowerCase()),J=(...gt)=>{for(const xt of gt){const qt=Q.indexOf(xt);if(qt>=0)return qt}return-1},he=J("date","transaction date","posted date","trans date","trans. date"),Ae=J("description","memo","name","details","payee","transaction description"),Oe=J("amount","transaction amount","transaction amount (usd)"),It=J("debit","debit amount","withdrawal","withdrawals"),dt=J("credit","credit amount","deposit","deposits");Ie=se.slice(1).map(gt=>{const xt=gt.map(Ne),qt=he>=0?xt[he]:"",te=Ae>=0?xt[Ae]:"";let Se=0,Ce="debit";if(Oe>=0){const He=xt[Oe].replace(/[$,\s]/g,"");Se=Math.abs(parseFloat(He)||0),Ce=parseFloat(He)<0?"debit":"credit"}else if(It>=0){const He=parseFloat(xt[It].replace(/[$,\s]/g,""))||0,ur=dt>=0&&parseFloat(xt[dt].replace(/[$,\s]/g,""))||0;He>0?(Se=He,Ce="debit"):(Se=ur,Ce="credit")}return{date:qt,description:te,amount:Se,type:Ce,category:cu(te),bank:I.name}}).filter(gt=>gt.amount>0&&gt.date)}$(Ie)},error:()=>$([])})}),ke=async I=>{const Y=Array.from(I).map(me=>({id:`${me.name}-${Date.now()}-${Math.random()}`,name:me.name,ext:me.name.split(".").pop().toLowerCase(),status:"processing",transactions:[],error:null,file:me}));P(me=>[...me,...Y.map(({file:xe,...pe})=>pe)]),L(!0);const se=Y.filter(me=>me.ext==="pdf"),Ne=Y.filter(me=>me.ext==="csv");for(const me of Ne){const xe=await de(me.file);P(pe=>pe.map(oe=>oe.id===me.id?{...oe,status:xe.length>0?"done":"empty",transactions:xe}:oe)),N(pe=>[...pe,...xe.map((oe,be)=>({...oe,rowId:`${me.id}-${be}`,included:oe.type==="debit"}))])}if(se.length>0){ae(!0);try{const me=new FormData;se.forEach(oe=>me.append("statements",oe.file));const pe=(await O.post("/statements/upload",me,{headers:{"Content-Type":"multipart/form-data"}})).data.files||[];for(const oe of pe){const be=se.find(Ee=>Ee.name===oe.filename);be&&(P(Ee=>Ee.map(Ie=>Ie.id===be.id?{...Ie,status:oe.error?"error":oe.transactionCount>0?"done":"empty",transactions:oe.transactions,error:oe.error||null}:Ie)),N(Ee=>[...Ee,...oe.transactions.map((Ie,Q)=>({...Ie,rowId:`${be.id}-${Q}`,included:Ie.type==="debit"}))]))}}catch{se.forEach(xe=>{P(pe=>pe.map(oe=>oe.id===xe.id?{...oe,status:"error",error:"Upload failed"}:oe))})}finally{ae(!1)}}},V=I=>N($=>$.map(Y=>Y.rowId===I?{...Y,included:!Y.included}:Y)),ce=(I,$)=>N(Y=>Y.map(se=>se.rowId===I?{...se,category:$}:se)),re=I=>{const $=C.find(Y=>Y.id===I);P(Y=>Y.filter(se=>se.id!==I)),$&&N(Y=>Y.filter(se=>!se.rowId.startsWith(I)))},le=I=>{I.preventDefault(),ke(I.dataTransfer.files)},we=()=>window.print();return s?r.jsx(Te,{children:r.jsx("div",{className:"flex items-center justify-center py-24",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Building your finance report"})]})})}):i?r.jsx(Te,{children:r.jsx("div",{className:"flex items-center justify-center py-24",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-red-500 mb-4",children:i}),r.jsx("button",{onClick:_,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm hover:bg-indigo-700",children:"Retry"})]})})}):r.jsxs(r.Fragment,{children:[r.jsx("style",{children:`
        @media print {
          body * { visibility: hidden; }
          #finance-report, #finance-report * { visibility: visible; }
          #finance-report { position: absolute; top: 0; left: 0; width: 100%; padding: 24px; }
          .no-print { display: none !important; }
          .print-page-break { page-break-before: always; }
          @page { margin: 1.5cm; size: A4; }
        }
      `}),r.jsx(Te,{children:r.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 pb-16",children:[r.jsxs("div",{className:"no-print mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Finance Meeting Report"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:"Monthly household financial summary for your review meeting"})]}),r.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[r.jsx("select",{value:n,onChange:I=>a(I.target.value),className:"px-3 py-2 text-sm border border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:Cj().map(I=>r.jsx("option",{value:I,children:qn(I)},I))}),r.jsxs("button",{onClick:()=>L(I=>!I),className:"flex items-center gap-2 px-4 py-2 text-sm border border-indigo-200 dark:border-indigo-700 text-indigo-600 dark:text-indigo-400 rounded-lg hover:bg-indigo-50 dark:hover:bg-indigo-900 transition-colors",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Upload Statements ",C.length>0&&`(${C.length})`]}),r.jsxs("button",{onClick:we,className:"flex items-center gap-2 px-4 py-2 text-sm bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Print / Save PDF"]})]})]}),E&&r.jsxs("div",{className:"no-print mb-6 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[r.jsxs("div",{className:"px-5 py-4 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"Upload Bank Statements"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"Upload CSV or PDF statements from multiple banks. CSV is recommended for accuracy."})]}),r.jsx("button",{onClick:()=>L(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"m-4 border-2 border-dashed border-gray-200 dark:border-gray-600 rounded-lg p-8 text-center cursor-pointer hover:border-indigo-400 dark:hover:border-indigo-500 transition-colors",onDrop:le,onDragOver:I=>I.preventDefault(),onClick:()=>{var I;return(I=Z.current)==null?void 0:I.click()},children:[r.jsx("svg",{className:"w-10 h-10 text-gray-300 dark:text-gray-600 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[r.jsx("span",{className:"text-indigo-500 font-medium",children:"Click to select"})," or drag & drop"]}),r.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:"CSV and PDF  up to 10 files at once"}),r.jsx("input",{ref:Z,type:"file",accept:".csv,.pdf",multiple:!0,className:"hidden",onChange:I=>ke(I.target.files)})]}),C.length>0&&r.jsxs("div",{className:"px-4 pb-3 flex flex-wrap gap-2",children:[C.map(I=>r.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full border text-xs font-medium\r
                      bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-200`,children:[r.jsx("span",{className:`w-2 h-2 rounded-full flex-shrink-0 ${I.status==="processing"?"bg-amber-400 animate-pulse":I.status==="done"?"bg-green-400":I.status==="empty"?"bg-gray-400":"bg-red-400"}`}),r.jsx("span",{className:"max-w-[160px] truncate",children:I.name}),I.status==="done"&&r.jsxs("span",{className:"text-gray-400",children:[" ",I.transactions.length," rows"]}),I.status==="error"&&r.jsx("span",{className:"text-red-500",children:"error"}),I.status==="empty"&&r.jsx("span",{className:"text-gray-400",children:"no transactions found"}),r.jsx("button",{onClick:()=>re(I.id),className:"text-gray-400 hover:text-red-500 ml-1",children:""})]},I.id)),K&&r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full border text-xs text-gray-500 border-gray-200",children:[r.jsxs("svg",{className:"w-3 h-3 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})]}),"Processing PDF"]})]}),j.length>0&&r.jsxs("div",{className:"px-4 pb-5",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:["Review Transactions  ",j.filter(I=>I.included).length," of ",j.length," selected"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>N(I=>I.map($=>({...$,included:$.type!=="credit"}))),className:"text-xs text-indigo-500 hover:underline",children:"Select debits"}),r.jsx("span",{className:"text-gray-300",children:"|"}),r.jsx("button",{onClick:()=>N(I=>I.map($=>({...$,included:!0}))),className:"text-xs text-indigo-500 hover:underline",children:"All"}),r.jsx("span",{className:"text-gray-300",children:"|"}),r.jsx("button",{onClick:()=>N(I=>I.map($=>({...$,included:!1}))),className:"text-xs text-gray-400 hover:underline",children:"None"})]})]}),r.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-100 dark:border-gray-700",children:r.jsxs("table",{className:"w-full text-xs",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 text-gray-500 dark:text-gray-400",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2 w-8 text-center",children:r.jsx("input",{type:"checkbox",className:"rounded",checked:j.every(I=>I.included),onChange:I=>N($=>$.map(Y=>({...Y,included:I.target.checked})))})}),r.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Bank"}),r.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Date"}),r.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Description"}),r.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Category"}),r.jsx("th",{className:"px-3 py-2 text-right font-medium",children:"Amount"}),r.jsx("th",{className:"px-3 py-2 text-center font-medium",children:"Type"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-50 dark:divide-gray-700",children:j.map(I=>{var $;return r.jsxs("tr",{className:`${I.included?"":"opacity-40"} hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors`,children:[r.jsx("td",{className:"px-3 py-2 text-center",children:r.jsx("input",{type:"checkbox",className:"rounded",checked:I.included,onChange:()=>V(I.rowId)})}),r.jsx("td",{className:"px-3 py-2 text-gray-500 max-w-[90px] truncate",children:($=I.bank)==null?void 0:$.split(".")[0]}),r.jsx("td",{className:"px-3 py-2 text-gray-600 dark:text-gray-400 whitespace-nowrap",children:I.date}),r.jsx("td",{className:"px-3 py-2 text-gray-700 dark:text-gray-300 max-w-[180px] truncate",children:I.description}),r.jsx("td",{className:"px-3 py-2",children:r.jsx("select",{value:I.category,onChange:Y=>ce(I.rowId,Y.target.value),className:"text-xs py-0.5 px-1 border border-gray-200 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200",children:Sj.map(Y=>r.jsx("option",{children:Y},Y))})}),r.jsxs("td",{className:`px-3 py-2 text-right font-medium ${I.type==="credit"?"text-green-600":"text-red-600"}`,children:[I.type==="credit"?"+":"-",Pe(I.amount)]}),r.jsx("td",{className:"px-3 py-2 text-center",children:r.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-medium ${I.type==="credit"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:I.type})})]},I.rowId)})})]})}),W.length>0&&r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 text-right",children:[W.length," debit transactions  Total: ",r.jsx("span",{className:"font-semibold text-red-600",children:Pe(ge)}),"  included in report summary below"]})]})]}),r.jsxs("div",{id:"finance-report",className:"space-y-5",children:[r.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-700 rounded-xl p-6 text-white print:rounded-none print:from-white print:to-white print:text-black print:border print:border-gray-300 print:p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/20 flex items-center justify-center print:hidden",children:r.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),r.jsx("span",{className:"text-white/80 text-sm font-medium print:text-gray-500",children:"Household Budget"})]}),r.jsx("h1",{className:"text-2xl font-bold print:text-2xl print:text-gray-900",children:"Monthly Finance Report"}),r.jsx("p",{className:"text-white/90 text-lg font-medium mt-0.5 print:text-gray-700",children:qn(n)})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-white/70 text-xs print:text-gray-400",children:"Generated"}),r.jsx("p",{className:"text-white text-sm font-medium print:text-gray-700",children:new Date().toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}),C.filter(I=>I.status==="done").length>0&&r.jsxs("p",{className:"text-white/70 text-xs mt-1 print:text-gray-400",children:["+ ",C.filter(I=>I.status==="done").length," bank statement",C.filter(I=>I.status==="done").length>1?"s":""," uploaded"]})]})]})}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{label:"Total Income",value:Pe(T),color:"green",icon:""},{label:"Total Expenses",value:Pe(G),color:"red",icon:""},{label:"Net Remaining",value:Pe(ne),color:ne>=0?"blue":"red",icon:"="},{label:"To Savings",value:Pe(ve),color:"purple",icon:""}].map(I=>r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-100 dark:border-gray-700 print:rounded-none print:bg-white print:border-gray-200",children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 print:text-gray-500",children:I.label}),r.jsx("p",{className:`text-xl font-bold text-${I.color}-600 print:text-${I.color}-600`,children:I.value})]},I.label))}),r.jsxs(rn,{children:[r.jsx(tn,{title:"1. Income Received",subtitle:`${d.length} entries`}),d.length===0?r.jsxs("p",{className:"text-sm text-gray-400 italic",children:["No income recorded for ",qn(n),"."]}):r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700 print:border-gray-200",children:[r.jsx("th",{className:"pb-2 text-left text-xs font-semibold text-gray-400 uppercase tracking-wide",children:"Contributor"}),r.jsx("th",{className:"pb-2 text-left text-xs font-semibold text-gray-400 uppercase tracking-wide",children:"Source"}),r.jsx("th",{className:"pb-2 text-left text-xs font-semibold text-gray-400 uppercase tracking-wide",children:"Week"}),r.jsx("th",{className:"pb-2 text-right text-xs font-semibold text-gray-400 uppercase tracking-wide",children:"Amount"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-50 dark:divide-gray-700/50 print:divide-gray-100",children:d.map((I,$)=>{var Y,se;return r.jsxs("tr",{children:[r.jsx("td",{className:"py-2 text-gray-700 dark:text-gray-300 print:text-gray-800",children:I.contributorName||""}),r.jsx("td",{className:"py-2 text-gray-500 dark:text-gray-400 print:text-gray-600",children:((se=(Y=I.dailyBreakdown)==null?void 0:Y[0])==null?void 0:se.source)||I.source||""}),r.jsxs("td",{className:"py-2 text-gray-400 print:text-gray-500",children:["Wk ",I.week||""]}),r.jsx("td",{className:"py-2 text-right font-semibold text-green-600",children:Pe(I.weeklyTotal||I.amount)})]},I._id||$)})}),r.jsx("tfoot",{children:r.jsxs("tr",{className:"border-t-2 border-gray-200 dark:border-gray-600 print:border-gray-300",children:[r.jsx("td",{colSpan:3,className:"pt-2 font-bold text-gray-700 dark:text-gray-200 print:text-gray-800",children:"Total Income"}),r.jsx("td",{className:"pt-2 text-right font-bold text-green-600 text-base",children:Pe(T)})]})})]})]}),r.jsxs(rn,{children:[r.jsx(tn,{title:"2. Fixed Expenses",subtitle:`${F.filter(I=>I.paid).length} paid  ${F.filter(I=>!I.paid).length} unpaid`}),F.length===0?r.jsx("p",{className:"text-sm text-gray-400 italic",children:"No fixed expenses found."}):r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700 print:border-gray-200",children:[r.jsx("th",{className:"pb-2 text-left text-xs font-semibold text-gray-400 uppercase tracking-wide",children:"Name"}),r.jsx("th",{className:"pb-2 text-left text-xs font-semibold text-gray-400 uppercase tracking-wide",children:"Category"}),r.jsx("th",{className:"pb-2 text-center text-xs font-semibold text-gray-400 uppercase tracking-wide",children:"Status"}),r.jsx("th",{className:"pb-2 text-right text-xs font-semibold text-gray-400 uppercase tracking-wide",children:"Amount"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-50 dark:divide-gray-700/50 print:divide-gray-100",children:F.map((I,$)=>r.jsxs("tr",{children:[r.jsx("td",{className:"py-2 text-gray-700 dark:text-gray-300 print:text-gray-800",children:I.name}),r.jsx("td",{className:"py-2 text-gray-400 print:text-gray-500",children:I.category||""}),r.jsx("td",{className:"py-2 text-center",children:r.jsx(Ej,{paid:I.paid})}),r.jsx("td",{className:"py-2 text-right font-semibold text-red-600",children:Pe(I.amount)})]},I._id||$))}),r.jsxs("tfoot",{children:[r.jsxs("tr",{className:"border-t border-gray-100 dark:border-gray-700 print:border-gray-200",children:[r.jsx("td",{colSpan:3,className:"pt-2 text-sm text-gray-500 print:text-gray-600",children:"Paid"}),r.jsx("td",{className:"pt-2 text-right text-sm font-semibold text-green-600",children:Pe(B)})]}),r.jsxs("tr",{children:[r.jsx("td",{colSpan:3,className:"py-1 text-sm text-gray-500 print:text-gray-600",children:"Still Owed"}),r.jsx("td",{className:"py-1 text-right text-sm font-semibold text-amber-600",children:Pe(U)})]}),r.jsxs("tr",{className:"border-t-2 border-gray-200 dark:border-gray-600 print:border-gray-300",children:[r.jsx("td",{colSpan:3,className:"pt-2 font-bold text-gray-700 dark:text-gray-200 print:text-gray-800",children:"Total Fixed"}),r.jsx("td",{className:"pt-2 text-right font-bold text-red-600 text-base",children:Pe(q)})]})]})]})]}),r.jsxs(rn,{children:[r.jsx(tn,{title:"3. Variable Expenses",subtitle:`${p.length} transactions`}),Object.keys(R).length===0&&W.length===0?r.jsxs("p",{className:"text-sm text-gray-400 italic",children:["No variable expenses for ",qn(n),"."]}):r.jsx(r.Fragment,{children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700 print:border-gray-200",children:[r.jsx("th",{className:"pb-2 text-left text-xs font-semibold text-gray-400 uppercase tracking-wide",children:"Category"}),r.jsx("th",{className:"pb-2 text-right text-xs font-semibold text-gray-400 uppercase tracking-wide",children:"# Items"}),r.jsx("th",{className:"pb-2 text-right text-xs font-semibold text-gray-400 uppercase tracking-wide",children:"Amount"})]})}),r.jsxs("tbody",{className:"divide-y divide-gray-50 dark:divide-gray-700/50 print:divide-gray-100",children:[Object.entries(R).sort((I,$)=>$[1].total-I[1].total).map(([I,$])=>r.jsxs("tr",{children:[r.jsx("td",{className:"py-2 text-gray-700 dark:text-gray-300 print:text-gray-800",children:I}),r.jsx("td",{className:"py-2 text-right text-gray-400 print:text-gray-500",children:$.items.length}),r.jsx("td",{className:"py-2 text-right font-semibold text-orange-600",children:Pe($.total)})]},I)),Object.entries(ee).sort((I,$)=>$[1]-I[1]).map(([I,$])=>r.jsxs("tr",{className:"bg-indigo-50/40 dark:bg-indigo-900/20 print:bg-transparent",children:[r.jsxs("td",{className:"py-2 text-gray-700 dark:text-gray-300 print:text-gray-800",children:[I,r.jsx("span",{className:"ml-2 text-xs text-indigo-500 print:text-indigo-600",children:"(from statement)"})]}),r.jsx("td",{className:"py-2 text-right text-gray-400",children:""}),r.jsx("td",{className:"py-2 text-right font-semibold text-orange-600",children:Pe($)})]},`imported-${I}`))]}),r.jsx("tfoot",{children:r.jsxs("tr",{className:"border-t-2 border-gray-200 dark:border-gray-600 print:border-gray-300",children:[r.jsx("td",{colSpan:2,className:"pt-2 font-bold text-gray-700 dark:text-gray-200 print:text-gray-800",children:"Total Variable"}),r.jsx("td",{className:"pt-2 text-right font-bold text-orange-600 text-base",children:Pe(H+ge)})]})})]})})]}),(v==null?void 0:v.creditCards)&&v.creditCards.length>0&&r.jsxs(rn,{children:[r.jsx(tn,{title:"4. Credit & Debt"}),r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700 print:border-gray-200",children:[r.jsx("th",{className:"pb-2 text-left text-xs font-semibold text-gray-400 uppercase tracking-wide",children:"Card"}),r.jsx("th",{className:"pb-2 text-right text-xs font-semibold text-gray-400 uppercase tracking-wide",children:"Balance"}),r.jsx("th",{className:"pb-2 text-right text-xs font-semibold text-gray-400 uppercase tracking-wide",children:"Limit"}),r.jsx("th",{className:"pb-2 text-right text-xs font-semibold text-gray-400 uppercase tracking-wide",children:"Utilization"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-50 dark:divide-gray-700/50 print:divide-gray-100",children:v.creditCards.map((I,$)=>{const Y=I.creditLimit>0?(I.currentBalance/I.creditLimit*100).toFixed(0):0;return r.jsxs("tr",{children:[r.jsx("td",{className:"py-2 text-gray-700 dark:text-gray-300 print:text-gray-800",children:I.cardName||I.name}),r.jsx("td",{className:"py-2 text-right font-semibold text-red-600",children:Pe(I.currentBalance)}),r.jsx("td",{className:"py-2 text-right text-gray-400",children:Pe(I.creditLimit)}),r.jsx("td",{className:"py-2 text-right",children:r.jsxs("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${Y>70?"bg-red-50 text-red-700":Y>30?"bg-amber-50 text-amber-700":"bg-green-50 text-green-700"}`,children:[Y,"%"]})})]},I._id||$)})})]})]}),k.length>0&&r.jsxs(rn,{children:[r.jsx(tn,{title:"5. Savings & Goals",subtitle:`${k.length} goals`}),r.jsx("div",{className:"space-y-4",children:k.map((I,$)=>{const Y=I.target>0?Math.min(I.currentBalance/I.target*100,100):0;return r.jsxs("div",{className:"border border-gray-100 dark:border-gray-700 rounded-lg p-3 print:border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-sm text-gray-800 dark:text-gray-100 print:text-gray-900",children:I.name}),r.jsx("p",{className:"text-xs text-gray-400",children:I.type})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm font-bold text-teal-600",children:Pe(I.currentBalance)}),r.jsxs("p",{className:"text-xs text-gray-400",children:["of ",Pe(I.target)]})]})]}),r.jsx("div",{className:"w-full bg-gray-100 dark:bg-gray-700 rounded-full h-2 print:bg-gray-200",children:r.jsx("div",{className:"bg-teal-500 h-2 rounded-full",style:{width:`${Y}%`}})}),r.jsxs("div",{className:"flex justify-between mt-1",children:[r.jsxs("span",{className:"text-xs text-gray-400",children:[Y.toFixed(0),"% complete"]}),I.monthlyContribution>0&&r.jsxs("span",{className:"text-xs text-gray-400",children:["Monthly contribution: ",Pe(I.monthlyContribution)]})]})]},I._id||$)})}),r.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-100 dark:border-gray-700 flex justify-between print:border-gray-200",children:[r.jsx("span",{className:"font-bold text-gray-700 dark:text-gray-200 print:text-gray-800",children:"Total Monthly Contributions"}),r.jsx("span",{className:"font-bold text-teal-600",children:Pe(ve)})]})]}),b.length>0&&r.jsxs(rn,{children:[r.jsx(tn,{title:"6. Household Income Split"}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:b.map((I,$)=>{const Y=ne*I.splitPercentage/100,se=Y/4.33;return r.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/30 dark:to-purple-900/30 rounded-lg p-4 print:bg-transparent print:border print:border-gray-200",children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-100 print:text-gray-900",children:I.userName}),r.jsxs("span",{className:"text-sm font-medium text-indigo-600 print:text-indigo-700",children:[I.splitPercentage,"%"]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-400",children:"Monthly share"}),r.jsx("p",{className:"font-bold text-indigo-600",children:Pe(Y)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-400",children:"Weekly"}),r.jsx("p",{className:"font-bold text-purple-600",children:Pe(se)})]})]})]},I._id||$)})})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/60 rounded-xl p-5 border border-gray-200 dark:border-gray-700 print:border-gray-300 print:bg-white",children:[r.jsx("h2",{className:"font-bold text-gray-700 dark:text-gray-200 print:text-gray-800 mb-4 text-base",children:"Summary"}),r.jsx("div",{className:"space-y-2 text-sm",children:[{label:"Total Income",val:Pe(T),color:"text-green-600"},{label:"Fixed Expenses",val:Pe(q),color:"text-red-600"},{label:"Variable Expenses",val:Pe(H+ge),color:"text-orange-600"},{label:"Total Expenses",val:Pe(G),color:"text-red-700",bold:!0},{label:"Net Remaining",val:Pe(ne),color:ne>=0?"text-blue-600":"text-red-600",bold:!0},{label:"Savings Contributions",val:Pe(ve),color:"text-teal-600"},{label:"After Savings",val:Pe(ne-ve),color:"text-indigo-600",bold:!0}].map(I=>r.jsxs("div",{className:`flex justify-between items-center ${I.bold?"border-t border-gray-200 dark:border-gray-600 pt-2 mt-2 print:border-gray-200":""}`,children:[r.jsx("span",{className:`${I.bold?"font-bold text-gray-800 dark:text-gray-100 print:text-gray-900":"text-gray-600 dark:text-gray-400 print:text-gray-600"}`,children:I.label}),r.jsx("span",{className:`font-semibold ${I.color} ${I.bold?"text-base":""}`,children:I.val})]},I.label))})]}),r.jsx("div",{className:"hidden print:block text-center mt-8 pt-4 border-t border-gray-200",children:r.jsxs("p",{className:"text-xs text-gray-400",children:["Household Budget  ",qn(n)," Finance Meeting  Generated ",new Date().toLocaleDateString()]})})]})]})})]})}function Ij({children:e}){const{isAuthenticated:t,loading:n,user:a}=_e();return n?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):(console.log("[ProtectedRoute] Checking access:",{isAuthenticated:t,userId:a==null?void 0:a.userId,hasUser:!!a}),t?(a==null?void 0:a.onboardingCompleted)===!1?r.jsx(Ws,{to:"/onboarding",replace:!0}):e||r.jsx(qp,{}):(console.warn("[ProtectedRoute] Not authenticated, redirecting to /unauthorized"),r.jsx(Ws,{to:"/unauthorized",replace:!0})))}console.log("[App] Rendering App component");function Lj(){const{pathname:e}=cr(),{language:t}=ue();return g.useEffect(()=>{t==="es"&&setTimeout(()=>{Xi(""),setTimeout(()=>Xi("es"),300)},200)},[e,t]),null}function Rj(){return r.jsx(mf,{children:r.jsx(of,{children:r.jsx(df,{children:r.jsx(cf,{children:r.jsx(uf,{children:r.jsxs(rf,{children:[r.jsx(Lj,{}),r.jsxs(Yp,{children:[r.jsx(Le,{path:"/login",element:r.jsx(Qy,{})}),r.jsx(Le,{path:"/register",element:r.jsx(Yc,{})}),r.jsx(Le,{path:"/register/:inviteToken",element:r.jsx(Yc,{})}),r.jsx(Le,{path:"/invite/:token",element:r.jsx(sv,{})}),r.jsx(Le,{path:"/unauthorized",element:r.jsx(lv,{})}),r.jsx(Le,{path:"/privacy-policy",element:r.jsx(uj,{})}),r.jsx(Le,{path:"/terms",element:r.jsx(mj,{})}),r.jsx(Le,{path:"/onboarding",element:r.jsx(pj,{})}),r.jsx(Le,{path:"/",element:r.jsx(jj,{})}),r.jsxs(Le,{element:r.jsx(Ij,{}),children:[r.jsx(Le,{path:"/dashboard",element:r.jsx(lb,{})}),r.jsx(Le,{path:"/dashboard/income",element:r.jsx(Xc,{})}),r.jsx(Le,{path:"/income",element:r.jsx(Xc,{})}),r.jsx(Le,{path:"/expenses",element:r.jsx(vb,{})}),r.jsx(Le,{path:"/fixed-expenses",element:r.jsx(Pb,{})}),r.jsx(Le,{path:"/goals",element:r.jsx(Bb,{})}),r.jsx(Le,{path:"/credit-cards",element:r.jsx(Kb,{})}),r.jsx(Le,{path:"/card-statements",element:r.jsx(Zb,{})}),r.jsx(Le,{path:"/debt-payments",element:r.jsx(rv,{})}),r.jsx(Le,{path:"/monthly-overview",element:r.jsx(nv,{})}),r.jsx(Le,{path:"/members",element:r.jsx(iv,{})}),r.jsx(Le,{path:"/linked-accounts",element:r.jsx(Qv,{})}),r.jsx(Le,{path:"/transactions/review",element:r.jsx(ej,{})}),r.jsx(Le,{path:"/pricing",element:r.jsx(aj,{})}),r.jsx(Le,{path:"/subscription",element:r.jsx(oj,{})}),r.jsx(Le,{path:"/insights",element:r.jsx(dj,{})}),r.jsx(Le,{path:"/settings/profile",element:r.jsx(cj,{})}),r.jsx(Le,{path:"/finance-report",element:r.jsx(Pj,{})})]})]})]})})})})})})}function _j(e="production"){{console.warn("[Sentry] DSN not configured. Error tracking disabled.");return}}try{console.log("[App Start] Initializing Sentry..."),_j("production"),console.log("[App Start] Sentry initialized")}catch(e){console.error("[App Start] Sentry initialization failed:",e)}console.log("[App Start] Rendering React app...");const uu=document.getElementById("root");uu?(ti.createRoot(uu).render(r.jsx(dl.StrictMode,{children:r.jsx(Rj,{})})),console.log("[App Start] React app rendered successfully")):(console.error("[App Start] Root element not found!"),document.body.innerHTML="<h1>Error: Root element #root not found</h1>");
